(function(){"use strict";angular.module("smartRegisterApp",["ngRoute","ngResource","ngAnimate","NgSwitchery","ngCookies","csv","versionPoll","restangular","API","ui.bootstrap","ui","xeditable","kendo.directives","ngLocalize","ngLocalize.Config","ngLocalize.InstalledLanguages","angularSpinner"])}).call(this),function(){"use strict";angular.module("smartRegisterApp").controller("RootCtrl",["$rootScope","SettingsService","$location",function(a,b){return a.hasModuleEnabled=function(a){return b.hasModuleEnabled(a)}}])}.call(this),angular.module("smartRegisterApp").run(["$templateCache",function(a){"use strict";a.put("views/403.html",'<div class="jumbotron"><div class="container"><h1>Forbidden</h1><p>Sorry, but access to that page has been denied.</p></div></div>'),a.put("views/404.html",'<div class="jumbotron"><div class="container"><h1>Not found</h1><p>Sorry, but the page you were trying to view does not exist.</p><p>It looks like this was the result of either:</p><ul><li>a mistyped address</li><li>an out-of-date link</li></ul></div></div>'),a.put("views/comparison-report.html",'<div class="container"><div class="row"><header class="report-header col-sm-12"><h1>Comparison reports</h1><div class="panel"><div class="panel-body"><form data-ng-submit="update()"><div class="row"><div class="col-sm-6"><fieldset><legend>Compare&hellip;</legend><div class="form-group"><label for="date" class="sr-only">From</label><input id="date" type="date" data-ng-model="date" class="form-control input-lg" required></div></fieldset></div><div class="col-sm-6"><fieldset class="clearfix"><legend>With&hellip;</legend><div class="radio"><label><input name="compare" type="radio" value="day" data-ng-model="compare"> same day of previous week</label></div><div class="radio"><label><input name="compare" type="radio" value="week" data-ng-model="compare"> previous week</label></div><div class="radio"><label><input name="compare" type="radio" value="month" data-ng-model="compare"> previous month</label></div><div class="radio"><label><input name="compare" type="radio" value="year" data-ng-model="compare"> same month in previous year</label></div></fieldset><button type="submit" class="btn btn-primary btn-lg pull-right" data-loading-button="Updating&hellip;">Update</button></div></div></form></div></div></header></div><div class="row"><div class="report col-sm-6"><section id="smart-report" class="report smart-report comparison-report" data-reports="reports"><section id="smart-report" class="report smart-report" data-reports="reports"><h2>smartReport</h2><table class="table table-condensed report-table"><thead><tr><th>Report period</th><th data-ng-repeat="report in reports">{{reportPeriods()[$index]}}</th></tr></thead><tbody><tr><th>Item sales</th><td data-ng-repeat="report in reports">{{report.totalSales() | currency:"£"}}</td></tr><tr><th>Item refunds</th><td data-ng-repeat="report in reports">{{report.totalRefunds() * -1 | currency:"£"}}</td></tr><tr><th>Refund count</th><td data-ng-repeat="report in reports">({{report.refundCount() | number}})</td></tr><tr><th>VAT</th><td data-ng-repeat="report in reports">{{report.totalTax() | currency:"£"}}</td></tr><tr><th>Total</th><td data-ng-repeat="report in reports">{{report.totalGross() | currency:"£"}}</td></tr></tbody></table></section></section></div><div class="report col-sm-6"><section id="payment-types" class="report payment-types-report comparison-report" data-reports="reports" data-headings="reportPeriods()"></section></div></div><section id="by-category" class="report category-report"><div class="row"><div class="col-sm-12"><h2>Categories</h2></div></div><div class="row"><div class="col-sm-6" data-ng-repeat="report in reports"><h3>{{reportPeriods()[$index]}}</h3><category-report report="report"></category-report></div></div><div class="row"><div class="col-sm-12"><bar-chart data-source="byCategory()" data-labels="category" data-values="net" data-currency="&#163;" data-id="chart1" data-legends="reportPeriods" data-hide-values data-tooltips><h3>Net sales by category</h3></bar-chart></div></div><div class="row"><div class="col-sm-12"><bar-chart data-source="byCategory()" data-labels="category" data-values="payment.count" data-id="chart2" data-legends="reportPeriods" data-hide-values data-tooltips><h3>Items sold by category</h3></bar-chart></div></div></section><section id="by-product" class="report product-report"><div class="row"><div class="col-sm-12"><h2>Products (top 10)</h2></div></div><div class="row"><div class="col-sm-6" data-ng-repeat="report in reports"><h3>{{reportPeriods()[$index]}}</h3><product-report report="report"></product-report></div></div><div class="row"><div class="col-sm-12"><bar-chart data-source="byProduct()" data-labels="title" data-values="net" data-currency="&#163;" data-id="chart3" data-legends="reportPeriods" data-hide-values data-tooltips><h3>Net sales by product</h3></bar-chart></div></div><div class="row"><div class="col-sm-12"><bar-chart data-source="byProduct()" data-labels="title" data-values="payment.count" data-id="chart4" data-legends="reportPeriods" data-hide-values><h3>Items sold by product</h3></bar-chart></div></div></section></div>'),a.put("views/cpr-history.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header">{{title}}</h1><div class="controls pull-right"><input type="button" class="icon icon-lg plus-icon" data-ng-click="create()" value="Create Closing POS Report"></div></div></div></header><section class="container"><div class="cpr-list"></div></section>'),a.put("views/cpr-report.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header">{{title}}</h1><div class="controls pull-right"><input type="button" class="icon icon-lg back-icon" data-ng-click="back()" data-ng-if="backUrl" value="Back"> <input type="button" class="icon icon-lg back-icon" data-ng-click="generatePDF(report)" data-ng-if="readOnly()" value="Export PDF"> <input type="button" class="icon icon-lg tick-icon" data-ng-click="save()" value="Save" data-ng-if="!readOnly()"></div></div></div></header><section id="DCPRReport" class="container"><alert-box data-group="CPRReport"></alert-box><div class="reportBlock" data-ng-if="report"><div class="k-block"><div class="row header-bar">Closing POS Report</div><div class="row data-row"><div class="col-md-2 header-col"><span>Venue</span></div><div class="col-md-10"><div class="pull-right"><select id="venue" name="venue"></select></div></div></div><div class="row data-row"><div class="col-md-2 header-col"><span>POS</span></div><div class="col-md-10"><div class="pull-right"><select id="posId" name="posId"></select></div></div></div><div class="row data-row"><div class="col-md-2 header-col"><span>Opening</span></div><div class="col-md-4 pull-right"><input id="opening" class="pull-right"></div></div><div class="row data-row"><div class="col-md-2 header-col"><span>Closing</span></div><div class="col-md-4 pull-right"><input id="closing" class="pull-right"></div></div><div class="row header-bar"><span>Sales</span></div><div class="row data-row header-row"><div class="col-md-3"><span></span></div><div class="col-md-2"><span>Payments</span></div><div class="col-md-3"><span>Actual</span></div><div class="col-md-2"><span>Difference</span></div><div class="col-md-2"><span>% Difference</span></div></div><div class="row data-row"><div class="col-md-3 header-col"><span>Cash</span></div><div class="col-md-2"><span>{{report.cashPayment | currency:"£" }}</span></div><div class="col-md-3"><input class="k-textbox" value="Input" data-ng-model="report.cashPaymentActual" data-ng-change="calculatePayments()" value="{{ report.cashPaymentActual | currency:\'£\' }}" data-ng-if="!readOnly()"> <span data-ng-if="readOnly()">{{ report.cashPaymentActual | currency:"£" }}</span></div><div class="col-md-2"><span>{{ report.calculated.cashPaymentDifference | currency:"£" }}</span></div><div class="col-md-2"><span>{{ formatPercentage(report.calculated.cashPaymentPercentageDifference) }}</span></div></div><div class="row data-row"><div class="col-md-3 header-col"><span>Card</span></div><div class="col-md-2"><span>{{report.cardPayment | currency:"£" }}</span></div><div class="col-md-3"><input class="k-textbox" value="Input" data-ng-model="report.cardPaymentActual" data-ng-change="calculatePayments()" value="{{ report.cardPaymentActual | currency:\'£\' }}" data-ng-if="!readOnly()"> <span data-ng-if="readOnly()">{{ report.cardPaymentActual | currency:"£" }}</span></div><div class="col-md-2"><span>{{ report.calculated.cardPaymentDifference | currency:"£" }}</span></div><div class="col-md-2"><span>{{ formatPercentage(report.calculated.cardPaymentPercentageDifference) }}</span></div></div><div class="row data-row"><div class="col-md-3 header-col"><span>Total</span></div><div class="col-md-2"><span>{{report.calculated.paymentTotal | currency:"£" }}</span></div><div class="col-md-3"><span>{{report.calculated.actualPaymentTotal | currency:"£" }}</span></div><div class="col-md-2"><span>{{ report.calculated.paymentDifferenceTotal | currency:"£" }}</span></div><div class="col-md-2"><span>{{ formatPercentage(report.calculated.paymentPercentageDifference) }}</span></div></div><div class="row header-bar"><span>Payments</span></div><div class="row data-row header-row"><div class="col-md-3"><span></span></div><div class="col-md-2"><span>Payments</span></div><div class="col-md-3"><span>Actual</span></div><div class="col-md-2"><span>Difference</span></div><div class="col-md-2"><span>% Difference</span></div></div><div class="row data-row"><div class="col-md-3 header-col"><span>Payments In</span></div><div class="col-md-2"><span>{{ report.paymentIn | currency:"£" }}</span></div><div class="col-md-3"><span>-</span></div><div class="col-md-2"><span>-</span></div><div class="col-md-2"><span>-</span></div></div><div class="row data-row"><div class="col-md-3 header-col"><span>Payments Out</span></div><div class="col-md-2"><span>{{ report.paymentOut | currency:"£" }}</span></div><div class="col-md-3"><span>-</span></div><div class="col-md-2"><span>-</span></div><div class="col-md-2"><span>-</span></div></div><div class="row header-bar"><span>Totals</span></div><div class="row data-row header-row"><div class="col-md-3"><span></span></div><div class="col-md-2"><span>Payments</span></div><div class="col-md-3"><span>Actual</span></div><div class="col-md-2"><span>Difference</span></div><div class="col-md-2"><span>% Difference</span></div></div><div class="row data-row"><div class="col-md-3 header-col"><span>Opening</span></div><div class="col-md-2"><span>-</span></div><div class="col-md-3"><input class="k-textbox" value="Input" data-ng-model="report.openingBalance" data-ng-change="calculatePayments()" value="{{ report.openingBalance | currency:\'£\' }}" data-ng-if="!readOnly()"> <span data-ng-if="readOnly()">{{ report.openingBalance | currency:"£" }}</span></div><div class="col-md-2"><span>-</span></div><div class="col-md-2"><span>-</span></div></div><div class="row data-row"><div class="col-md-3 header-col"><span class="green-text">Cash Drawer Balance</span></div><div class="col-md-2"><span>{{ report.calculated.cashDrawerBalance | currency:"£" }}</span></div><div class="col-md-3"><span>{{ report.calculated.cashDrawerActual | currency:"£" }}</span></div><div class="col-md-2"><span>{{ report.calculated.cashDrawerDifference | currency:"£" }}</span></div><div class="col-md-2"><span>{{ formatPercentage(report.calculated.cashDrawerPercentageDifference) }}</span></div></div><div data-ng-if="report.vatSummaryDetails"><div class="row header-bar"><span>Tax</span></div><div class="row data-row header-row"><div class="col-md-3"><span></span></div><div class="col-md-7"><span>Rate</span></div><div class="col-md-2"><span>Total Tax value</span></div></div><div class="row data-row" data-ng-repeat="vatRow in report.vatSummaryDetails"><div class="col-md-3"><span></span></div><div class="col-md-7 header-col"><span>{{vatRow.taxRate | percentage}}</span></div><div class="col-md-2"><span>{{vatRow.total | currency:"£"}}</span></div></div></div></div></div></section>'),a.put("views/discount-list.html",'<header class="container-fluid"><div class="row"><div class="container"><h1 class="pull-left main-header">Discounts:<br><span class="subHeader" data-ng-pluralize count="discounts.length" when="{\'0\': \'You currently have no discounts.\',\n                             \'1\': \'You currently have 1 discount.\',\n                             \'other\': \'You currently have {{discounts.length}} discounts.\'}"></span></h1><div class="controls pull-right" data-ng-if="hasModuleEnabled(\'multivenue\')"><button type="button" class="icon icon-lg plus-icon" data-ng-click="create()" data-ng-if="canAddDiscount()">Add New</button></div><div class="btn-group pull-right" dropdown is-open="status.isopen" data-ng-hide="!hasMultipleVenues()" data-ng-if="hasModuleEnabled(\'multivenue\')"><button type="button" class="btn-lg dropdown-toggle" ng-disabled="disabled">Switch Venue <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li data-ng-repeat="venue in venues"><a data-ng-click="switchVenue(venue)">{{venue.name}} ({{venue.id}})</a></li></ul></div></div></div></header><section id="discounts" class="container"><table class="table table-striped"><thead><tr><th data-sortable="name">Name</th><th data-sortable="value">Value</th><th data-ng-if="hasModuleEnabled(\'multivenue\')"></th></tr></thead><tbody><tr ng-repeat="discount in discounts | orderBy:sort:reverse"><td>{{discount.name}}</td><td>{{discount.value | percentage}}</td><td class="controls"><button type="button" class="icon icon-lg edit-icon" ng-click="edit(discount)">Edit</button> <button type="button" class="icon icon-lg bin-icon" ng-click="remove(discount)" data-loading-button="Deleting&hellip;">Delete</button></td></tr></tbody></table></section><section class="modal bs-modal-lg fade" tabindex="-1" role="dialog" data-trigger="discount" data-on-close="cancel"><div class="modal-dialog modal-lg"><div class="modal-content"><form name="discountForm" role="form" data-ng-submit="save()"><header class="modal-header"><h2>Edit discount</h2></header><div class="modal-body"><div class="row"><div data-label="Name" class="form-group col-sm-9"><input class="form-control input-lg" data-ng-model="discount.name" required></div><div data-label="Value" class="form-group col-sm-3"><div class="input-group"><input class="form-control input-lg" data-ng-model="discount.value" data-percentage-input required> <span class="input-group-addon">%</span></div></div></div><fieldset class="row"><legend class="col-sm-12">Available to&hellip;</legend><div class="form-group col-sm-12" data-role-selector="discount.groups"></div></fieldset></div><footer class="modal-footer"><button id="discount-edit-cancel" type="button" class="btn btn-default btn-lg" data-ng-click="cancel()" data-ng-disabled="locked">Cancel</button> <button id="discount-edit-save" type="submit" class="btn btn-success btn-lg" data-loading-button="Saving&hellip;">Save</button></footer></form></div></div></section>'),a.put("views/employee-list.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header">Staff: <span class="subHeader" data-ng-pluralize count="employees.length" when="{\'0\': \'You currently have no staff setup.\',\n                             \'1\': \'You currently have 1 staff setup.\',\n                             \'other\': \'You currently have {{employees.length}} staff setup.\'}"></span></h1><div class="controls pull-right"><input type="button" class="icon icon-lg plus-icon" data-ng-click="create()" value="Add New"></div></div></div></header><section id="employees" class="container"><table class="table table-striped"><thead><tr><th data-sortable="firstname">First name</th><th data-sortable="lastname">Last name</th><th data-sortable="displayName">Display Name</th><th data-sortable="status">Status</th><th data-ng-if="hasModuleEnabled(\'multivenue\')"></th></tr></thead><tbody><tr ng-repeat="employee in employees | orderBy:sort:reverse"><td>{{employee.firstname}}</td><td>{{employee.lastname}}</td><td>{{employee.displayName}}</td><td>{{ employee.enabled ? \'Active\' : \'Inactive\' }}</td><td class="controls"><button type="button" class="icon icon-lg edit-icon" ng-click="edit(employee)">Edit</button> <button type="button" class="icon icon-lg bin-icon" ng-click="confirmedDelete(employee)">Delete</button></td></tr></tbody></table><div class="modal bs-modal-lg fade" data-trigger="employeeToDelete" data-on-cancel="closeConfirm"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-body"><p>Are you sure you want to delete \'{{employeeToDelete.displayName}}\'?</p></div><div class="modal-footer"><button type="button" class="btn btn-default btn-lg" data-ng-click="closeConfirm()">No</button> <button type="button" class="btn btn-danger btn-lg" data-ng-click="confirmYes()">Yes</button></div></div>]</div></div></section>'),a.put("views/faq.html",'<section id="faq" style="margin-top: 5em" class="container"><img src="images/faq/1half_circle_1.png" style="left: 0; height: 36.5em; position: fixed; margin-top: -4em"><div class="container-fluid" style="margin-bottom: 5em"><div class="row"><div class="col-md-6" class="col-padding"><h1 id="target5" data-i18n="dashboard.title"></h1><p><span>&nbsp;</span></p><p style="font-size: 16px; text-align: justify" data-i18n="dashboard.IntroText1"></p><p style="font-size: 16px; text-align: justify; margin-bottom: 2em" data-i18n="dashboard.IntroText2"></p></div><div class="col-md-6" class="col-padding"><img src="images/faq/iPad_Stand.png" style="margin: 10px auto; display: block; width: 100%"></div></div></div></section>'),a.put("views/forgotten-password.html",'<header class="row"><div class="container"><h1 class="pull-left main-header">Forgotten Password:</h1></div></header><section id="forgotten-password" class="container"><alert-box></alert-box><form class="form-horizontal" class="col-md-12"><div class="form-group"><label for="email" class="control-label col-md-4">Please enter your email address</label><div class="col-md-6" validate-data="email" rules="[\'required\',\'email\']" displayname="Email" groupname="ForgottenPassword"><input class="form-control" id="email" name="email" placeholder="Email" data-ng-model="email"></div></div><div class="form-group"><div class="col-md-10"><button type="submit" class="btn btn-primary pull-right" data-ng-click="requestPasswordReset()">Request Password Reset</button></div></div></form></section>'),a.put("views/invalid-env.html",'<div class="jumbotron"><div class="container"><h1>Invalid Environment</h1><p>You have attempted to connect to an invalid myCircle API environment.</p></div></div>'),a.put("views/login.html",'<section class="login"><h1>Welcome to myCircle</h1><form data-ng-submit="login()" name="login-form" class="row"><div class="alert alert-danger" data-ng-if="error">{{error}}</div><fieldset class="col-sm-4 col-sm-offset-4"><div class="form-group"><label for="email" class="sr-only">Username</label><input id="email" class="form-control" type="email" placeholder="Email" data-ng-model="email" required autocapitalize="off" autocorrect="off"></div><div class="form-group"><label for="password" class="sr-only">Password</label><input id="password" class="form-control" type="password" placeholder="Password" data-ng-model="password" required></div><button type="submit" class="btn btn-default pull-right" data-loading-button="Authenticating...">Log in</button> <a href="/#/forgottenPassword">Forgotten Password?</a></fieldset></form></section>'),a.put("views/merchant-list.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header">Merchants: <span class="subHeader" data-ng-pluralize count="merchantlist.length" when="{\'0\': \'You currently have no merchant setup.\',\n                             \'1\': \'You currently have 1 merchants setup.\',\n                             \'other\': \'You currently have {{merchantlist.length}} merchants setup.\'}"></span></h1><div class="controls pull-right" data-ng-if="hasModuleEnabled(\'multivenue\')"><button type="button" class="icon icon-lg plus-icon" data-ng-click="create()">Add New</button></div></div></div></header><alert-box></alert-box><section id="merchants" class="container"><table class="table table-striped"><thead><tr><th data-sortable="name">Name</th><th>Merchant id</th><th class="controls" data-ng-if="!hasModuleEnabled(\'multivenue\')"><button type="button" class="btn btn-primary btn-lg pull-right" data-ng-click="create()">New Merchant</button></th><th data-ng-if="hasModuleEnabled(\'multivenue\')"></th></tr></thead><tbody><tr ng-repeat="merchant in merchants | orderBy:sort:reverse"><td data-ng-class="{\'inactive text-muted\': !merchant.enabled}">{{merchant.name}}</td><td data-ng-class="{\'inactive text-muted\': !merchant.enabled}">{{merchant.id}}</td><td class="controls"><button type="button" class="icon icon-lg edit-icon" data-ng-click="edit(merchant)">Edit</button> <button type="button" class="icon icon-lg bin-icon" data-ng-click="confirmedDelete(merchant)">Delete</button> </td></tr></tbody></table><div id="pager" style="text-align: center"><pagination total-items="totalItems" ng-model="currentPage" items-per-page="itemsPerPage" num-pages="totalPages" class="pagination-sm" boundary-links="false" rotate="false" ng-change="pageChanged()"></pagination></div></section><div class="modal bs-modal-lg fade" data-trigger="merchantToDelete" role="dialog" data-on-cancel="closeConfirm"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-body"><p>Are you sure you want to delete \'{{merchantToDelete.name}}\'?</p></div><div class="modal-footer"><button type="button" class="btn btn-default btn-lg" data-ng-click="closeConfirm()">No</button> <button type="button" class="btn btn-danger btn-lg" data-ng-click="confirmYes()">Yes</button></div></div>]</div></div>'),a.put("views/orders.html",'<header><div class="container"><h1>Search orders</h1></div><div class="panel"><div class="panel-body"><form name="order-search" class="form-inline" data-ng-submit="search()"><div class="input-group input-group-lg"><input type="search" class="form-control" data-ng-model="orderId" placeholder="Order number" autocomplete="off" autocapitalize="off"> <span class="input-group-btn"><button type="submit" class="btn btn-primary" data-loading-button>Search</button> <button type="button" class="btn btn-default" data-ng-click="clear()">Clear</button></span></div></form></div></div></header><section class="container"><table class="table table-condensed orders"><thead><tr><th>Order id</th><th>Order placed</th><th>Items</th></tr></thead><tbody><tr data-ng-repeat="order in orders | orderBy:\'created\':true"><th><span class="order-id">{{order.orderId}}</span></th><td><time datetime="{{order.created}}">{{order.created | date:\'dd-MMM-yyyy h:mm a\'}}</time></td><td><order-refund-form order="order"></td></tr></tbody></table></section>'),a.put("views/partials/discounts/discount-edit-form.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header">{{title}}</h1><div class="controls pull-right"><input type="button" class="icon icon-lg back-icon" data-ng-click="back()" data-ng-if="backUrl" value="Back">  <input type="button" class="icon icon-lg tick-icon" data-ng-click="save(true)" value="Save"></div></div></div></header><section id="discount" class="container"><alert-box data-group="Discount"></alert-box><div class="col-lg-12 col-md-12 grey-bg"><div class="col-lg-6 col-md-6"><fieldset><legend>Discount info</legend><div class="row editable-item" validate-data="discount.name" rules="[\'required\']" displayname="Discount name" groupname="Discount"><label class="col-md-4">Discount name:</label><div class="col-md-8"><a editable-text="discount.name" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="1" nexttabindex="2" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ discount.name || \'required\' }}</a></div></div><div class="row editable-item" validate-data="discount.value" rules="[\'required\']" type="numeric" displayname="Discount value" groupname="Discount"><label class="col-md-4">Discount value:</label><div class="col-md-8"><a editable-text="discount.value" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="2" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-data-percentage-input e-required>{{ (discount.value | percentage) || \'required\' }}</a></div></div></fieldset></div><div class="col-lg-6 col-md-6"><fieldset><legend>Available:</legend><fieldset class="row"><div class="col-sm-12" data-role-selector="discount.groups"></div></fieldset></fieldset></div></div></section>'),a.put("views/partials/employees/employee-edit-form.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header">{{title}}</h1><div class="controls pull-right"><input type="button" class="icon icon-lg back-icon" data-ng-click="back()" data-ng-if="backUrl" value="Back">  <input type="button" class="icon icon-lg tick-icon" data-ng-click="save(true)" value="Save"></div></div></div></header><section id="employee" class="container"><alert-box data-group="Employee"></alert-box><div class="col-lg-12 col-md-12 grey-bg"><div class="col-lg-6 col-md-6"><fieldset><legend>Staff Member info</legend><div class="row editable-item" validate-data="employee.firstname" rules="[\'required\']" displayname="First name" groupname="Employee"><label class="col-md-4">First name:</label><div class="col-md-8"><a editable-text="employee.firstname" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="1" nexttabindex="2" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ employee.firstname || \'required\' }}</a></div></div><div class="row editable-item" validate-data="employee.lastname" rules="[\'required\']" displayname="Last name" groupname="Employee"><label class="col-md-4">Last name:</label><div class="col-md-8"><a editable-text="employee.lastname" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="2" nexttabindex="3" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ employee.lastname || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">Display name:</label><div class="col-md-8"><a editable-text="employee.displayName" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="3" nexttabindex="4" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ employee.displayName || \'optional\' }}</a></div></div></fieldset><fieldset><legend>Staff Member PIN:</legend><div class="row editable-item" validate-data="credential.token" rules="[\'numeric\']" displayname="PIN" groupname="Employee"><label class="col-md-4">Pin:</label><div class="col-md-8"><a editable-text="credential.token" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="4" nexttabindex="5" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ credential.token || \'optional\' }}</a></div></div></fieldset></div><div class="col-lg-6 col-md-6"><fieldset><legend>Staff Member Status:</legend><div class="btn-group btn-group-justified btn-group-lg"><label class="active-switch btn btn-default" data-ng-class="{active: employee.enabled}"><input type="radio" name="employee-state" data-ng-model="employee.enabled" data-ng-change="showDataChangedMessage()" data-ng-value="true"> Active</label><label class="inactive-switch btn btn-default" data-ng-class="{active: !employee.enabled}"><input type="radio" name="employee-state" data-ng-model="employee.enabled" data-ng-change="showDataChangedMessage()" data-ng-value="false"> Inactive</label></div></fieldset><fieldset data-ng-show="roles"><legend>Staff Member Role:</legend><div class="btn-group btn-group-justified btn-group-lg"><label class="btn btn-default" data-ng-repeat="role in roles" data-ng-class="{active: isInGroup(employee, role.group.name)}"><input type="radio" data-ng-checked="isInGroup(employee, role.group.name)" data-ng-click="switchToGroup(role.group)"> {{role.label}}</label></div></fieldset><fieldset><legend>Staff Member Type:</legend><div class="btn-group btn-group-justified btn-group-lg"><label class="btn btn-default" data-ng-class="{active: employee.type == \'Merchant\'}"><input type="radio" name="employee-type" data-ng-model="employee.type" data-ng-click="switchMerchantType(\'Merchant\')" data-ng-value="Merchant"> Merchant</label><label class="btn btn-default" data-ng-class="{active: employee.type == \'Venue\'}"><input type="radio" name="employee-type" data-ng-model="employee.type" data-ng-click="switchMerchantType(\'Venue\')" data-ng-value="Venue"> Venue</label></div></fieldset><fieldset data-ng-if="isVenueStaffMember()"><legend>Staff Member Venue:</legend><select id="venue" name="venue" kendo-drop-down-list="venueSelect" k-data-text-field="\'name\'" k-data-value-field="\'id\'" data-ng-model="employee.venueId" k-data-source="venues" k-class="form-control"></select></fieldset></div></div></section>'),a.put("views/partials/images/s3-image-uploader.html",'<div class="image-uploader"><div class="row"><div class="col-md-12"><div class="col-md-6"><div class="row product-images"><div class="col-md-12"><h4>Current Image</h4><img data-ng-model="product.images[0]" class="img-thumbnail" data-ng-src="{{ product.images[0].url || \'data:image/gif;base64,R0lGODlhAQABAIAAAP7//wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\'}}"><div class="row" style="margin-top: 20px"><div class="col-md-12"><button class="delete icon icon-lg bin-icon" data-ng-if="product.images[0]" data-ng-click="deleteImage(product.images[0])">Delete Image</button></div></div></div></div><div class="row"><div class="col-md-12"><h4>Upload new image</h4><figure class="image-preview"><canvas class="img-thumbnail"></canvas></figure><input class="form-control input-lg margin-bottom-20" type="file" name="image" accept="image/*"><p>We recommend using landscape images for your products. The minimum image size is 236 pixels width x 136 pixels height (aspect ratio 16:9 ratio).</p><p>Once you are happy with the image displayed in the tile above, please select save.</p></div></div></div><div class="col-md-6"><div class="image-cropper"></div></div></div></div></div>'),a.put("views/partials/merchants/merchant-edit-form.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header">{{title}}</h1><div class="controls pull-right"><input type="button" class="icon icon-lg back-icon" data-ng-click="back()" data-ng-if="backUrl" value="Back">  <input type="button" class="icon icon-lg tick-icon" data-ng-click="save(true)" value="Save"></div></div></div></header><section id="merchant" class="container"><alert-box data-group="Merchant"></alert-box><div id="merchant-tabs" kendo-tab-strip="merchantTabs"><ul><li class="k-state-active">Merchant</li><li data-ng-if="venues.length">Venues</li><li data-ng-if="employees.length">Employees</li></ul><div class="merchant-info"><div class="row"><div class="col-lg-6 col-md-6"><fieldset class="row"><legend>Merchant info</legend><div class="col-md-12 editable-item" validate-data="merchant.name" rules="[\'required\']" displayname="Merchant name" groupname="Merchant"><div class="row"><label class="col-md-4">Merchant name:</label><div class="col-md-8"><a editable-text="merchant.name" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="1" nexttabindex="2" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.name || \'required\' }}</a></div></div></div></fieldset></div><div class="col-lg-6 col-md-6"><fieldset class="row"><legend>Status</legend><div class="col-md-12"><div class="btn-group btn-group-justified btn-group-lg"><label class="btn btn-default" data-ng-class="{active: merchant.enabled}"><input type="radio" name="merchant-enabled" data-ng-model="merchant.enabled" data-ng-value="true"> Active</label><label class="btn btn-default" data-ng-class="{active: !merchant.enabled}"><input type="radio" name="merchant-enabled" data-ng-model="merchant.enabled" data-ng-value="false"> Inactive</label></div></div></fieldset></div></div><div class="row"><div class="col-lg-6 col-md-6"><fieldset class="row" data-ng-if="merchant.venues[0]"><legend>Venue info</legend><div class="col-md-12"><div class="row editable-item" validate-data="merchant.venues[0].name" rules="[\'required\']" displayname="Venue name" groupname="Merchant"><label class="col-md-4">Venue name:</label><div class="col-md-8"><a editable-text="merchant.venues[0].name" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="2" nexttabindex="3" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.venues[0].name || \'required\' }}</a></div></div><div class="row editable-item" validate-data="merchant.venues[0].legalName" rules="[\'required\']" displayname="Legal name" groupname="Merchant"><label class="col-md-4">Legal name:</label><div class="col-md-8"><a editable-text="merchant.venues[0].legalName" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="3" nexttabindex="4" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.venues[0].legalName || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">VAT Number:</label><div class="col-md-8"><a editable-text="merchant.venues[0].vatNumber" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="4" nexttabindex="5" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ merchant.venues[0].vatNumber || \'optional\' }}</a></div></div></div></fieldset><fieldset class="row" data-ng-if="merchant.employees[0]"><legend>Merchant administrator</legend><div class="col-md-12"><div class="row editable-item" validate-data="merchant.employees[0].firstname" rules="[\'required\']" displayname="Employee First name" groupname="Merchant"><label class="col-md-4">First name:</label><div class="col-md-8"><a editable-text="merchant.employees[0].firstname" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="5" nexttabindex="6" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.employees[0].firstname || \'required\' }}</a></div></div><div class="row editable-item" validate-data="merchant.employees[0].lastname" rules="[\'required\']" displayname="Employee Last name" groupname="Merchant"><label class="col-md-4">Last name:</label><div class="col-md-8"><a editable-text="merchant.employees[0].lastname" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="6" nexttabindex="7" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.employees[0].lastname || \'required\' }}</a></div></div><div class="row editable-item" displayname="Employee Display name" groupname="Merchant"><label class="col-md-4">Display name:</label><div class="col-md-8"><a editable-text="merchant.employees[0].displayname" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="7" nexttabindex="8" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ merchant.employees[0].displayname || \'optional\' }}</a></div></div><div class="row editable-item" validate-data="merchant.employees[0].email" rules="[\'required\']" displayname="Employee Email" groupname="Merchant"><label class="col-md-4">Email:</label><div class="col-md-8"><a editable-email="merchant.employees[0].email" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="8" nexttabindex="9" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.employees[0].email || \'required\' }}</a></div></div><div class="row editable-item" validate-data="merchant.employees[0].credentials[0].token" rules="[\'required\']" displayname="Employee Password" groupname="Merchant"><label class="col-md-4">Password:</label><div class="col-md-8"><input ng-show="showpassword" ng-model="merchant.employees[0].credentials[0].token"> <input ng-hide="showpassword" type="password" ng-model="merchant.employees[0].credentials[0].token" tabindex="9" nexttabindex="10"> <input type="checkbox" ng-model="showpassword" ng-checked="false" style="display: inline-block"> Show password</div></div></div></fieldset></div><div class="col-lg-6 col-md-6" data-ng-if="merchant.venues[0]"><fieldset class="row"><legend>Contact info</legend><div class="col-md-12"><div class="row editable-item" validate-data="merchant.venues[0].contacts[0].value" rules="[\'required\']" displayname="Contact Name" groupname="Merchant"><label class="col-md-4">Name:</label><div class="col-md-8"><a editable-text="merchant.venues[0].contacts[0].value" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="10" nexttabindex="11" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.venues[0].contacts[0].value || \'required\' }}</a></div></div><div class="row editable-item" validate-data="merchant.venues[0].contacts[1].value" rules="[\'required\']" displayname="Contact Phone" groupname="Merchant"><label class="col-md-4">Phone:</label><div class="col-md-8"><a editable-text="merchant.venues[0].contacts[1].value" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="11" nexttabindex="12" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.venues[0].contacts[1].value || \'required\' }}</a></div></div><div class="row editable-item" validate-data="merchant.venues[0].contacts[2].value" rules="[\'required\']" displayname="Contact Email" groupname="Merchant"><label class="col-md-4">Email:</label><div class="col-md-8"><a editable-text="merchant.venues[0].contacts[2].value" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="12" nexttabindex="13" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.venues[0].contacts[2].value || \'required\' }}</a></div></div></div></fieldset><fieldset class="row" data-ng-if="merchant.venues[0]"><legend>Address</legend><div class="col-md-12"><div class="row editable-item" validate-data="merchant.venues[0].address.line1" rules="[\'required\']" displayname="Address Line 1" groupname="Merchant"><label class="col-md-4">Line 1:</label><div class="col-md-8"><a editable-text="merchant.venues[0].address.line1" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="13" nexttabindex="14" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.venues[0].address.line1 || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">Line 2:</label><div class="col-md-8"><a editable-text="merchant.venues[0].address.line2" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="14" nexttabindex="15" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ merchant.venues[0].address.line2 || \'optional\' }}</a></div></div><div class="row editable-item" validate-data="merchant.venues[0].address.city" rules="[\'required\']" displayname="City" groupname="Merchant"><label class="col-md-4">City:</label><div class="col-md-8"><a editable-text="merchant.venues[0].address.city" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="15" nexttabindex="16" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.venues[0].address.city || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">County:</label><div class="col-md-8"><a editable-text="merchant.venues[0].address.county" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="16" nexttabindex="17" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ merchant.venues[0].address.county || \'optional\' }}</a></div></div><div class="row editable-item" validate-data="merchant.venues[0].address.postCode" rules="[\'required\']" displayname="Postcode" groupname="Merchant"><label class="col-md-4">Postcode:</label><div class="col-md-8"><a editable-text="merchant.venues[0].address.postCode" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="17" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ merchant.venues[0].address.postCode || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">Country:</label><div class="col-md-8"><select id="country" name="country" kendo-drop-down-list="countrySelect" k-data-text-field="\'name\'" k-data-value-field="\'numericCode\'" data-ng-model="merchant.venues[0].address.country.numericCode" k-data-source="countries" k-class="form-control" data-ng-change="updateVenueCountry()" k-enabled="false"></select></div></div></div></fieldset></div></div></div><div class="merchant-venues" data-ng-if="venues.length"><div data-kendo-grid="merchantVenuesGrid" data-k-options="venueGridOptions"></div></div><div class="merchant-employees" data-ng-if="employees.length"><div data-kendo-grid="merchantEmployeesGrid" data-k-options="employeeGridOptions"></div></div></div></section>'),a.put("views/partials/nav.html",'<nav id="mainnav" class="navbar navbar-default navbar-fixed-top" data-ng-show="isVisible()"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a href="#" class="navbar-brand" data-ng-show="isLoggedIn()">myCircle</a> <a href="/#/login" class="navbar-brand" data-ng-show="!isLoggedIn()">myCircle</a></div><div class="collapse navbar-collapse navbar-ex1-collapse" data-ng-if="isLoggedIn()"><ul class="nav navbar-nav"><li class="smart-set-up"><a class="dropdown-toggle" data-toggle="dropdown"><span data-i18n="navigation.smartSetup"></span> <b class="caret"></b></a><ul class="dropdown-menu"><li data-requires-permission="PERM_PLATFORM_ADMINISTRATOR"><a href="#/merchants"><span data-i18n="navigation.smartSetup-merchants"></span></a></li><li data-requires-permission="PERM_MERCHANT_ADMINISTRATOR"><a href="#/venues"><span data-i18n="navigation.smartSetup-venues"></span></a></li><li><a href="#/employees"><span data-i18n="navigation.smartSetup-staff"></span></a></li><li><a href="#/products"><span data-i18n="navigation.smartSetup-products"></span></a></li><li><a href="#/discounts"><span data-i18n="navigation.smartSetup-discounts"></span></a></li></ul></li><li class="smart-reports"><a class="dropdown-toggle" data-toggle="dropdown"><span data-i18n="navigation.smartReports"></span> <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="#/reports/dcpr-history">DCPR History</a></li><li><a href="#/reports"><span data-i18n="navigation.smartReports-reports"></span></a></li><li><a href="#/reports/products"><span data-i18n="navigation.smartReports-products"></span></a></li><li data-requires-tool="com.mycircleinc.smarttools.popp"><a href="#/reports/sold-stock"><span data-i18n="navigation.smartReports-soldStock"></span></a></li><li><a href="#/reports/compare"><span data-i18n="navigation.smartReports-compare"></span></a></li><li data-requires-permission="PERM_MERCHANT_ADMINISTRATOR"><a href="#/timesheets"><span data-i18n="navigation.smartReports-timesheets"></span></a></li><li data-requires-permission="PERM_PLATFORM_ADMINISTRATOR"><a href="#/orders"><span data-i18n="navigation.smartReports-orders"></span></a></li></ul></li><li data-requires-permission="PERM_MERCHANT_ADMINISTRATOR" class="smart-social"><a href="#/social"><span data-i18n="navigation.smartSocial"></span></a></li><li class="smart-tools" data-requires-permission="PERM_MERCHANT_ADMINISTRATOR"><a href="#/tools"><span data-i18n="navigation.smartTools"></span></a></li><li class="user-guide"><a href="#/user-guide"><span data-i18n="navigation.userGuide"></span></a></li></ul><ul class="nav pull-right"><li class="login-menu"><a class="dropdown-toggle" data-toggle="dropdown"><span class="logged-in-as"></span> <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="#" class="btn-logout"><span data-i18n="navigation.logout"></span></a></li></ul></li></ul></div></div></nav>'),a.put("views/partials/nav2.html",'<nav id="mainnav" data-ng-hide="!isVisible()"><div class="container"><a id="drawer-trigger" href="#" style="display: none"><span>Show drawer</span></a><div class="pull-left"><a href="#" class="navbar-brand" data-ng-show="isLoggedIn()">myCircle</a> <a href="/#/login" class="navbar-brand" data-ng-show="!isLoggedIn()">myCircle</a></div><ul id="menu" class="pull-left" data-ng-show="isLoggedIn()"><li class="smart-setup toplevel">smartSet-up<ul class="subnav"><li data-requires-permission="PERM_PLATFORM_ADMINISTRATOR" class="animated-btn animated-swipe-right"><a href="#/merchants">Merchants</a></li><li data-requires-permission="PERM_MERCHANT_ADMINISTRATOR" class="animated-btn animated-swipe-right"><a href="#/venues">Venues</a></li><li class="animated-btn animated-swipe-right"><a href="#/employees">Staff</a></li><li class="animated-btn animated-swipe-right"><a href="#/products">Products</a></li><li class="animated-btn animated-swipe-right"><a href="#/discounts">Discounts</a></li></ul></li><li class="smart-reports toplevel">smartReports<ul class="subnav"><li class="has-nested animated-btn animated-swipe-right">Sales<ul class="nested-subnav"><li class="animated-btn animated-swipe-right"><a href="#/reports">Smart Reports</a></li><li class="animated-btn animated-swipe-right"><a href="#/reports/compare">Comparison Reports</a></li><li class="animated-btn animated-swipe-right"><a href="#/reports/sales-transaction-history">Sales Transaction History</a></li></ul></li><li class="has-nested animated-btn animated-swipe-right">Products<ul class="nested-subnav"><li class="animated-btn animated-swipe-right"><a href="#/reports/products">Product Report</a></li><li data-requires-tool="com.mycircleinc.smarttools.popp" class="animated-btn animated-swipe-right"><a href="#/reports/sold-stock">Sold Stock Report</a></li></ul></li><li class="has-nested animated-btn animated-swipe-right" data-requires-permission="PERM_MERCHANT_ADMINISTRATOR">Closing POS Report<ul class="nested-subnav"><li class="animated-btn animated-swipe-right"><a href="#/reports/cpr">Create Closing POS Report</a></li><li class="animated-btn animated-swipe-right"><a href="#/reports/cpr-history">Historical Closing POS Reports</a></li></ul></li><li data-requires-permission="PERM_MERCHANT_ADMINISTRATOR" class="animated-btn animated-swipe-right"><a href="#/timesheets">Staff Timesheets</a></li><li data-requires-permission="PERM_PLATFORM_ADMINISTRATOR" class="animated-btn animated-swipe-right"><a href="#/orders">Orders</a></li></ul></li><li class="smart-social toplevel" data-requires-permission="PERM_MERCHANT_ADMINISTRATOR"><a href="#/social">smartSocial</a></li><li class="smart-tools toplevel" data-requires-permission="PERM_MERCHANT_ADMINISTRATOR"><a href="#/tools">smartTools</a></li><li class="user-guide toplevel"><a href="#/user-guide">User Guide</a></li></ul><ul class="nav pull-right" data-ng-show="isLoggedIn()"><li class="login-menu"><a class="dropdown-toggle" data-toggle="dropdown"><span class="logged-in-as"></span> <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="#" class="btn-logout"><span data-i18n="navigation.logout"></span></a></li></ul></li></ul></div></nav>'),a.put("views/partials/orders/order-refund-form.html",'<form data-ng-submit="refund()"><ul><li data-ng-repeat="item in order.basket.items" data-ng-class="{\'text-muted\':isRefunded(item), refunded:isRefunded(item)}"><span class="title">{{item.title}} <em data-ng-if="item.modifiers">({{item.modifiers | join}})</em></span> <span class="price">{{item.total + item.adjustment | currency:"£"}}</span> <span class="original-price" data-ng-if="item.adjustment">({{item.total | currency:"£"}})</span> <input type="checkbox" data-ng-model="item.toRefund" data-ng-disabled="{{isRefunded(item) || !canRefund(item)}}" class="js-switch" data-ui-switch></li></ul><button type="button" class="btn btn-warning btn-lg pull-left" data-ng-disabled="fullyRefunded()" data-action-button data-loading-text="Refunding&hellip;" data-action="refund" data-ng-click="refundAll()">Refund all</button> <button type="submit" class="btn btn-warning btn-lg pull-right" data-ng-disabled="fullyRefunded() || !anySelected()" data-action-button data-loading-text="Refunding&hellip;" data-action="refund">Refund selected</button></form>'),a.put("views/partials/products/category-filter.html",'<div class="controls"><button type="button" class="icon icon-lg plus-icon" data-ng-click="create()">Add Category</button> <button type="button" class="icon icon-lg edit-icon" data-ng-click="edit(selected.category)" data-ng-if="hasCategories()">Edit</button> <button type="button" class="icon icon-lg bin-icon" data-ng-click="deleteCategory()" data-ng-if="hasCategories()">Delete</button></div><ul id="favorites" class="favorites nav nav-pills nav-stacked"><li data-ng-class="{active: isFavoritesSelected()}" class="favorites"><a data-ng-click="selectFavorites()">Favourites</a></li></ul><ul id="categoryList" class="category-list nav nav-pills nav-stacked"><li data-ng-repeat="category in categories | orderBy : [\'index\']" data-ng-class="{active: isSelected(category)}" data-category="{{category}}" data-index="{{category.index}}"><a data-ng-click="selectCategory(category)" style="border-color: {{category.colour}}; background-color: {{category.colour}}">{{category.title}}</a></li></ul>'),a.put("views/partials/products/categoryModal.html",'<div class="categoryModal"><div style="padding: 0 10px"><div class="row margin-bottom-20"><label>Title</label><input class="form-control" data-ng-model="category.title" required></div><div class="row margin-bottom-20" data-ng-if="sections"><label>Sections</label><select id="sectionNames" data-ng-model="sectionIds"></select></div><div class="color-picker row margin-bottom-20"><h5>Colour</h5><label class="color" data-ng-repeat="color in palette" data-ng-class="{active: category.colour == color}" data-ng-style="{\'background-color\': color}"><input type="radio" name="category-color" data-ng-model="category.colour" data-ng-value="\'{{color}}\'"></label></div><div class="row"><button id="category-edit-save" type="button" class="btn btn-success btn-lg" data-ng-click="save(category)" data-ng-disabled="locked">Save</button></div></div></div>'),a.put("views/partials/products/product-edit-form.html",'<section class="modal bs-modal-lg fade" tabindex="-1" role="dialog" data-trigger="product"><div class="modal-dialog modal-lg"><div class="modal-content"><form name="productForm" data-ng-submit="save(productForm)" novalidate><header class="modal-header"><h2>Edit product</h2></header><div class="modal-body"><div class="alert alert-danger alert-animated" data-ng-if="error"><p>{{error}}</p></div><ul class="nav nav-tabs nav-justified"><li><a data-toggle="tab" data-target="#product-tab">Product</a></li><li><a data-toggle="tab" data-target="#modifiers-tab">Modifiers</a></li><li><a data-toggle="tab" data-target="#images-tab">Images</a></li></ul><div class="tab-content"><section id="product-tab" class="tab-pane fade"><div data-label="Title" class="form-group"><input name="title" class="form-control input-lg" data-ng-model="product.title" required><div class="help-block error">Please enter a title</div></div><div class="row"><div data-label="Alt. title" class="form-group col-sm-8"><input name="alt-title" class="form-control input-lg" data-ng-model="product.altTitle"></div><div data-label="Category" class="form-group col-sm-4"><select name="category" class="form-control input-lg" data-ng-model="product.category" data-ng-options="category.id as category.title for category in categories | orderBy:\'title\'" required></select><div class="help-block error">Please select a category</div></div></div><fieldset><legend>Eat In</legend><div class="row"><div data-label="Price" class="form-group col-sm-6"><div class="input-group input-group-lg"><span class="input-group-addon">&pound;</span> <input type="number" step="0.01" min="0" name="price" class="form-control" data-ng-model="product.price" required></div></div><div data-label="VAT" class="form-group col-sm-6"><div class="input-group input-group-lg"><input type="number" min="0" max="100" name="tax" class="form-control" data-ng-model="product.tax" data-percentage-input required> <span class="input-group-addon">%</span></div></div></div></fieldset><fieldset><legend>Take Away</legend><div class="row"><div data-label="Price" class="form-group col-sm-6"><div class="input-group input-group-lg"><span class="input-group-addon">&pound;</span> <input type="number" step="0.01" min="0" name="altPrice" class="form-control" data-ng-model="product.altPrice"></div></div><div data-label="VAT" class="form-group col-sm-6"><div class="input-group input-group-lg"><input type="number" min="0" max="100" name="altTax" class="form-control" data-ng-model="product.altTax" data-percentage-input> <span class="input-group-addon">%</span></div></div></div></fieldset><div class="btn-group btn-group-justified btn-group-lg"><label class="btn btn-default" data-ng-class="{active: product.favourite}"><input type="checkbox" data-ng-model="product.favourite"> Favourite?</label></div></section><section id="modifiers-tab" class="tab-pane fade row"><nav class="col-sm-3"><ul class="nav nav-pills nav-stacked"><li data-ng-repeat="modifier in product.modifiers | orderBy:\'title\'" data-ng-class="{active: modifier == selectedModifier}"><a data-ng-click="selectModifier(modifier)">{{modifier.title || \'?\'}}</a></li><li><button type="button" id="product-edit-add-modifier" class="btn btn-primary btn-lg add-button" data-ng-click="addModifier()" title="Add modifier">Add modifier</button></li></ul></nav><div class="modifier-form col-sm-9" data-ng-show="selectedModifier"><div class="modifier form-inline"><div class="form-group"><input name="selectedModifier.title" class="form-control input-lg" placeholder="Modifier" data-ng-model="selectedModifier.title" data-ng-required="selectedModifier"></div><button type="button" id="product-edit-delete-modifier" class="btn btn-danger btn-lg delete-button" data-ng-click="deleteModifier()" title="Delete {{selectedModifier.title}}" data-ng-disabled="!selectedModifier">Delete</button></div><div class="variants panel panel-default"><header class="panel-heading"><h3>Options</h3></header><div class="panel-body"><div class="variant form-inline" data-ng-repeat="variant in selectedModifier.variants" data-ng-form data-name="variantForm"><div class="form-group variant-title"><input name="variant.title" class="form-control input-lg" placeholder="Option" data-ng-model="variant.title" required></div><div class="form-group variant-price"><div class="input-group"><span class="input-group-addon">&pound;</span> <input type="number" name="variant.priceDelta" step="0.01" class="form-control input-lg input-currency" placeholder="Price delta" data-ng-model="variant.priceDelta"></div></div><div class="btn-group btn-group-lg"><label class="btn btn-default" data-ng-class="{active: variant.isDefault}"><input type="checkbox" data-ng-model="variant.isDefault" data-ng-change="selectDefaultVariant(selectedModifier, variant)"> Default?</label></div><button type="button" class="btn btn-danger btn-lg delete-button" data-ng-click="deleteVariant(variant)" title="Delete {{variant.title}}">-</button></div></div><footer class="panel-footer"><button type="button" id="product-edit-add-variant" class="btn btn-primary btn-lg add-button" data-ng-click="addVariant()" title="Add variant" data-ng-disabled="!selectedModifier">+</button></footer></div><div class="form-group"><h5>Customer may select&hellip;</h5><div class="btn-group btn-group-justified btn-group-lg"><label class="btn btn-default" data-ng-class="{active: selectedModifier.allowNone}"><input type="checkbox" data-ng-model="selectedModifier.allowNone"> none of the options</label><label class="btn btn-default" data-ng-class="{active: selectedModifier.allowMultiples}"><input type="checkbox" data-ng-model="selectedModifier.allowMultiples"> more than one option</label></div></div></div></section><section id="images-tab" class="tab-pane fade"><div class="product-images"><h4>Images (click to upload or edit)</h4><button class="btn-link" data-ng-click="editImage = true" type="button"><img class="img-thumbnail" data-ng-src="{{product.images[0].url || \'data:image/gif;base64,R0lGODlhAQABAIAAAP7//wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\'}}"></button></div><s3-image-uploader data-image="product.images[0]" data-product="$parent.$parent.product" data-toggle="editImage"></section></div></div><footer class="modal-footer"><button id="product-edit-cancel" type="button" class="btn btn-default btn-lg" data-ng-click="cancel()" data-ng-disabled="locked">Cancel</button> <button id="product-edit-save" type="submit" class="btn btn-success btn-lg" data-loading-button="Saving&hellip;">Save</button></footer></form></div></div></section>'),a.put("views/partials/products/product-edit-form2.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header">{{title}}: <span class="subHeader">{{product.title}}</span></h1><div class="controls pull-right"><input type="button" class="icon icon-lg back-icon" data-ng-click="back()" data-ng-if="backUrl" value="Back">  <input type="button" class="icon icon-lg tick-icon" data-ng-click="save(true)" value="Save"></div></div></div></header><section id="products" class="container"><alert-box data-group="Product"></alert-box><div id="product-tabs" kendo-tab-strip="productTabs"><ul><li class="k-state-active">Product</li><li>Modifiers</li><li>Images</li></ul><div class="product-info"><div class="row"><div class="col-lg-6 col-md-6"><fieldset class="row"><legend>Product info</legend><div class="col-md-12 editable-item" validate-data="product.title" rules="[\'required\']" displayname="Product title" groupname="Product"><div class="row"><label class="col-md-4">Product title:</label><div class="col-md-8"><a editable-text="product.title" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="1" nexttabindex="2" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ product.title || \'required\' }}</a></div></div></div><div class="col-md-12 editable-item"><div class="row"><label class="col-md-4">Alt. title:</label><div class="col-md-8"><a editable-text="product.altTitle" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="2" nexttabindex="3" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ product.altTitle || \'optional\' }}</a></div></div></div><div class="col-md-12 editable-item" validate-data="product.category" rules="[\'required\']" displayname="Product category" type="numeric" groupname="Product"><div class="row"><label class="col-md-4">Category:</label><div class="col-md-8"><select id="category" name="category" kendo-drop-down-list="categorySelect" k-data-text-field="\'title\'" k-data-value-field="\'id\'" data-ng-model="product.category" data-ng-change="showDataChangedMessage()" k-data-source="categories" tabindex="3" nexttabindex="4" data-ng-tab="moveToNextTabIndex($event, this)" k-class="form-control"></select></div></div></div><div class="col-md-12" displayname="Product Sections" data-ng-if="sections"><div class="row"><label class="col-md-4">Sections:</label><div class="col-md-8"><select id="sectionSelection" kendo-multi-select k-options="sectionOptions" k-ng-model="sectionIds"></select></div></div></div></fieldset><fieldset class="row"><legend>Add to favourite category</legend><div class="col-md-12"><button data-kendo-button="favouriteBtn" class="btn-group btn-group-justified btn-group-lg k-button" data-ng-class="{\'k-primary\': product.favourite}"><label class="btn"><input type="checkbox" data-ng-model="product.favourite"> Favourite</label></button></div></fieldset></div><div class="col-lg-6 col-md-6"><fieldset class="row"><legend>Eat in</legend><div class="col-md-12 editable-item" validate-data="product.price" rules="[\'required\']" type="numeric" displayname="Product price" groupname="Product"><div class="row"><label class="col-md-4">Price:</label><div class="col-md-8">&pound; <a editable-text="product.price" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="4" nexttabindex="5" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ (product.price | number:2) || \'required\' }}</a></div></div></div><div class="col-md-12 editable-item" validate-data="product.tax" rules="[\'required\']" type="numeric" displayname="Product tax" groupname="Product"><div class="row"><label class="col-md-4">VAT:</label><div class="col-md-8"><a editable-text="product.tax" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="5" nexttabindex="6" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required e-data-percentage-input>{{ (product.tax | percentage ) || \'required\' }}</a></div></div></div></fieldset><fieldset class="row"><legend>Eat out</legend><div class="col-md-12 editable-item"><div class="row"><label class="col-md-4">Price:</label><div class="col-md-8">&pound; <a editable-text="product.altPrice" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="6" nexttabindex="7" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ (product.altPrice | number:2) || \'optional\' }}</a></div></div></div><div class="col-md-12 editable-item"><div class="row"><label class="col-md-4">Tax:</label><div class="col-md-8"><a editable-text="product.altTax" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="7" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required e-data-percentage-input>{{ (product.altTax | percentage ) || \'required\' }}</a></div></div></div></fieldset></div></div></div><div class="modifiers-tab"><div class="row"><nav class="col-sm-3"><ul class="nav nav-pills nav-stacked"><li data-ng-repeat="modifier in product.modifiers | orderBy:\'title\'" data-ng-class="{active: modifier == selectedModifier}"><a data-ng-click="selectModifier(modifier)">{{modifier.title || \'?\'}}</a></li><li><button type="button" data-kendo-button="addModifierBtn" id="product-edit-add-modifier" class="btn add-button" data-ng-click="addModifier()" title="Add modifier">Add modifier</button></li><li><button type="button" data-kendo-button="deleteModifierBtn" id="product-edit-delete-modifier" class="btn-danger delete-button" data-ng-click="deleteModifier()" title="Delete modifier">Delete modifier</button></li></ul></nav><div class="modifier-form col-sm-9" data-ng-show="selectedModifier"><fieldset class="row"><legend>Modifier info</legend><div class="col-md-12 editable-item"><div class="row"><label class="col-md-3">Modifier title:</label><div class="col-md-9"><a editable-text="selectedModifier.title" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="5" nexttabindex="6" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ selectedModifier.title || \'required\' }}</a></div></div></div></fieldset><div class="k-block variants"><div class="k-header">Options</div><div class="k-content"><div data-ng-repeat="variant in selectedModifier.variants"><div class="row variant"><div class="col-md-7"><input name="variant.title" class="form-control k-textbox" placeholder="Option" data-ng-model="variant.title" data-ng-change="showDataChangedMessage()"></div><div class="col-md-2"><input kendo-numeric-text-box class="input-currency" data-ng-model="variant.priceDelta" k-data-ng-model="variant.priceDelta" data-ng-change="showDataChangedMessage()"></div><div class="col-md-2"><label class="btn btn-default" data-ng-class="{active: variant.isDefault}"><input type="checkbox" data-ng-model="variant.isDefault" data-ng-change="selectDefaultVariant(selectedModifier, variant)"> Default?</label></div><div class="col-md-1"><button type="button" data-kendo-button="deleteVariantBtn" class="btn-danger delete-button" data-ng-click="deleteVariant(variant)" title="Delete {{variant.title}}">Delete</button></div></div></div><footer style="width: 100%"><button type="button" data-kendo-button="addVariantBtn" id="product-edit-add-variant" class="add-button k-primary" data-ng-click="addVariant()" title="Add variant" data-ng-disabled="!selectedModifier">Add variant</button></footer><div><h5>Customer may select&hellip;</h5><div class="btn-group btn-group-justified btn-group-lg"><label class="btn btn-default" data-ng-class="{active: selectedModifier.allowNone}"><input type="checkbox" data-ng-model="selectedModifier.allowNone"> none of the options</label><label class="btn btn-default" data-ng-class="{active: selectedModifier.allowMultiples}"><input type="checkbox" data-ng-model="selectedModifier.allowMultiples"> more than one option</label></div></div></div></div></div></div></div><div class="images-tab"><div class="image-uploader"><div class="row"><div class="col-md-12"><div class="col-md-6"><div class="row product-images"><div class="col-md-12"><h4>Current Image</h4><img data-ng-model="product.images[0]" class="img-thumbnail" data-ng-src="{{ product.images[0].url || \'data:image/gif;base64,R0lGODlhAQABAIAAAP7//wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\'}}"><div class="row" style="margin-top: 20px"><div class="col-md-12"><button class="delete icon icon-lg bin-icon" data-ng-if="product.images[0]" data-ng-click="deleteImage(product.images[0])">Delete Image</button></div></div></div></div><div class="row"><div class="col-md-12"><h4>Upload new image</h4><figure class="image-preview"><canvas class="img-thumbnail"></canvas></figure><input class="form-control input-lg margin-bottom-20 imageInput" type="file" name="image" accept="image/*" onchange="angular.element(this).scope().imageChanged(this)"><p>We recommend using landscape images for your products. The minimum image size is 236 pixels width x 136 pixels height (aspect ratio 16:9 ratio).</p><p>Once you are happy with the image displayed in the tile above, please select save.</p></div></div></div><div class="col-md-6"><div class="image-cropper"></div></div></div></div></div></div></div></section>'),a.put("views/partials/reports/ad-hoc-payments.html",'<h2>Paid in / paid out</h2><table class="table table-condensed table-striped report-table" data-ng-show="!report.paymentReport.payments"><thead><tr><th>Description</th><th>Sub Total</th><th>Tax Rate</th><th>Tax Total</th><th>Total</th></tr></thead><tbody><tr><td colspan="5">No payments to show</td></tr></tbody></table><div data-ng-repeat="payment in report.paymentReport.payments | orderBy:adHocPaymentsComparator" data-ng-if="report.paymentReport.payments"><table class="table table-condensed table-striped report-table"><thead><tr><th colspan="2" data-ng-if="!reportPeriods">{{payment.paymentType}} {{payment.direction}} ({{payment.type}})</th></tr></thead><tbody><tr><th>Transaction count</th><td class="number">{{payment.count | number}}</td></tr><tr><th>Total value</th><td class="currency">{{payment.total | currency:"£"}}</td></tr></tbody></table><table class="table table-condensed table-striped"><thead><tr><th>Description</th><th>Sub Total</th><th>Tax Rate</th><th>Tax Total</th><th>Total</th></tr></thead><tbody><tr data-ng-repeat="lineItem in paymentsFor(payment.paymentType, payment.direction, payment.type)"><td>{{lineItem.description}}</td><td>{{lineItem.subTotal | currency:"£"}}</td><td>{{lineItem.taxRate | percentage}}</td><td>{{lineItem.taxTotal | currency:"£"}}</td><td>{{lineItem.total | currency:"£"}}</td></tr></tbody></table></div>'),a.put("views/partials/reports/cash-transactions.html",'<h3>Cash transactions</h3><table class="table table-condensed report-table"><tbody><tr><th>Opening total</th><td class="opening-total" colspan="{{reports.length}}"><div class="input-group pull-right hidden-print"><span class="input-group-addon">&pound;</span> <input type="number" step="0.01" min="0" data-ng-model="openingTotal" placeholder="Opening balance" class="form-control input-lg" required></div><output class="visible-print">{{openingTotal | currency:"£"}}</output></td></tr><tr><th>Cash in</th><td data-ng-repeat="report in reports">{{report.cashIn() | currency:"£"}}</td></tr><tr><th>Cash out</th><td data-ng-repeat="report in reports">{{report.cashOut() | currency:"£"}}</td></tr><tr><th>Partial payments</th><td>{{partialPayments.CASH | currency:"£"}}</td></tr><tr><th>Closing total</th><td data-ng-repeat="report in reports">{{report.closingTotal() + partialPayments.CASH + openingTotal | currency:"£"}}</td></tr></tbody><tfoot><tr><th>Cash drawer expected</th><td data-ng-repeat="report in reports">{{report.closingTotal() + partialPayments.CASH + openingTotal | currency:"£"}}</td></tr></tfoot></table>'),a.put("views/partials/reports/category-report.html",'<table class="table table-condensed table-striped report-table"><thead><tr><th>Category</th><th>Sales Total</th><th class="currency">Refunds Total</th><th class="number">Payments</th><th class="number">Refunds</th></tr></thead><tbody><tr data-ng-repeat="category in report.byCategory() | orderBy:\'total\':true"><td>{{category.category}}</td><td class="currency">{{category.payment.total | currency:"£"}}</td><td class="currency">{{category.refund.total * -1 | currency:"£"}}</td><td class="number">{{category.payment.count | number}}</td><td class="number">({{category.refund.count | number}})</td></tr></tbody></table>'),a.put("views/partials/reports/payment-types-report.html",'<h2>Payment types</h2><table class="table table-condensed table-striped report-table" data-ng-repeat="type in paymentTypes"><thead><tr><th colspan="{{reports.length + 1}}" data-ng-if="!reportPeriods">{{type.paymentType}} {{type.transactionType}}</th><th data-ng-if="!!reportPeriods">{{type.paymentType}} {{type.transactionType}}</th><th data-ng-repeat="heading in reportPeriods()">{{heading}}</th></tr></thead><tbody><tr><th>Transaction count</th><td class="number" data-ng-repeat="report in reports">{{report.byPaymentType(type.paymentType, type.transactionType).count | number}}</td></tr><tr><th>Average value</th><td class="currency" data-ng-repeat="report in reports">{{report.byPaymentType(type.paymentType, type.transactionType).average | currency:"£"}}</td></tr><tr><th>Minimum value</th><td class="currency" data-ng-repeat="report in reports">{{report.byPaymentType(type.paymentType, type.transactionType).min | currency:"£"}}</td></tr><tr><th>Maximum value</th><td class="currency" data-ng-repeat="report in reports">{{report.byPaymentType(type.paymentType, type.transactionType).max | currency:"£"}}</td></tr><tr data-ng-if="type.transactionType == \'PAYMENT\'"><th>Partial payments</th><td class="currency">{{partialPayments[type.paymentType] | currency:"£"}}</td></tr><tr><th>Total value</th><td class="currency" data-ng-repeat="report in reports">{{paymentTypeTotal(report, type.paymentType, type.transactionType) | currency:"£"}}</td></tr></tbody></table>'),a.put("views/partials/reports/product-report.html",'<table class="table table-condensed table-striped report-table"><thead><tr><th rowspan="2">Product</th><th colspan="2">Total</th><th colspan="2">Sales</th></tr><tr><th>Payments</th><th>Refunds</th><th>Payments</th><th>Refunds</th></tr></thead><tbody><tr data-ng-repeat="product in report.topByProduct()"><td>{{product.title}}</td><td class="currency">{{product.payment.total | currency:"£"}}</td><td class="currency">{{product.refund.total * -1 | currency:"£"}}</td><td class="number">{{product.payment.count | number}}</td><td class="number">({{product.refund.count | number}})</td></tr></tbody></table>'),a.put("views/partials/reports/report-controls.html",'<nav class="navbar navbar-default report-subnav" role="navigation"><form class="navbar-form" name="reportForm" data-ng-submit="update()"><div class="container"><div class="row"><div class="form-group"><select k-ng-model="range" kendo-drop-down-list="rangeList" style="width:130px"><option value="today">Today</option><option value="yesterday">Yesterday</option><option value="this-week">This week</option><option value="last-week">Last week</option><option value="last-month">This month</option><option value="last-month">Last month</option><option value="this-year">This year</option><option value="custom">Custom date</option></select></div><div class="form-group"><select id="venue" name="venue" kendo-drop-down-list="venueSelect" k-data-text-field="\'name\'" k-data-value-field="\'id\'" data-ng-model="selectedVenueId" k-data-source="venues" k-class="form-control"></select></div><div class="form-group"><select id="device" name="device" kendo-drop-down-list="deviceSelect" k-data-text-field="\'label\'" k-data-value-field="\'id\'" data-ng-model="selectedDeviceId" k-data-source="devices" k-class="form-control"></select></div><div class="form-group"><label for="dateRangeFrom">Start date:</label><input id="dateRangeFrom" name="dateRangeFrom" data-ng-model="dateRange.from" k-ng-model="dateRange.from" k-interval="5" kendo-date-time-picker="dateRangeFrom"></div><div class="form-group"><label for="dateRangeTo">End date:</label><input id="dateRangeTo" name="dateRangeTo" data-ng-model="dateRange.to" k-ng-model="dateRange.to" k-interval="5" kendo-date-time-picker="dateRangeTo"></div><div class="form-group"><button ng-click="update()" kendo-button class="k-primary" data-loading-button="Updating&hellip;" data-ng-disabled="!isValid()">Update</button></div></div></div></form></nav>'),a.put("views/partials/venues/venue-edit-form.html",'<section class="modal bs-modal-lg fade" tabindex="-1" role="dialog" data-trigger="venue"><div class="modal-dialog modal-lg"><div class="modal-content"><form name="venueForm" data-ng-submit="save()" novalidate><header class="modal-header"><h2>Edit venue</h2></header><div class="modal-body"><div data-label="Name" class="form-group"><input name="name" class="form-control input-lg" data-ng-model="venue.name" required><div class="help-block error">Please enter a name</div></div><div class="row"><fieldset class="col-sm-6"><legend>Address</legend><div data-label="Address" class="form-group"><input name="streetAddress" class="form-control input-lg" data-ng-model="venue.address.line1"></div><div class="form-group"><input name="locality" class="form-control input-lg" data-ng-model="venue.address.line2"></div><div class="form-group"><input name="region" class="form-control input-lg" data-ng-model="venue.address.city"></div><div class="form-group"><input name="region" class="form-control input-lg" data-ng-model="venue.address.county"></div><div data-label="Post code" class="form-group"><input name="postalCode" class="form-control input-lg" data-ng-model="venue.address.postCode"></div></fieldset><fieldset class="col-sm-6"><legend>Contact</legend><div data-label="Telephone" class="form-group"><input type="tel" name="tel" class="form-control input-lg" data-ng-model="contact.value" required><div class="help-block error">Please enter a telephone number</div></div></fieldset><fieldset class="col-sm-6"><legend>Venue info</legend><div data-label="Legal name" class="form-group"><input name="legalName" class="form-control input-lg" data-ng-model="venue.legalName" required><div class="help-block error">Please enter a Legal name</div></div><div data-label="VAT registration no." class="form-group"><input name="vatID" class="form-control input-lg" data-ng-model="venue.vatNumber"><div class="help-block error">Please enter a VAT registration no.</div></div></fieldset></div></div><footer class="modal-footer"><button id="venue-edit-cancel" type="button" class="btn btn-default btn-lg" style="margin-left: 20px" data-ng-click="cancel()" data-ng-disabled="locked">Cancel</button> <button id="venue-edit-save" type="submit" class="btn btn-success btn-lg" data-loading-button="Saving&hellip;">Save</button></footer></form></div></div></section>'),a.put("views/partials/venues/venue-edit-form2.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header">{{title}}</h1><div class="controls pull-right"><input type="button" class="icon icon-lg back-icon" data-ng-click="back()" data-ng-if="backUrl" value="Back">  <input type="button" class="icon icon-lg tick-icon" data-ng-click="save(true)" value="Save"></div></div></div></header><section id="venues" class="container"><alert-box data-group="Venue"></alert-box><div id="venue-tabs" kendo-tab-strip="venueTabs"><ul><li class="k-state-active">Venue</li><li data-ng-if="employees.length">Staff</li><li data-ng-if="discounts.length">Discounts</li></ul><div class="venue-info"><div class="row"><div class="col-lg-6 col-md-6"><fieldset><legend>Venue info</legend><div class="row editable-item" validate-data="venue.name" rules="[\'required\']" displayname="Venue name" groupname="Venue"><label class="col-md-4">Venue name:</label><div class="col-md-8"><a editable-text="venue.name" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="1" nexttabindex="2" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ venue.name || \'required\' }}</a></div></div><div class="row editable-item" validate-data="venue.legalName" buttons="no" rules="[\'required\']" displayname="Legal name" groupname="Venue"><label class="col-md-4">Legal name:</label><div class="col-md-8"><a editable-text="venue.legalName" e-class="k-textbox" buttons="no" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="2" nexttabindex="3" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ venue.legalName || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">VAT Number:</label><div class="col-md-8"><a editable-text="venue.vatNumber" e-class="k-textbox" buttons="no" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="3" nexttabindex="4" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ venue.vatNumber || \'optional\' }}</a></div></div></fieldset><fieldset><legend>Venue Sections</legend><p>Add and setup the various sections contained within this venue i.e Bar, Kitchen etc.</p><alert-box data-group="Sections"></alert-box><span data-ng-pluralize count="venue.sections.length" when="{\'0\': \'You currently have 0 sections setup for this venue.\',\n                \'1\': \'You currently have 1 section setup for this venue.\',\n                \'other\': \'You currently have {{venue.sections.length}} sections setup for this venue.\'}" class="row"></span><div data-ng-repeat="section in venue.sections"><div class="row editable-item"><div class="col-md-12 editable-list-item" validate-data="section.name" rules="[\'required\']" displayname="Section Name" groupname="Sections"><a editable-text="section.name" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" e-required>{{ section.name || \'required\' }}</a><div class="actions pull-right"><input type="button" class="icon icon-lg bin-icon" data-ng-click="deleteSection(section)" value="Remove"></div></div></div></div><div class="add-list-item row"><div class="col-md-4" validate-data="newSection" rules="[\'required\']" displayname="Section Name" groupname="Sections"><input ng-model="newSection" class="k-textbox" data-ng-enter="addSection(newSection)" required></div><div class="col-md-8"><input type="button" value="Add Section" class="icon icon-lg plus-icon" data-ng-click="addSection(newSection)"></div></div></fieldset></div><div class="col-lg-6 col-md-6"><fieldset><legend>Contact info</legend><div class="row editable-item" validate-data="name.value" rules="[\'required\']" displayname="Name" groupname="Venue"><label class="col-md-4">Name:</label><div class="col-md-8"><a editable-text="name.value" e-class="k-textbox" blur="submit" buttons="no" e-data-ng-change="showDataChangedMessage()" tabindex="4" nexttabindex="5" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ name.value || \'required\' }}</a></div></div><div class="row editable-item" validate-data="phone.value" rules="[\'required\']" displayname="Telephone" groupname="Venue"><label class="col-md-4">Telephone:</label><div class="col-md-8"><a editable-text="phone.value" e-class="k-textbox" buttons="no" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="5" nexttabindex="6" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ phone.value || \'required\' }}</a></div></div><div class="row editable-item" validate-data="email.value" rules="[\'required\',\'email\']" displayname="Email" groupname="Venue"><label class="col-md-4">Email:</label><div class="col-md-8"><a editable-text="email.value" e-class="k-textbox" buttons="no" blur="submit" e-data-ng-change="showDataChangedMessage()" onbeforesave="validateEmail($data)" tabindex="6" nexttabindex="7" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ email.value || \'required\' }}</a></div></div></fieldset><fieldset><legend>Address</legend><div class="row editable-item" validate-data="venue.address.line1" rules="[\'required\']" displayname="Address Line 1" groupname="Venue"><label class="col-md-4">Line 1:</label><div class="col-md-8"><a editable-text="venue.address.line1" e-class="k-textbox" buttons="no" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="7" nexttabindex="8" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ venue.address.line1 || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">Line 2:</label><div class="col-md-8"><a editable-text="venue.address.line2" e-class="k-textbox" buttons="no" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="8" nexttabindex="9" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ venue.address.line2 || \'optional\' }}</a></div></div><div class="row editable-item" validate-data="venue.address.city" rules="[\'required\']" displayname="City" groupname="Venue"><label class="col-md-4">City:</label><div class="col-md-8"><a editable-text="venue.address.city" e-class="k-textbox" buttons="no" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="9" nexttabindex="10" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ venue.address.city || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">County:</label><div class="col-md-8"><a editable-text="venue.address.county" e-class="k-textbox" buttons="no" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="10" nexttabindex="11" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ venue.address.county || \'optional\' }}</a></div></div><div class="row editable-item" validate-data="venue.address.postCode" rules="[\'required\']" displayname="Postcode" groupname="Venue"><label class="col-md-4">Postcode:</label><div class="col-md-8"><a editable-text="venue.address.postCode" e-class="k-textbox" buttons="no" blur="submit" e-data-ng-change="showDataChangedMessage()" onbeforesave="validatePostcode($data)" tabindex="11" nexttabindex="12" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ venue.address.postCode || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">Country:</label><div class="col-md-8"><select id="country" name="country" kendo-drop-down-list="countrySelect" k-data-text-field="\'name\'" k-data-value-field="\'numericCode\'" data-ng-model="venue.address.country.numericCode" k-data-source="countries" k-class="form-control" data-ng-change="updateVenueCountry()" k-enabled="false"></select></div></div></fieldset></div></div></div><div class="venue-employees" data-ng-if="employees.length"><div data-kendo-grid="venueEmployeesGrid" data-k-options="employeeGridOptions"></div></div><div class="venue-discounts" data-ng-if="discounts.length"><div data-kendo-grid="venueDiscountsGrid" data-k-options="discountGridOptions"></div></div></div></section>'),a.put("views/partials/venues/venue-form-content.html",'<div class="col-lg-12 col-md-12"><div class="row"><div class="col-lg-6 col-md-6"><fieldset class="row"><legend class="col-md-12">Venue info</legend><div class="col-md-12"><div class="row editable-item" validate-data="venue.name" rules="[\'required\']" displayname="Venue name" groupname="Venue"><label class="col-md-4">Venue name:</label><div class="col-md-8"><a editable-text="venue.name" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="1" nexttabindex="2" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ venue.name || \'required\' }}</a></div></div><div class="row editable-item" validate-data="venue.legalName" rules="[\'required\']" displayname="Legal name" groupname="Venue"><label class="col-md-4">Legal name:</label><div class="col-md-8"><a editable-text="venue.legalName" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="2" nexttabindex="3" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ venue.legalName || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">VAT Number:</label><div class="col-md-8"><a editable-text="venue.vatNumber" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="3" nexttabindex="4" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ venue.vatNumber || \'optional\' }}</a></div></div></div></fieldset><fieldset class="row"><legend class="col-md=12">Venue Sections</legend><div class="col-md-12"><p>Add and setup the various sections contained within this venue i.e Bar, Kitchen etc.</p><span data-ng-pluralize count="venue.sections.length" when="{\'0\': \'You currently have 0 sections setup for this venue.\',\n                     \'1\': \'You currently have 1 section setup for this venue.\',\n                     \'other\': \'You currently have {{venue.sections.length}} sections setup for this venue.\'}" class="row"></span><div data-ng-repeat="section in venue.sections"><div class="row editable-item"><div class="col-md-12 editable-list-item" validate-data="section.name" rules="[\'required\']" displayname="Section Name" groupname="Sections"><a editable-text="section.name" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" e-required>{{ section.name || \'required\' }}</a><div class="actions pull-right"><input type="button" class="icon icon-lg bin-icon" data-ng-click="deleteSection(section)" value="Remove"></div></div></div></div><div class="add-list-item row"><div class="col-md-8" validate-data="newSection" rules="[\'required\']" displayname="Section Name" groupname="Sections"><input ng-model="newSection" class="k-textbox" data-ng-enter="addSection(newSection)" required></div><div class="col-md-4"><input type="button" value="Add New" class="icon icon-lg plus-icon pull-right" data-ng-click="addSection(newSection)"></div></div></div></fieldset></div><div class="col-lg-6 col-md-6"><fieldset class="row"><legend class="col-md-12">Contact info</legend><div class="col-md-12"><div class="row editable-item" validate-data="name.value" rules="[\'required\']" displayname="Name" groupname="Venue"><label class="col-md-4">Name:</label><div class="col-md-8"><a editable-text="name.value" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="4" nexttabindex="5" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ name.value || \'required\' }}</a></div></div><div class="row editable-item" validate-data="phone.value" rules="[\'required\']" displayname="Telephone" groupname="Venue"><label class="col-md-4">Telephone:</label><div class="col-md-8"><a editable-text="phone.value" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="5" nexttabindex="6" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ phone.value || \'required\' }}</a></div></div><div class="row editable-item" validate-data="email.value" rules="[\'email\']" displayname="Email" groupname="Venue"><label class="col-md-4">Email:</label><div class="col-md-8"><a editable-text="email.value" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="6" nexttabindex="7" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ email.value || \'optional\' }}</a></div></div></div></fieldset><fieldset class="row"><legend class="col-md-12">Address</legend><div class="col-md-12"><div class="row editable-item" validate-data="venue.address.line1" rules="[\'required\']" displayname="Address Line 1" groupname="Venue"><label class="col-md-4">Line 1:</label><div class="col-md-8"><a editable-text="venue.address.line1" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="7" nexttabindex="8" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ venue.address.line1 || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">Line 2:</label><div class="col-md-8"><a editable-text="venue.address.line2" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="8" nexttabindex="9" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ venue.address.line2 || \'optional\' }}</a></div></div><div class="row editable-item" validate-data="venue.address.city" rules="[\'required\']" displayname="City" groupname="Venue"><label class="col-md-4">City:</label><div class="col-md-8"><a editable-text="venue.address.city" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="9" nexttabindex="10" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ venue.address.city || \'required\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">County:</label><div class="col-md-8"><a editable-text="venue.address.county" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="10" nexttabindex="11" e-data-ng-tab="moveToNextTabIndex($event, $editable)">{{ venue.address.county || \'optional\' }}</a></div></div><div class="row editable-item" validate-data="venue.address.postCode" rules="[\'required\']" displayname="Postcode" groupname="Venue"><label class="col-md-4">Postcode:</label><div class="col-md-8"><a editable-text="venue.address.postCode" e-class="k-textbox" blur="submit" e-data-ng-change="showDataChangedMessage()" tabindex="11" nexttabindex="12" e-data-ng-tab="moveToNextTabIndex($event, $editable)" e-required>{{ venue.address.postCode || \'optional\' }}</a></div></div><div class="row editable-item"><label class="col-md-4">Country:</label><div class="col-md-8"><select id="country" name="country" kendo-drop-down-list="countrySelect" k-data-text-field="\'name\'" k-data-value-field="\'numericCode\'" data-ng-model="venue.address.country.numericCode" k-data-source="countries" k-class="form-control" data-ng-change="updateVenueCountry()" k-enabled="false"></select></div></div></div></fieldset></div></div></div>'),a.put("views/product-list.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header" data-ng-if="hasModuleEnabled(\'multivenue\')"><span>Products: {{credentials.venue.name}}</span></h1><h1 class="pull-left main-header" data-ng-if="!hasModuleEnabled(\'multivenue\')">Products: {{credentials.venue.name}}</h1><div class="btn-group pull-right" dropdown is-open="status.isopen" data-ng-hide="!hasMultipleVenues()" data-ng-if="hasModuleEnabled(\'multivenue\')"><button type="button" class="btn-lg dropdown-toggle" ng-disabled="disabled">Switch Venue <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li data-ng-repeat="venue in venues"><a data-ng-click="switchVenue(venue)">{{venue.name}} ({{venue.id}})</a></li></ul></div></div></div></header><alert-box></alert-box><section id="products" class="container"><div class="row"><div class="col-sm-3"><div class="category-filter col-sm-12" data-categories="categories" data-selected="selectedCategory"></div></div><div class="col-sm-9"><div class="toolbar controls" data-ng-if="hasModuleEnabled(\'multivenue\')"><button type="button" data-ng-click="create()" data-ng-show="hasCategories()" class="icon icon-lg plus-icon pull-left">Add Product</button> <button type="button" class="icon icon-lg plus-icon" data-ng-if="!hasCategories()" data-ng-click="populateCatalog()" data-requires-permission="PERM_PLATFORM_ADMINISTRATOR">Populate catalog</button></div><div class="product-grid"><ul ui-sortable="sortableOptions" ng-model="productsForCategory"><li data-ng-repeat="product in productsForCategory | orderBy : [\'index\']" class="product-tile"></li></ul><div class="modal bs-modal-lg fade delete-confirm" data-trigger="productToDelete" data-on-cancel="closeConfirm"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-body"><p>Are you sure you want to delete {{productToDelete.title}}?</p></div><div class="modal-footer"><button type="button" class="btn btn-default btn-lg" data-ng-click="closeConfirm()">No</button> <button type="button" class="btn btn-danger btn-lg" data-ng-click="confirmYes()">Yes</button></div></div></div></div></div></div></div></section><product-edit-form categories="categories"></product-edit-form>'),a.put("views/product-list2.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header" data-ng-if="hasModuleEnabled(\'multivenue\')">Products: <span class="subHeader">{{credentials.venue.name}}</span></h1><h1 class="pull-left main-header" data-ng-if="!hasModuleEnabled(\'multivenue\')">Products: <span>{{credentials.venue.name}}</span></h1><div class="btn-group pull-right" dropdown is-open="status.isopen" data-ng-hide="!hasMultipleVenues()" data-ng-if="hasModuleEnabled(\'multivenue\')"><button type="button" class="btn-lg dropdown-toggle" ng-disabled="disabled">Switch Venue <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li data-ng-repeat="venue in venues"><a data-ng-click="switchVenue(venue)">{{venue.name}} ({{venue.id}})</a></li></ul></div><div class="controls pull-right"><input type="button" class="icon icon-lg tick-icon product-save-btn" disabled data-ng-click="save()" value="{{ \'common.save\' | i18n }}"></div></div></div></header><section id="products" class="container"><div class="row"><div class="col-sm-3"><div class="category-filter"><category-filter data-categories="categories" data-selected="selectedCategory" data-sections="sections"></category-filter></div></div><div class="col-sm-9"><div class="toolbar controls" data-ng-if="hasModuleEnabled(\'multivenue\')"><button type="button" data-ng-click="create()" data-ng-show="hasCategories()" class="icon icon-lg plus-icon pull-left add-btn">Add Product</button> <button type="button" data-ng-click="toggleLockMode()" data-ng-show="hasCategories()" class="icon icon-lg pull-left toggle-active-icon lockToggle">{{lockedModeText}}</button> <button type="button" class="icon icon-lg plus-icon" data-ng-if="!hasCategories()" data-ng-click="populateCatalog()" data-requires-permission="PERM_PLATFORM_ADMINISTRATOR">Populate catalog</button></div><div class="product-grid"><ul id="productList" ng-model="productsForCategory"><li data-ng-repeat="product in productsForCategory" class="product-tile {{lockedClass}}" data-product="{{product}}"></li></ul><div class="modal bs-modal-lg fade delete-confirm" data-trigger="productToDelete" data-on-cancel="closeConfirm"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-body"><p>Are you sure you want to delete {{productToDelete.title}}?</p></div><div class="modal-footer"><button type="button" class="btn btn-default btn-lg" data-ng-click="closeConfirm()">No</button> <button type="button" class="btn btn-danger btn-lg" data-ng-click="confirmYes()">Yes</button></div></div></div></div></div></div></div></section>'),a.put("views/product-report.html",'<div class="container"><report-controls></report-controls><div class="row"><div class="col-sm-12"><h1>Full product report</h1></div></div><div class="row"><div class="col-sm-6"><table class="table table-condensed table-striped"><tbody><tr><th>Report date</th><td>{{report.created | date:\'dd-MMM-yyyy\'}}</td></tr><tr><th>Report time</th><td>{{report.created | date:\'h:mm:ss a\'}}</td></tr><tr><th>Start date</th><td>{{report.dateRange.from | date:\'dd-MMM-yyyy\'}}</td></tr><tr><th>Start time</th><td>{{report.dateRange.from | date:\'h:mm:ss a\'}}</td></tr><tr><th>Closing date</th><td>{{report.dateRange.to | date:\'dd-MMM-yyyy\'}}</td></tr><tr><th>Closing time</th><td>{{report.dateRange.to | date:\'h:mm:ss a\'}}</td></tr></tbody></table></div><div class="col-sm-6"><table class="table table-condensed table-striped"><tbody><tr><th>Item sales</th><td class="currency">{{report.totalSales() | currency:"£"}}</td></tr><tr><th>Item refunds</th><td class="currency">{{report.totalRefunds() * -1 | currency:"£"}}</td></tr><tr><th>Refund count</th><td class="number">({{report.refundCount() | number}})</td></tr><tr><th>VAT</th><td class="currency">{{report.totalTax() | currency:"£"}}</td></tr><tr><th>Total</th><td class="currency">{{report.totalGross() | currency:"£"}}</td></tr></tbody></table></div></div><div class="row"><div class="col-sm-12"><table class="table table-condensed table-vertical-striped"><colgroup><col class="col-sm-2"><col class="col-sm-2"><col class="col-sm-2"><col class="col-sm-2"><col class="col-sm-2"><col class="col-sm-2"></colgroup><thead><tr class="csv-export" data-ng-if="!iOSDevice"><td colspan="6"><csv-export-button class="btn btn-primary btn-lg" data-filename="csvFilename()">Export as CSV</csv-export-button></td></tr><tr><th data-sortable="title">Product</th><th class="number" data-sortable="payment.count">Total items sold</th><th class="number" data-sortable="refund.count">Total items refunded</th><th class="currency" data-sortable="payment.total">Total sales</th><th class="currency" data-sortable="refund.total">Total refunds</th><th class="currency" data-sortable="net">Total revenue</th></tr></thead><tbody><tr data-ng-repeat="product in report.byProduct() | orderBy:sort:reverse"><td>{{product.title}}</td><td class="number">{{product.payment.count | number}}</td><td class="number">({{product.refund.count | number}})</td><td class="currency">{{product.payment.total | currency:"£"}}</td><td class="currency">{{product.refund.total * -1 | currency:"£"}}</td><td class="currency">{{product.net | currency:"£"}}</td></tr></tbody></table></div></div></div>'),a.put("views/reset-token.html",'<section id="reset-token" class="container"><header class="row"><h1 class="pull-left main-header">Reset Password:</h1></header><alert-box></alert-box><form class="form-horizontal" class="col-md-12"><div class="form-group"><label for="new_password" class="control-label col-md-2">New Password</label><div class="col-md-4" validate-data="new_password" rules="[\'required\']" displayname="New Password" groupname="ResetToken"><input type="password" class="form-control" id="new_password" name="new_password" placeholder="New Password" data-ng-model="new_password"></div></div><div class="form-group"><label for="confirm_password" class="control-label col-md-2">Confirm Password</label><div class="col-md-4" validate-data="confirm_password" rules="[\'required\',\'match\']" match-data="new_password" displayname="Confirm Password" groupname="ResetToken"><input type="password" class="form-control" id="confirm_password" name="confirm_password" placeholder="Confirm Password" data-ng-model="confirm_password"></div></div><div class="form-group"><div class="col-md-6"><button type="submit" class="btn btn-primary pull-right" data-ng-click="resetToken()">Reset Password</button></div></div></form></section>'),a.put("views/sales-transaction-history.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header">{{title}}</h1></div></div></header><section class="container"><div class="date-range-filter k-block k-shadow" style="margin-bottom: 20px; padding-bottom: 10px"><div class="k-header k-inset">Report filter</div><div class="row"><div class="col-md-2"><select id="POSList" style="margin-left: 5px"></select></div><div class="col-md-10 pull-left"><div class="dateFilter"><label>From Date:</label><input id="dateRangeFrom"></div><div class="dateFilter"><label>To Date:</label><input id="dateRangeTo"></div><button class="k-button" data-ng-click="resetDateRange()">Clear</button></div></div></div><div class="order-history-list"></div><script type="text/x-kendo-template" id="detail-template"><div class="tabstrip">\n            <ul>\n                <li class="k-state-active">\n                    Items\n                </li>\n                <li>\n                    Transactions\n                </li>\n            </ul>\n            <div>\n                <div class="order-items row">\n                    <div class="col-md-9">\n                        <table>\n                            <tbody>\n                                <tr>\n                                    <th>Title</th>\n                                    <th width="100">Total</th>\n                                    <th>Status</th>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                    <div class="col-md-3">\n                        <div class="paid-count">Total paid: <span></span></div>\n                        <div class="refunded-count">Total refunded: <span></span></div>\n                        <div class="order-total">Final total: <span></span></div>\n                    </div>\n                </div>\n            </div>\n            <div>\n                <div class=\'order-transactions\'></div>\n            </div>\n        </div></script></section>'),a.put("views/smart-report.html",'<div class="container"><report-controls></report-controls><div class="row reports"><div class="report col-sm-5"><section id="smart-report" class="report smart-report" data-reports="reports"><h2>smartReport</h2><table class="table table-condensed report-table"><thead><tr><th>Report date</th><td data-ng-repeat="report in reports">{{report.created | date:\'dd-MMM-yyyy\'}}</td></tr><tr><th>Report time</th><td data-ng-repeat="report in reports">{{report.created | date:\'h:mm:ss a\'}}</td></tr></thead><thead><tr><th>Start date</th><td data-ng-repeat="report in reports">{{report.dateRange.from | date:\'dd-MMM-yyyy\'}}</td></tr><tr><th>Start time</th><td data-ng-repeat="report in reports">{{report.dateRange.from | date:\'h:mm:ss a\'}}</td></tr><tr><th>Closing date</th><td data-ng-repeat="report in reports">{{report.dateRange.to | date:\'dd-MMM-yyyy\'}}</td></tr><tr><th>Closing time</th><td data-ng-repeat="report in reports">{{report.dateRange.to | date:\'h:mm:ss a\'}}</td></tr></thead><tbody><tr><th>Item sales</th><td data-ng-repeat="report in reports">{{report.totalSales() | currency:"£"}}</td></tr><tr><th>Item refunds</th><td data-ng-repeat="report in reports">{{report.totalRefunds() * -1 | currency:"£"}}</td></tr><tr><th>Refund count</th><td data-ng-repeat="report in reports">({{report.refundCount() | number}})</td></tr><tr><th>VAT</th><td data-ng-repeat="report in reports">{{report.totalTax() | currency:"£"}}</td></tr><tr><th>Total</th><td data-ng-repeat="report in reports">{{report.totalGross() | currency:"£"}}</td></tr></tbody></table></section><section id="cash-transactions" class="report cash-transactions" data-reports="reports"></section><section id="cash-reconciliation" class="report cash-reconciliation"></section><section id="vat-breakdown" class="report vat-breakdown" data-report="reports[0]"></section><section id="payment-types" class="report payment-types-report" data-reports="reports"></section><section id="adhoc-payments" class="report ad-hoc-payments-report" data-report="reports[0]" data-payment-line-items="paymentLineItems"></section></div><div class="col-sm-7"><section id="by-category" class="report category-report" data-report="reports[0]"><h2>Categories</h2><category-report report="reports[0]"></category-report><bar-chart data-source="byCategory()" data-labels="category" data-values="net" data-currency="&#163;" data-id="chart1" data-direction="horizontal"><h3>Net sales by category</h3></bar-chart><bar-chart data-source="byCategory()" data-labels="category" data-values="payment.count" data-id="chart2" data-direction="horizontal"><h3>Items sold by category</h3></bar-chart></section><section id="by-product" class="report product-report" data-report="reports[0]"><h2>Products (top 10)</h2><product-report report="reports[0]"></product-report><bar-chart data-source="topByProduct()" data-labels="title" data-values="net" data-currency="&#163;" data-id="chart3" data-direction="horizontal"><h3>Net sales by product</h3></bar-chart><bar-chart data-source="topByProduct()" data-labels="title" data-values="payment.count" data-id="chart4" data-direction="horizontal"><h3>Items sold by product</h3></bar-chart></section></div></div></div>'),a.put("views/social.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header" data-ng-if="hasModuleEnabled(\'multivenue\')">smartSocial: <span class="subHeader">{{ venue.name }}</span></h1><h1 class="pull-left main-header" data-ng-hide="hasModuleEnabled(\'multivenue\')">smartSocial</h1><div class="btn-group pull-right" dropdown is-open="status.isopen" data-ng-hide="!hasMultipleVenues()" data-ng-if="hasModuleEnabled(\'multivenue\')"><button type="button" class="btn-lg dropdown-toggle" ng-disabled="disabled">Switch Venue <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li data-ng-repeat="venue in venues"><a data-ng-click="switchVenue(venue)">{{venue.name}} ({{venue.id}})</a></li></ul></div><div class="controls pull-right"></div></div></div></header><section id="social" class="container"><section id="twitter" class="twitter" style="float: left; width: 100%; margin-bottom: 150px; margin-top: 100px; border-bottom: 1px solid #DDDDDD;\npadding-bottom: 4em"><div class="col-md-12"><div class="row"><alert-box data-group="Twitter"></alert-box><div class="col-md-4"><h2><div class="tool-img"></div>Twitter</h2></div><div class="col-md-8"><div class="alert alert-info"><p>Please use <em>System Preferences</em> to connect your iPad with your Twitter account.</p></div><fieldset><legend>Available to:</legend><div data-role-selector="toolFor(\'twitter\').groups"></div></fieldset><fieldset style="margin-top: 30px"><button class="btn btn-success btn-lg pull-right" type="submit" data-ng-click="save(toolFor(\'twitter\'))">Save</button></fieldset></div></div></div></section><section id="facebook" class="facebook" data-ng-controller="FacebookCtrl" style="float: left; width: 100%; margin-bottom: 150px; border-bottom: 1px solid #DDDDDD;\npadding-bottom: 4em"><div class="col-md-12"><div class="row"><alert-box data-group="Facebook"></alert-box><div class="col-md-4"><h2><div class="tool-img"></div>Facebook</h2></div><div class="col-md-8"><div class="row"><div class="col-md-8"><div class="alert alert-info" data-ng-if="!isConnected(\'facebook\')"><p>Please click connect, to connect to your Facebook page</p></div><div class="alert alert-info" data-ng-if="isConnected(\'facebook\')"><p>Please click disconnect, to disconnect your Facebook account</p></div></div><div class="col-md-4"><button class="btn btn-lg btn-warning pull-right" data-ng-click="connect(\'facebook\')" data-ng-if="!isConnected(\'facebook\')">Connect</button> <button class="btn btn-lg btn-danger pull-right" data-ng-click="disconnect(\'facebook\')" data-ng-if="isConnected(\'facebook\')">Disconnect</button><facebook-user data-tool="toolFor(\'facebook\')" class="pull-right"></facebook-user></div></div><fieldset><legend>Facebook pages:</legend><select class="form-control input-lg" data-ng-model="page" data-ng-options="page.name for page in pages track by page.id"></select></fieldset><fieldset class="row"><div class="col-md-12"><legend>Available to:</legend><div data-role-selector="toolFor(\'facebook\').groups"></div></div></fieldset><fieldset style="margin-top: 30px"><button class="btn btn-success btn-lg pull-right" type="submit" data-ng-click="save(toolFor(\'facebook\'))">Save</button></fieldset></div></div></div></section><section id="foursquare" class="foursquare" data-ng-controller="FoursquareCtrl" style="float: left; width: 100%; margin-bottom: 150px"><div class="col-md-12"><div class="row"><alert-box data-group="Foursquare"></alert-box><div class="col-md-4"><h2><div class="tool-img"></div>Foursquare</h2></div><div class="col-md-8"><div class="row"><div class="col-md-8"><div class="alert alert-info" data-ng-if="!isConnected(\'foursquare\')"><p>Please click connect, to connect to your Foursquare page</p></div><div class="alert alert-info" data-ng-if="isConnected(\'foursquare\')"><p>Please click disconnect, to disconnect your Foursquare account</p></div></div><div class="col-md-4"><button class="btn btn-lg btn-warning pull-right" data-ng-click="connect(\'foursquare\')" data-ng-if="!isConnected(\'foursquare\')">Connect</button> <button class="btn btn-lg btn-danger pull-right" data-ng-click="disconnect(\'foursquare\')" data-ng-if="isConnected(\'foursquare\')">Disconnect</button><foursquare-user data-tool="toolFor(\'foursquare\')" class="pull-right"></foursquare-user></div></div><fieldset class="row"><div class="col-md-12"><legend>Venue ID:</legend><div class="row"><div class="col-md-9"><input class="form-control input-lg" data-ng-model="tool.properties.venueId" data-ng-disabled="!isConnected(\'foursquare\')"></div><div class="col-md-3"><button class="btn btn-danger btn-lg pull-right" type="button" data-ng-click="deleteVenue()" data-ng-disabled="!tool.properties.venueId">Delete</button></div></div></div></fieldset><fieldset><legend>Available to:</legend><div data-role-selector="toolFor(\'foursquare\').groups"></div></fieldset><fieldset style="margin-top: 30px"><button class="btn btn-success btn-lg pull-right" type="submit" data-ng-click="save(toolFor(\'foursquare\'))">Save</button></fieldset></div></div></div></section></section>'),a.put("views/sold-stock-report.html",'<div class="container"><report-controls data-hide-pos="true"></report-controls><div class="row"><div class="col-sm-12"><h1>Sold stock report</h1></div></div><table class="table table-condensed table-striped"><colgroup><col class="col-sm-4"><col class="col-sm-2"><col class="col-sm-2"><col class="col-sm-2"><col class="col-sm-2"></colgroup><thead><tr><th data-sortable="title">Product</th><th class="numeric" data-sortable="merchantOrders">POS sales</th><th class="numeric" data-sortable="consumerOrders">POPP collected</th><th class="numeric" data-sortable="readyForCollection">POPP pending</th><th class="numeric" data-sortable="total">Total</th></tr></thead><tbody><tr data-ng-repeat="product in report.soldStockReport.soldStockSummaries | orderBy:sort:reverse"><td>{{product.title}}</td><td class="numeric">{{product.merchantOrders}}</td><td class="numeric">{{product.consumerOrders}}</td><td class="numeric">{{product.readyForCollection}}</td><td class="numeric">{{product.total}}</td></tr></tbody></table></div>'),a.put("views/timesheets.html",'<section id="timesheets" class="container"><header><div class="container"><h1 class="pull-left main-header" data-ng-if="hasModuleEnabled(\'multivenue\')">Staff timesheets: <span class="subHeader">{{venue.name}}</span></h1><div class="btn-group pull-right" dropdown is-open="status.isopen" data-ng-hide="!hasMultipleVenues()" data-ng-if="hasModuleEnabled(\'multivenue\')"><button type="button" class="btn-lg dropdown-toggle" ng-disabled="disabled">Switch Venue <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li data-ng-repeat="venue in venues"><a data-ng-click="switchVenue(venue)">{{venue.name}} ({{venue.id}})</a></li></ul></div></div></header><form data-ng-submit="update()"><div class="row"><div class="form-group col-sm-6"><input type="date" class="form-control input-lg" data-ng-model="startDate" data-date></div><div class="form-group col-sm-6"><input type="date" class="form-control input-lg" data-ng-model="endDate" data-date></div></div><button type="submit" class="btn btn-lg btn-primary pull-right" data-loading-button="Updating&hellip;">Update</button></form><table class="table table-striped timesheets"><thead><tr><th>Name</th><th class="numeric">Shifts</th><th class="numeric">Total Hours</th><td></td></tr></thead><tbody data-ng-repeat="date in dateRange"><tr class="table-section-header" data-ng-if="timesheets[date].length > 0"><th colspan="4"><time datetime="{{date | moment:\'YYYY-MM-DD\'}}">{{date | moment:\'Do MMM YYYY\'}}</time></th></tr><tr data-ng-repeat="timesheet in timesheets[date] | orderBy:\'employeeName\'"><td>{{timesheet.employeeName}}</td><td class="numeric">{{timesheet.shifts}}</td><td class="numeric">{{timesheet.totalDuration | duration:\'hours\'}}</td><td class="controls"><button type="button" class="btn btn-default btn-lg" data-ng-click="edit(timesheet)">Edit</button></td></tr></tbody><tbody data-ng-if="!hasTimesheetData()"><tr class="warning"><td colspan="4">No timesheet data found for the specified date range.</td></tr></tbody></table></section><section class="modal bs-modal-lg fade" tabindex="-1" role="dialog" data-trigger="selectedTimesheet" data-on-close="cancel"><div class="modal-dialog modal-lg"><div class="modal-content"><form name="timesheetForm" role="form" data-ng-submit="save()"><header class="modal-header"><h2>Edit timesheet</h2></header><div class="modal-body"><div class="row" data-ng-repeat="shift in selectedShifts | orderBy:\'started\'" data-ng-form="shiftForm"><div class="col-sm-6 form-group"><input type="datetime-local" class="form-control input-lg" data-ng-model="shift.started" data-datetime-local></div><div class="col-sm-6 form-group"><input type="datetime-local" name="ended" class="form-control input-lg" data-ng-model="shift.ended" data-datetime-local data-after="shift.started"> <span class="help-block" data-ng-if="shiftForm.ended.$invalid">End time must be after start time</span></div></div></div><footer class="modal-footer"><button id="timesheet-edit-cancel" type="button" class="btn btn-default btn-lg" data-ng-click="cancel()" data-ng-disabled="locked">Cancel</button> <button id="timesheet-edit-save" type="submit" class="btn btn-success btn-lg" data-ng-disabled="timesheetForm.$invalid" data-loading-button="Saving&hellip;">Save</button></footer></form></div></div></section>'),a.put("views/tools.html",'<header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header" data-ng-if="hasModuleEnabled(\'multivenue\')">smartTools: <span class="subHeader">{{ venue.name }}</span></h1><h1 class="pull-left main-header" data-ng-hide="hasModuleEnabled(\'multivenue\')">smartTools</h1><div class="controls pull-right"><input type="button" class="icon icon-lg back-icon" data-ng-click="back()" data-ng-if="backUrl" value="Back"></div><div class="btn-group pull-right" dropdown is-open="status.isopen" data-ng-hide="!hasMultipleVenues()" data-ng-if="hasModuleEnabled(\'multivenue\')"><button type="button" class="btn-lg dropdown-toggle" ng-disabled="disabled">Switch Venue <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li data-ng-repeat="venue in venues"><a data-ng-click="switchVenue(venue)">{{venue.name}} ({{venue.id}})</a></li></ul></div></div></div></header><section id="tools" class="container"><div class="row" data-ng-repeat="tool in tools" style="float: left; width: 100%; margin-top: 50px; margin-bottom: 100px"><div class="col-md-12 {{tool.appId | afterLast:\'.\'}}"><div class="row"><div class="col-md-4"><h2><div class="tool-img"></div>{{tool.name}}</h2></div><div class="col-md-8"><fieldset><legend>Available to:</legend><div data-role-selector="tool.groups"></div></fieldset><button class="btn btn-success btn-lg pull-right" type="submit" data-ng-click="save(tool)">Save</button></div></div></div></div></section>'),a.put("views/ui-tests.html",'<h4>Popup</h4><div class="row"><div class="col-md-6"><p class="input-group"><input class="form-control" datepicker-popup="{{format}}" ng-model="dt" is-open="opened" min-date="minDate" max-date="\'2015-06-22\'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div>'),a.put("views/user-guide.html","<script>function scroll(element){\n        var ele = document.getElementById(element);\n        window.scrollTo(ele.offsetLeft,ele.offsetTop);\n    }</script><script>$(document).ready(function() {\n    // navigation click actions\n    $('.scroll-link').on('click', function(event){\n      event.preventDefault();\n      var sectionID = $(this).attr(\"data-id\");\n      scrollToID('#' + sectionID, 750);\n    });\n    // scroll to top action\n    $('.scroll-top').on('click', function(event) {\n      event.preventDefault();\n      $('html, body').animate({scrollTop:0}, 'slow');\n    });\n    // mobile nav toggle\n    $('#nav-toggle').on('click', function (event) {\n      event.preventDefault();\n      $('#main-nav').toggleClass(\"open\");\n    });\n  });\n\n  // scroll function\n  function scrollToID(id, speed){\n    var offSet = 50;\n    var targetOffset = $(id).offset().top - offSet;\n    var mainNav = $('#main-nav');\n    $('html,body').animate({scrollTop:targetOffset}, speed);\n    if (mainNav.hasClass(\"open\")) {\n"+'      mainNav.css("height", "1px").removeClass("in").addClass("collapse");\n      mainNav.removeClass("open");\n    }\n  }\n\n  if (typeof console === "undefined") {\n    console = {\n      log: function() { }\n    };\n  }</script><div class="container-fluid faq"><span id="target5"></span><section style="margin-top: 3em"><div class="container" style="margin-bottom: 1em"><div class="row"><div class="col-md-12" class="col-padding"><h1 style="font-weight: 100">smartDashboard User Guide</h1><p><span>&nbsp;</span></p><p style="font-size: 16px; text-align: justify">Welcome to myCircle’s smartDashboard, your cloud-based management centre available on your computer or with the tap of an icon button on your iPad.</p><p style="font-size: 16px; text-align: justify; margin-bottom: 2em">Manage your employees, catalogue, pricing and discounts. View reports and connect social tools to your smartPOS. Establish user rights for your suite of smartTools. It’s all here, personalised for your business.</p></div></div></div><div class="container" style="margin-bottom: 14em" id="main-nav"><div class="row"><div class="col-md-3"><img src="images/faq/smartSetup.svg" width="160" height="160" style="margin: 10px auto; display: block"> <a href="#" class="btn btn-default target-btn scroll-link" data-id="target1" style="line-height: 2.8em; outline: none; margin: 0 auto; display: block">smartSet-up</a></div><div class="col-md-3"><img src="images/faq/smartReports.svg" width="160" height="160" style="margin: 10px auto; display: block"> <a href="#" class="btn btn-default target-btn scroll-link" data-id="target2" style="line-height: 2.8em; outline: none; margin: 0 auto; display: block">smartReports</a></div><div class="col-md-3" style="display: block"><img src="images/faq/smartSocial.svg" width="160" height="160" style="margin: 10px auto;  display: block"> <a href="#" class="btn btn-default target-btn scroll-link" data-id="target3" style="line-height: 2.8em; outline: none; margin: 0 auto; display: block">smartSocial</a></div><div class="col-md-3" style="display: block"><img src="images/faq/smartTools.svg" width="160" height="160" style="margin: 10px auto 13px;  display: block"> <a href="#" class="btn btn-default target-btn scroll-link" data-id="target4" style="line-height: 2.8em; outline: none; margin: 0 auto; display: block">smartTools</a></div></div><a href="#" class="scroll-link" data-id="target5" style="display: block; position: fixed; right: 0; bottom: 0; margin: 0 10px 60px 0; outline: none; z-index: 1; line-height: 1.8em; width: 5em; height: 3em"><img height="50" width="50" src="images/faq/scroll-to-top.png"></a></div><div id="target1" class="container" style="padding-top: 4em"><div class="row"><div class="col-md-2" class="col-padding"><img src="images/faq/smartSetup.svg" width="160" height="160"></div><div class="col-md-10" class="col-padding"><h2 style="margin-bottom: 1em">smartSet-up</h2><p class="section-intro">You’re in full control with myCircle’s friendly and intuitive smartSet-up. It’s never been easier to manage your venue, employees, products and pricing.</p><div class="accordion" id="accordion"><h4 style="margin-top: 3em; color: #2EAAD5; margin-bottom: 1em"><span class="section-heading">Venue:</span> Set up details for your Venue(s).</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-1" style="outline: none"><p style="float: left; margin-bottom: 0">How do I add a Venue?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-1" class="collapse in panel-edits"><div class="panel-body"><p class="list-gap">The specifics of your principal Venue are pre-populated but may be edited as necessary. You can add additional Venues either by clicking \'Add New\' to add a new Venue or by duplicating an existing Venue using the \'Duplicate\' button.</p><p>To edit your Venues(s) details:</p><img src="images/faq/83.png" class="screen-shots list-gap"><ol><li class="list-gap">Select ‘Venue’ from the smartSet-up drop down box.</li><li class="list-gap">Edit venue details, such as name, address, VAT number, manager name and contact information.</li><li class="list-gap">Save changes.</li></ol><p class="list-gap">The new venue is created, you can proceed to add products in the standard way.</p><p class="list-gap">To delete a venue, please select the venue and click the Delete button.</p><img src="images/faq/94.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-86" style="outline: none"><p style="float: left; margin-bottom: 0">How do I add a Venue Section?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-86" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">You may have multiple sections at your venue. Your different venue sections are likely to have different responsibilities, such as bill/receipt printing, order printing - some venue sections may need to know only about certain items for order preparation. It\'s very easy to create Venue Sections, here\'s how:</p><ol><li class="list-gap">Go to the merchant dashboard at <a href="http://merchant-live.mycircleinc.com">http://merchant-live.mycircleinc.com</a> and login.</li><li class="list-gap">Go to smartSet-up > Venues > Edit Venue</li><li class="list-gap">Under Venue Sections, simply enter the name of a Venue Section e.g. Kitchen and click \'Add New\'.</li><li class="list-gap">Save changes.</li></ol><p class="list-gap">A delete function is also available.</p><img src="images/faq/112.png" class="screen-shots list-gap"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-87" style="outline: none"><p style="float: left; margin-bottom: 0">How to associate Products and Categories with a Venue Section?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-87" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">To send specific items ordered to different printers for preparation you can create Venue Sections, assign those Venues Sections to Categories and Products and then associate a printer with a Venue Section.</p><ol><li class="list-gap">In the Merchant Dashboard you must first add venue sections (as seen in the above FAQ)</li><li class="list-gap">Next, go to smartSet-up > Products. You can assign all products in a category to be associated with a venue section by editing the Category selected and choosing the venue section for list of Venue Sections available in the Edit Category screen.</li><img src="images/faq/96.png" class="screen-shots list-gap"><li class="list-gap">If you wish to overwrite the Venue Section for a specific product in a Category, simply assign that Product to it\'s own Venue Section (future changes to the Category venue sections will not overwrite the Product\'s own specific configuration).</li><img src="images/faq/97.png" class="screen-shots list-gap"><li class="list-gap">Finally, associate Printers with a specific Venue Section in the smartPOS. PLEASE NOTE: Configuring Printers to specific Venue Sections is due for future release. In preparation for this, we recommend you start to associate your Product Catalogue with Venue Sections now.</li><li class="list-gap">Products within Categories not associated with a Venue Section will not be included in printed Orders.</li></ol><p class="list-gap">Note: If a Venue Section\'s printer should ignore the Category/Product association and print all Order Items, the smartPOS should be configured to activate \'Default Order Printer\'.</p></div></div></div><h4 style="margin-top: 3em; color: #2EAAD5; margin-bottom: 1em"><span class="section-heading">Employee:</span> Set up employee details, PIN codes and roles.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-2" style="outline: none"><p style="float: left; margin-bottom: 0">What are employee roles?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-2" class="collapse panel-edits"><div class="panel-body"><p>With employee roles, you precisely assign access and permissions for specific features of the smartPOS.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-3" style="outline: none"><p style="float: left; margin-bottom: 0">How do I set up myself/employee and define roles?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-3" class="collapse panel-edits"><div class="panel-body"><p>To set-up employees:</p><ol><li class="list-gap">Select ‘Staff’ from the smartSet-up drop down window.</li><li class="list-gap">Select ‘Add New’.</li><img src="images/faq/108.png" class="screen-shots" style="margin-bottom: 40px"><li class="list-gap">Enter employee\'s information.</li><li class="list-gap">Assign a role: Assign access for each smartTool and Discounts by designating a role for each employee. Select either Staff (the system default gives staff access to smartPOS, smartOrders and Foursquare) or Manager (the system default gives managers access to smartPOS, smartOrders, Foursquare and all other functions). These default settings may be changed in smartTools.</li><li class="list-gap">Select employee’s status: Select either Active (staff who may use the smartPOS) or Inactive (staff who may not currently use the smartPOS, such as those on extended leave).</li><li class="list-gap">You then have the option of assigning a unique 4 digit PIN code for each employee. This is not mandatory as staff member accounts may be set up without a PIN if you so wish. Employees can use their 4 digit PIN code each time they log into the smartPOS.</li><li>Save your entries.</li><img src="images/faq/109.png" class="screen-shots" style="margin-bottom: 40px"></ol></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-4" style="outline: none"><p style="float: left; margin-bottom: 0">How do I make changes to employee settings after set-up?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-4" class="collapse panel-edits"><div class="panel-body"><p>To make changes to an established employee’s name, information, role, status or PIN:</p><ol><li class="list-gap">Select ‘Staff’ from the smartSet-up drop down window.</li><li class="list-gap">Click on the edit button beside the employee’s name that you wish to make changes to.</li><li class="list-gap">Make changes.</li><li>Save your changes.</li></ol><img src="images/faq/109.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #2EAAD5; margin-bottom: 1em"><span class="section-heading">Product:</span> Set up products, categories, favourites, and modifiers.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-5" style="outline: none"><p style="float: left; margin-bottom: 0">What is a product catalogue?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-5" class="collapse panel-edits"><div class="panel-body"><p>Your product catalogue is your menu and consists of all the products you sell. It includes both categories (broad groups of products) and products (individual items). The myCircle reports are run at a product level.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-6" style="outline: none"><p style="float: left; margin-bottom: 0">What are categories?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-6" class="collapse panel-edits"><div class="panel-body"><p>Categories are broad groups of products, such as hot drinks, cold drinks, starters, mains, desserts etc. Catalogue set-up begins with categories.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-7" style="outline: none"><p style="float: left; margin-bottom: 0">How do I create categories?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-7" class="collapse panel-edits"><div class="panel-body"><p>To set up categories:</p><ol><li class="list-gap">Select ‘Products’ from the smartSet-up drop down window.</li><li class="list-gap">Select ‘Add Category’.</li><li class="list-gap">Enter broad categories such as hot drinks, cold drinks, starters, mains, desserts etc.</li><li class="list-gap">Associate the Category with a Venue Section</li><li class="list-gap">Designate a color for each category.</li><li class="list-gap">Save your category entries.</li><li class="list-gap">Categories can be edited or deleted by selecting the “Edit” or “Delete” buttons.</li><li>Categories can only be deleted once all products have been removed from the selected category.</li></ol><img src="images/faq/98.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-8" style="outline: none"><p style="float: left; margin-bottom: 0">How are products defined?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-8" class="collapse panel-edits"><div class="panel-body"><p>Products are the individual items you sell, such as latte or cappuccino.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-9" style="outline: none"><p style="float: left; margin-bottom: 0">How do I add a product?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-9" class="collapse panel-edits"><div class="panel-body"><p>To set up a product:</p><ol><li class="list-gap">Select ‘Products’ from the smartSet-up drop down window.</li><li class="list-gap">Select ‘Add Product’.</li><li class="list-gap">Enter a product name, such as Latte or Irish coffee.</li><li class="list-gap">Select a category from the drop down menu. Both Latte and Irish coffee would belong to the Coffee category.</li><li class="list-gap">Designate Eat-in and/or Take-away pricing. The default is Eat-in.</li><li class="list-gap">Select a Venue Section for a product, if you wish to overwrite the Category Venue Section.</li><li class="list-gap">Save your entry.</li><li class="list-gap">Continue to use the ‘Add Product’ function to build your Product Catalogue.</li><li>Products can be edited or deleted by selecting the product and tapping the “Edit” or “Delete” buttons.</li></ol><img src="images/faq/99.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-10" style="outline: none"><p style="float: left; margin-bottom: 0">What’s the difference between Eat-in and Take-Away pricing?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-10" class="collapse panel-edits"><div class="panel-body"><p>The pricing fields in your product catalogue allow for differentiation between Eat-In and Take-Away food consumption. Use both fields if you charge different prices/VAT rates for the product. Use Eat-In, the default, if you charge only one price and VAT rate for the product.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-11" style="outline: none"><p style="float: left; margin-bottom: 0">What is the Favourite category used for?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-11" class="collapse panel-edits"><div class="panel-body"><p>Favourites provide quick access to frequently sold products and will often include products from diverse categories. Products that appear in Favourites also appear in their original category. For example, a latte may appear in both the Favourites and coffee categories.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-12" style="outline: none"><p style="float: left; margin-bottom: 0">How do I set-up Favourites?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-12" class="collapse panel-edits"><div class="panel-body"><p>To set-up Favourites:</p><ol><li class="list-gap">Select ‘Products’ from the smartSet-up drop down window.</li><li class="list-gap">Select a product you wish to appear in your favourite’s category and click edit.</li><li class="list-gap">At the bottom of the ‘edit product’ screen select \'Favourite\'.</li><li>This will add the product to the favourite’s category.</li></ol><img src="images/faq/99.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-13" style="outline: none"><p style="float: left; margin-bottom: 0">What is a product modifier?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-13" class="collapse panel-edits"><div class="panel-body"><p>Product modifiers are add-ons to products, such as an extra shot, soya or rice milk. Modifiers can also be different sizes for products, such as small, medium and large.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-14" style="outline: none"><p style="float: left; margin-bottom: 0">How do I set-up product modifiers?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-14" class="collapse panel-edits"><div class="panel-body"><p>To add modifiers to a product:</p><ol><li class="list-gap">Click on the desired product and tap the ‘Edit’ button.</li><li class="list-gap">Select the Modifier tab.</li><li class="list-gap">Select the ‘Add Modifier’ icon.</li><li class="list-gap">Name the modifier, for example “Milk”.</li><li class="list-gap">Add options under the modifier, such as different types of milk like soya, rice or almond. Select the “+” button and enter the name and price for each milk option.</li><li class="list-gap">Create a name and price for each modifier option, such as “Soya” for “£0.50”. The price should be the difference between the price of the “base” product and the price of the “base” product plus the modifier.</li><li class="list-gap">At the bottom of the modifier tab, tick the box to tell smartPOS how to handle modifier options for this product:<ul><li class="list-gap">“Customer may select none of the options”: Configures the smartPOS so customers may order the product without any special modifier options.</li><li class="list-gap">“Customer may select more than one option”: Configures the smartPOS so customers may order the product with several modifier options. While this feature does not make sense for the milk modifier (customers order just one type of milk), this is a nice feature for items with more than one optional “side item” (such as tomatoes, mushrooms, onion for a sandwich).</li></ul></li><li>Save your entries.</li></ol><img src="images/faq/100.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-85" style="outline: none"><p style="float: left; margin-bottom: 0">How do I upload images to product tiles?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-85" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">If you have images of the Products you sell you can now update your Product Catalogue to display them, making it even easier for you and your team to use your smartPOS.</p><p class="list-gap">It’s simple to do, all you need to start are some images saved on your computer or iPad that you can upload.</p><p>We recommend using the following image dimensions if possible (230 x 130)</p><img src="images/faq/74.png" class="screen-shots list-gap"><p>To upload images to product tiles:</p><ol><li class="list-gap">Select the Add product button in the product catalogue.</li><li class="list-gap">Select the images tab from the edit product screen that displays.</li><li class="list-gap">Select "Choose File" to locate a saved image on your computer or iPad to upload.</li><img src="images/faq/101.png" class="screen-shots list-gap"><li class="list-gap">After image is selected, it will appear in the cropping area on the right hand side of the page.</li><li class="list-gap">You can move and scale this cropping tool until you are satisfied with the final image, displayed on the left hand side of the page.</li><img src="images/faq/102.png" class="screen-shots list-gap"><li class="list-gap">Once you are happy with the image, select “Use this image” and then select “Save”.</li><li class="list-gap">The image will now appear on the product tile, on your menu.</li><li class="list-gap">Please note that large image file sizes may take a bit longer to display on your product tile.</li><li class="list-gap">Also images taken from the thumbnail on Google images will not work in your product catalogue.</li></ol></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-15" style="outline: none"><p style="float: left; margin-bottom: 0">At what level are product catalogue reports and stock monitored?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-15" class="collapse panel-edits"><div class="panel-body"><p>Product catalogue reports and stock are monitored at a product level not at a modifier level.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-17" style="outline: none"><p style="float: left; margin-bottom: 0">How do I fast track the set-up of my product catalogue with the duplicate function?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-17" class="collapse panel-edits"><div class="panel-body"><p>To speed up your Catalogue creation process with the duplicate function:</p><ol><li class="list-gap">Select ‘Products’ from the smartSet-up drop down window.</li><li class="list-gap">Select the product you wish to duplicate.</li><li class="list-gap">Click ‘Duplicate’.</li><li class="list-gap">Re-name the copied product and adjust the price by hovering over (when accessing your product catalogue from a desktop and working with a mouse) or tapping and holding the product tile when working on a tablet.</li><li>Save your entries.</li></ol><img src="images/faq/103.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-83" style="outline: none"><p style="float: left; margin-bottom: 0">How do I manage the display order of Products?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-83" class="collapse panel-edits"><div class="panel-body"><p>To manage the display order of products, simply drag and drop products to the required position. Products are displayed row by row, left to right.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-84" style="outline: none"><p style="float: left; margin-bottom: 0">How do I manage the display order of Categories?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-84" class="collapse panel-edits"><div class="panel-body"><p>To manage the display order of Categories, simply drag and drop a category to the required position.</p></div></div></div><h4 style="margin-top: 3em; color: #2EAAD5; margin-bottom: 1em"><span class="section-heading">Discounts:</span> Set up product discounts.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-18" style="outline: none"><p style="float: left; margin-bottom: 0">Can I specify discounts?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-18" class="collapse panel-edits"><div class="panel-body"><p>Yes. You may establish up to 3 venue specific discount levels.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-19" style="outline: none"><p style="float: left; margin-bottom: 0">How do I specify discount levels?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-19" class="collapse panel-edits"><div class="panel-body"><p>To create discounts:</p><ol><li class="list-gap">Select ‘Discounts’ from the smartSet-up drop down window.</li><li class="list-gap">Click the ‘New Discount’ button.</li><img src="images/faq/104.png" class="screen-shots" style="margin-bottom: 40px"><li class="list-gap">Enter the name of the Discount, for example, “Student”.</li><li class="list-gap">Enter the discount percentage amount, for example “25”.</li><li class="list-gap">Select the level of employee who is permitted to process the discount, either Staff or Manager.</li><li class="list-gap">Discounts may be edited or deleted using the “Edit” or “Delete” buttons.</li><li>Save your entries.</li></ol><img src="images/faq/105.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-20" style="outline: none"><p style="float: left; margin-bottom: 0">Can I restrict user access rights to discounts?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-20" class="collapse panel-edits"><div class="panel-body"><p>Yes, user access rights can be restricted by employee role. Remember that employee roles can only be defined in the ‘Staff’ section of smartSet-up.</p></div></div></div></div></div></div></div><div id="target2" class="container" style="padding-top: 4em"><div class="row"><div class="col-md-2" class="col-padding"><img src="images/faq/smartReports.svg" width="160" height="160"></div><div class="col-md-10" class="col-padding"><h2 style="margin-bottom: 1em">smartReports</h2><p class="section-intro">smartReports deliver key performance metrics at a glance. Log on anywhere and view personalised reports in real time so you can make decisions faster.</p><div class="accordion" id="accordion"><h4 style="margin-top: 3em; color: #69998A; margin-bottom: 1em"><span class="section-heading">smartReport:</span> View daily performance, cash reconciliation and what/how much you’re selling in seconds.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-21" style="outline: none"><p style="float: left; margin-bottom: 0">What is the smartReport?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-21" class="collapse panel-edits"><div class="panel-body"><p>Available anytime in the Cloud, your smartReport displays daily performance in an easy-to-read, insightful format. Similar to a traditional Z report but with significantly increased power, the smartReport identifies top selling products by value and volume and streamlines end-of-day cash reconciliation.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-22" style="outline: none"><p style="float: left; margin-bottom: 0">How do I access and use the smartReport?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-22" class="collapse panel-edits"><div class="panel-body"><p>To access your smartReport:</p><ol><li class="list-gap">Select ‘smartReport’ from the smartReports drop down window.</li><li class="list-gap">View your smartReport by selecting a venue, a date and entering an opening till balance if desired.</li><li class="list-gap">Click the update icon.</li><li>Your smartReport is also available directly from the smartPOS app, so real time reporting is never more than a touch away.</li></ol><img src="images/faq/85.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #69998A; margin-bottom: 1em"><span class="section-heading">Comparison Report:</span> Compare data across time windows to spot trends and improve performance.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-23" style="outline: none"><p style="float: left; margin-bottom: 0">What is a Comparison report?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-23" class="collapse panel-edits"><div class="panel-body"><p>The Comparison report compares sales, refunds and payment data across two customisable time windows--previous day, week, month or year.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-24" style="outline: none"><p style="float: left; margin-bottom: 0">How do I access the Comparison report and customise my comparison windows?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-24" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">To access your Comparison report:</p><ol><li class="list-gap">Select ‘Comparison report’ from the smartReports drop down window.</li><li class="list-gap">Selected the Venue</li><li class="list-gap">Customise comparison windows:</li><li class="list-gap">Select desired base date</li><li class="list-gap">Tick the desired comparison window:</li><ul><li class="list-gap">Same day as previous week</li><li class="list-gap">Previous week</li><li class="list-gap">Previous month</li><li class="list-gap">Same month is previous year</li></ul><li>Click the ‘update’ button.</li></ol><img src="images/faq/110.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #69998A; margin-bottom: 1em"><span class="section-heading">Staff Timesheets:</span> Monitor who is working, tweak shifts and reconcile employee hours.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-25" style="outline: none"><p style="float: left; margin-bottom: 0">What are Staff Timesheets?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-25" class="collapse panel-edits"><div class="panel-body"><p>The Staff Timesheet report lists employee names, shifts and hours, pulling data directly from the Clock In/Out app on your smartPOS. Managers are able to reconcile employee hours, round up or down and make corrections.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-26" style="outline: none"><p style="float: left; margin-bottom: 0">How do I access Staff timesheets and/or make corrections?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-26" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">To access your Staff timesheets:</p><ol><li class="list-gap">Select ‘Staff timesheets’ from the smartReports drop down window.</li><li>Use the ‘update’ button to reconcile employee hours, round up or down and make corrections.</li></ol><img src="images/faq/111.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #69998A; margin-bottom: 1em"><span class="section-heading">Product Report:</span></h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-81" style="outline: none"><p style="float: left; margin-bottom: 0">What is the Product Report?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-81" class="collapse panel-edits"><div class="panel-body"><p>Available anytime in the Cloud, your Product Report displays full details of Product purchased, including products sold, products refunded, the sales value of products sold and those refunded, as well as the total revenue by Product.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-82" style="outline: none"><p style="float: left; margin-bottom: 0">How do I access and use the Product Report?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-82" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">To access your Product report:</p><p class="list-gap">Select ‘Product report’ from the smartReports drop down window.</p><ol><li class="list-gap">Select desired date range</li><li class="list-gap">Select the Venue</li><li class="list-gap">Select for an individual or All POS tills</li><li class="list-gap">Click the ‘update’ button.</li><li>The Product report results can be exported to a <em>.CSV</em> file, which can then be used with third party applications</li></ol></div></div></div><h4 style="margin-top: 3em; color: #69998A; margin-bottom: 1em"><span class="section-heading">Closing POS Report:</span></h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-88" style="outline: none"><p style="float: left; margin-bottom: 0">What is the Closing POS Report?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-88" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">The Closing POS Report allows you to report Sales and Transactions for a trading period. Each report will be for a specific POS.</p><p class="list-gap">If you are creating a Closing POS Report for the first time, the opening time of the POS will be 00.01 for that day. Each subsequent report will have an opening time equivalent to the Closing time (+ 1 minute) of the last report saved.</p><p class="list-gap">The Closing time can be set by you, if you want to report on a shift or a day or number of days trading for that POS, choose the appropriate closing time that is relevant for your business.</p><p class="list-gap">The Closing POS Report will report on the transactions processed by that POS for the period between the opening and closing times, including Sales/Refunds, Pay-in/Pay-out transactions and Tax.</p><p class="list-gap">Within the report you can save the Actual values held in Cash/Card and also enter an opening balance.</p><p class="list-gap">All saved Closing POS Reports can be accessed via the Merchant Dashboard Report navigation, accessing Reports > Closing POS Reports > Historical Closing POS Reports.</p><img src="images/faq/106.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-89" style="outline: none"><p style="float: left; margin-bottom: 0">How do I access and use the Closing Product Report?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-89" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">To access your Closing POS report:</p><p class="list-gap">Select ‘Closing POS Report’ from the Reports drop down window.</p><ol><li class="list-gap">Select the Venue and POS you wish to create a Closing POS Report for</li><li class="list-gap">The Opening date will be automatically populated and cannot be edited</li><li class="list-gap">Please choose a Closing POS time</li><li class="list-gap">Enter an opening balance for the POS</li><li class="list-gap">Enter all Actual values</li><li>Save the Closing POS Report when you are sure all values entered are correct</li><img src="images/faq/107.png" class="screen-shots"></ol></div></div></div></div></div></div></div><div id="target3" class="container" style="padding-top: 4em"><div class="row"><div class="col-md-2" class="col-padding"><img src="images/faq/smartSocial.svg" width="160" height="160"></div><div class="col-md-10" class="col-padding"><h2 style="margin-bottom: 1em">smartSocial</h2><p class="section-intro">Set up connectivity and user permissions for Facebook, Twitter and Foursquare with smartSocial. Then share promotions and news seamlessly from your smartPOS.</p><div class="accordion" id="accordion"><h4 style="margin-top: 3em; color: #777BAF; margin-bottom: 1em"><span class="section-heading-alt">Facebook:</span> Set up connectivity to Facebook using smartSocial. Then post directly to your business Facebook page directly from your smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-27" style="outline: none"><p style="float: left; margin-bottom: 0">How do I link Facebook to my smartPOS and control access?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-27" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Link your business Facebook page to the smartPOS app:</p><ol><li class="list-gap">Select smartSocial from the navigation bar.</li><li class="list-gap">Select \'connect\' from the facebook panel on the smartSocial page. You’ll be re-directed to the Facebook log-in screen.</li><li class="list-gap">Log into Facebook.</li><li class="list-gap">Once you have logged in, you will be prompted to confirm that you are linking your company Facebook page with your smartPOS.</li><li class="list-gap">You will then be re-directed back to the smartSocial page where you will need to select the correct Facebook page from the drop down field on the Facebook panel.</li><li class="list-gap">Save your entries.</li><li>Remember that rights to use Facebook on the smartPOS are set-up under the smartTools section of the smartDashboard.</li></ol><img src="images/faq/12.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #777BAF; margin-bottom: 1em"><span class="section-heading-alt">Twitter:</span> Set up connectivity to Twitter using smartSocial. Then tweet promotions and news directly from your smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-28" style="outline: none"><p style="float: left; margin-bottom: 0">How do I link Twitter to my smartPOS and control access?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-28" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Link your business Twitter account to the smartPOS app:</p><p style="color: red"><i>This can only be done using your iPad, once you have installed the Twitter app and set up a Twitter account .</i></p><ol><li class="list-gap">Go to settings on your ipad.</li><li class="list-gap">Select Twitter from the list of options on the left-hand side column.</li><li class="list-gap">Select install to download the Twitter app, if you have not done so already.</li><li class="list-gap">On the same page in settings, enter your Twitter \'User Name\' and \'Password\' and select \'Sign In\' to add your company twitter account to the ipad.</li><img src="images/faq/51.jpg" class="screen-shots" style="margin-bottom: 40px"><li class="list-gap">Once that\'s done you will be able to post comments to Twitter from your smartSocial app.</li><li class="list-gap">You can set user privileges for this app in the smartSocial section on the smartDashboard.</li></ol><img src="images/faq/13.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #777BAF; margin-bottom: 1em"><span class="section-heading-alt">Foursquare:</span> Set up connectivity to Foursquare using smartSocial. Then view check-ins to your location directly from your smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-29" style="outline: none"><p style="float: left; margin-bottom: 0"></p><p style="float: left; margin-bottom: 0">How do I link Foursquare to my smartPOS?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-29" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Link business Foursquare to the smartPOS app:</p><ol><li class="list-gap">Select smartSocial from the navigation bar.</li><li class="list-gap">Select \'connect\' from the foursquare panel on the smartSocial page. You’ll be re-directed to the Foursquare login page.</li><li class="list-gap">Log into your Foursquare account.</li><li class="list-gap">Select to log in as ‘you’ (the account holder of the Foursquare account) - not the page.</li><li class="list-gap">You’ll be prompted to allow the myCircle smartPOS App to connect to Foursquare. Select ‘Yes’.</li><li class="list-gap">You’ll be re-directed back to the smartSocial page where you began the set-up. The ‘Connect’ button has now changed to ‘Disconnect’, meaning you’ve linked your smartPOS App with your Foursquare account.</li><li class="list-gap">Enter your Foursquare Venue ID in the Venue ID field. To obtain your Venue ID, go to <a href="www.foursquare.com" target="_blank">www.foursquare.com</a>. Enter your Venue name in the search box at the very top of the screen labelled ‘I’m looking for….’</li><li class="list-gap">Select your Venue from the search results drop down option.</li><li class="list-gap">You’ll be re-directed to your Venue’s Foursquare page. From the URL address field, copy the long number at the end-- as per the example below:<ul><li class="list-gap">https://foursquare.com/v/venue_name/5a678db8984ncd7w75hdfhe7</li></ul></li><li class="list-gap">Paste the long number into the Venue ID field in the foursquare panel on the smartSocial page.</li><li class="list-gap">Save your entries.</li><li class="list-gap">Remember that rights to use Foursquare on the smartPOS are set-up under the smartTools section of the smartDashboard.</li></ol><img src="images/faq/14.png" class="screen-shots"></div></div></div></div></div></div></div><div id="target4" class="container" style="padding-top: 4em"><div class="row"><div class="col-md-2" class="col-padding"><img src="images/faq/smartTools.svg" width="160" height="160"></div><div class="col-md-10" class="col-padding"><h2 style="margin-bottom: 1em">smartTools</h2><p class="section-intro">smartTools are one touch apps designed to make you more productive, organised and connected. From the smartTools menu, you can set user access rights to individual apps. Then unleash their speed, simplicity and power with just a tap of an icon on your smartPOS.</p><div class="accordion" id="accordion"><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em"><span class="section-heading-alt">smartPOS:</span> Set-up user rights under smartTools in your smartDashboard. Then create orders, apply discounts, take payments and print from your smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-30" style="outline: none"><p style="float: left; margin-bottom: 0">How do I define user rights to the smartPOS app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-30" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Define access to the smartPOS app:</p><ol><li class="list-gap">Click smartTools from the smartDashboard</li><li class="list-gap">Find the smartPOS section.</li><li class="list-gap">Click on who the app will be available to, i.e. Staff or Manager.</li><li class="list-gap">Save your entry.</li></ol><img src="images/faq/93.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em">Login:</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-31" style="outline: none"><p style="float: left; margin-bottom: 0">As an owner, how do I log onto the myCircle smartPOS application for the first time?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-31" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">For Owners/Managers using the smartPOS for the first time,</p><ol><li class="list-gap">Log onto the smartPOS using the Log-in screen.</li><li class="list-gap">Input your email address registered with myCircle, as well as the password that was issued to you.</li></ol><img src="images/faq/81.png" class="screen-shots list-gap"><p class="list-gap">Next, you will be asked to select the venue the smartPOS is operating in.</p><p class="list-gap">NB. If you change the location of of smartPOS, you MUST reassign the smartPOS to the new venue.</p><img src="images/faq/82.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-32" style="outline: none"><p style="float: left; margin-bottom: 0">How do my employees and I log into the smartPOS app on a regular basis?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-32" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">Look for the name of the employee currently active on the smartPOS in the upper right hand corner.</li><img src="images/faq/18.5.png" class="screen-shots" style="margin-bottom: 40px"><li class="list-gap">Tap the name field to enter a name or switch employees which will bring up a PIN entry keyboard prompt.</li><li class="list-gap">Enter your unique PIN code. Pin numbers are managed under ‘Staff’ from the smartSet-up drop down window.</li></ol><img src="images/faq/17.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-33" style="outline: none"><p style="float: left; margin-bottom: 0">I forgot my email address.</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-33" class="collapse panel-edits"><div class="panel-body"><p>Normally we will have set you up on the email address you provided on sign up. However, if you have forgot this email address, please call our helpdesk on 0800 8 40 30 40 for assistance.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-34" style="outline: none"><p style="float: left; margin-bottom: 0">I forgot my password.</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-34" class="collapse panel-edits"><div class="panel-body"><p>Not to worry. Simply click the ‘forgot my password’ link at the bottom of the log-in screen of your smartPOS app for directions on re-setting.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-35" style="outline: none"><p style="float: left; margin-bottom: 0">What should I see after logging in?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-35" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Your product catalogue is the main home screen of the smartPOS.</p><img src="images/faq/79.png" class="screen-shots" style="margin-bottom: 40px"><p class="list-gap">Tap the myCircle logo at the bottom right-hand side of your screen to bring up your suite of smartTools. Up to 9 smartTools are available. Access to these smartTools is role based and established via smartSet-up in the smartDashboard.</p><img src="images/faq/80.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em">Navigation:</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-36" style="outline: none"><p style="float: left; margin-bottom: 0">What are the icons at the very top of the smartPOS app screen?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-36" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">At the very top of the smartPOS app screen, you’ll find:</p><ol><li class="list-gap">Employee Name: In the top right-hand side of the smartPOS app, you’ll see the name of the employee currently active within the app. Switch employees by tapping the Name Field which will bring up a PIN entry keyboard prompt. The employee can then enter his or her PIN code for accurate tracking of transactions.</li><li class="list-gap">Printer Icon: This icon represents your smartPOS app\'s connection to the printer. If your printer is suddenly disconnected from the smartPOS, the printer icon will turn red as seen in the image below.</li><img src="images/faq/18.5.png" class="screen-shots" style="margin-bottom: 40px"><li>Globe Icon: This Icon represents your smartPOS app’s connection to the internet. If your smartPOS suddenly looses connection to the internet, this icon will turn red alerting the user that they are now operating without internet onnection.</li></ol></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em">Product Catalogue:</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-37" style="outline: none"><p style="float: left; margin-bottom: 0">What are the key functions of my Product Catalogue?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-37" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">From the Product Catalogue’s main screen on the smartPOS, you can:</p><ol><li class="list-gap">Create orders for immediate processing.</li><li>Set up a Tab.</li></ol></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-38" style="outline: none"><p style="float: left; margin-bottom: 0">How do I manually add items that aren’t in my ‘Catalogue, say the “special of the day”?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-38" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">You can manually add items that aren’t in the Product Catalogue:</p><ol><li class="list-gap">Select ‘Add Manual Item’ from the main order screen.</li><li class="list-gap">Choose a product name and set your price.</li><li class="list-gap">Select VAT Rate.</li><li class="list-gap">Click ‘Add Item’</li><li class="list-gap">Process the order.</li></ol><img src="images/faq/19.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-39" style="outline: none"><p style="float: left; margin-bottom: 0">What do the different Category colours mean?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-39" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">When the queue is long, colours help to quickly differentiate your product categories.</p><p>Remember category colours are set-up through your smartDashboard’s smartSet-up function. The Dashboard can be accessed by tapping the smartAdmin app or from wherever you have computer access.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-40" style="outline: none"><p style="float: left; margin-bottom: 0">How do I modify a product?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-40" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">If modifiers are attached to an item, the modifier options will be displayed as soon as the product tile is selected.</p><p class="list-gap">Select all required modifiers and then tap the \'Add\' button to add the item and selected modifiers to the basket.</p><p>Remember that product modifiers are set-up through your smartDashboard’s smartSet-up, in the ‘edit product’ section. The Dashboard can be accessed by tapping the smartAdmin app or from wherever you have computer access.</p></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em">Orders:</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-41" style="outline: none"><p style="float: left; margin-bottom: 0">How do I create an Order?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-41" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">To create an order:</p><ol><li class="list-gap">Tap a product tile once to add one to the order quantity.</li><li class="list-gap">Tap a product tile repetitively to add multiple items of this product to the order. Each tap on the product tile will increase the item count of the product to the order.</li><li class="list-gap">You will notice an item counter appearing on the product tile to help you quickly identify the quantity of items in the basket.</li><p class="list-gap" style="color: red">To quickly delete an item from the basket, swipe the item out of the basket, swiping from left to right. To quickly duplicate an item swipe from right to left.</p><li class="list-gap">Products that have a modifier attached to them are apparent, as they have a have a semi circle on the top right hand corner of the tile.</li><li class="list-gap">You’ll always see the content of the current order in the order/basket view on the right hand side of the screen.</li><li class="list-gap">In the bottom right hand side of the smartPOS screen you’ll see the ‘Pay’, ‘Add Manual Item’ and ‘Order Details’ buttons.<ul><li class="list-gap">Pay: Process an order immediately using cash or card.</li><li class="list-gap">Add Manual Item: Add a product manually, such as a lunch special, which you don’t have on your Product Catalogue because it changes frequently.</li><li class="list-gap">Order Details:<ul><li class="list-gap">Save an order for later payment like opening a tab</li><li class="list-gap">Apply a discount</li><li class="list-gap">Select Eat In or Take Away pricing (pricing established in your smartDashboard)</li><li class="list-gap">Printing an order for the kitchen</li><li class="list-gap">Printing an itemised bill.</li></ul></li></ul></li></ol><img src="images/faq/74.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-42" style="outline: none"><p style="float: left; margin-bottom: 0">Upon selecting a product, the tile changes its appearance. Why is that?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-42" class="collapse panel-edits"><div class="panel-body"><p>We designed this so you can easily see which products have been added to an order. You can also always see the contents of your active order on the right hand side of the screen.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-43" style="outline: none"><p style="float: left; margin-bottom: 0">How do I save an order and create a tab for later viewing?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-43" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">To save an order you’ve created:</p><ol><li class="list-gap">Tap the ‘Order Details’ icon in the bottom right hand corner of your smartPOS app.</li><li class="list-gap">Name the order by typing the customer’s name or table number.</li><li class="list-gap">Add any optional notes for your kitchen and serving staff, such as “salad with dressing on the side” or “customer table in the corner red jumper”.</li><li class="list-gap">Save the entry.</li><li class="list-gap">The order is now accessible via the ‘Orders’ icon in the upper right hand side of the screen.</li></ol><img src="images/faq/21.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-44" style="outline: none"><p style="float: left; margin-bottom: 0">Anything else I should remember about saving orders?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-44" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">A few important notes about saving orders:</p><ol><li class="list-gap">Saving orders is simple since they are saved the moment you name them with either a Table Number or Customer Name. Selecting ‘Save’ returns you to the main Product screen.</li><li class="list-gap">You may return to saved orders to add items, such as dessert. Changes are tracked automatically.</li><li>Exit the saved orders by tapping the ‘Products’ button in the top left hand corner of the screen or selecting ‘Save’.</li></ol></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-45" style="outline: none"><p style="float: left; margin-bottom: 0">How do I exit the ‘Order’ view to take the next customer’s Order?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-45" class="collapse panel-edits"><div class="panel-body"><p>Selecting the ‘New Order’ icon in the top right hand corner clears any previous order content that’s been displayed and enables you to create a new order.</p><img src="images/faq/86.png" class="screen-shots" style="width: 60%"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-46" style="outline: none"><p style="float: left; margin-bottom: 0">Where do I find orders that have already been created?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-46" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Order history is just a tap away.</p><ol><li class="list-gap">Select ‘Orders’, which lists the number of open items in brackets.</li><li class="list-gap">View order history, including order name, number of items, current bill, member of staff who created the order and when the order was created.</li></ol><img src="images/faq/22.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-47" style="outline: none"><p style="float: left; margin-bottom: 0">Can I toggle between an unsaved order and update an existing order?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-47" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">When things get busy, you may forget to save an order. We’ve built a prompt into smartPOS to avoid losing orders you meant to save.</p><p>If one member of staff is making the coffees for an order that’s still open on the screen and hasn’t been saved whilst another member of staff wants to update an existing order via the ‘Orders’ button, an unsaved order message will be displayed asking whether the current unsaved order should be discarded and thus deleted.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-48" style="outline: none"><p style="float: left; margin-bottom: 0">Can I amend an Order?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-48" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Yes, it’s easy and quick.</p><ol><li class="list-gap">Select ‘Orders’ to access your saved orders.</li><li class="list-gap">Select the order you would like to update from the list.</li><li class="list-gap">The selected order will turn blue and the list of items ordered will appear in the basket on the right hand side.</li><img src="images/faq/29.png" class="screen-shots" style="margin-bottom: 40px"><li class="list-gap">Hit the ‘products’ button in the top left hand corner of your screen which will navigate you back to the products screen. You can now add further items to this order</li><li class="list-gap">Tapping on an item in the basket will display a drop down menu, allowing you to delete, discount or in some cases, modify the item.</li><li class="list-gap">Once the order is amended, you don’t have to save again. smartPOS automatically updates and saves orders in the background.</li><li class="list-gap">Select ‘New Order’ (don’t worry, it’s saved!) to process your next order.</li></ol><img src="images/faq/87.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em">Applying Discounts:</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-49" style="outline: none"><p style="float: left; margin-bottom: 0">Can I apply a discount to an individual Item or the entire order?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-49" class="collapse panel-edits"><div class="panel-body"><p>Yes. You can apply up to 3 user-defined Discounts to individual Items or to an entire order (100% Discount). Discount types and amounts are customised in the smartSet-Up tab of the smartDashboard.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-50" style="outline: none"><p style="float: left; margin-bottom: 0">To discount an entire order:</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-50" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">While currently in an order, select the order details button on the bottom right hand corner of your screen.</li><li class="list-gap">When on the order details page you can then select discount, and apply the appropriate discount to your order.</li><li class="list-gap">The discount will be applied to each item of the order, with savings displayed at both levels.</li></ol><img src="images/faq/24.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-51" style="outline: none"><p style="float: left; margin-bottom: 0">To discount individual items:</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-51" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">Tap the product tile on the right hand side of the order screen that you wish to discount.</li><li class="list-gap">Select the discount to be applied from the slider view that has been activated.</li><li class="list-gap">The discount will be applied to the selected product.</li></ol><p class="list-gap">Please note, an order can have several discounts applied in parallel, meaning an entire order can be discounted as well as individual Items.</p><img src="images/faq/87.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em">Payments:</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-52" style="outline: none"><p style="float: left; margin-bottom: 0">How do I process payments?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-52" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">Select the ‘Pay’ button to take the payment whenever it is presented.</li><li class="list-gap">Enter the amount being paid or select one of the pre-set amounts.</li><li class="list-gap">For example, push £10. You will see the change that is due, then press ‘Pay’.</li><li class="list-gap">You will be given the option to print the receipt or not and the cash drawer will open.</li></ol><img src="images/faq/67.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em">Printing orders and receipts:</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-90" style="outline: none"><p style="float: left; margin-bottom: 0">How to configure a printer or multiple printers?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-90" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">You can configure as many printers to work with your smartPOS as required.</p><p class="list-gap">To begin, tap the Printer icon in the smartPOS main menu. This action will automatically search for all printers available, including LAN, wifi and bluetooth printers.</p><img src="images/faq/113.png" class="screen-shots list-gap"><p class="list-gap">All available printers will be discovered and can then be configured. To configure the printer, please follow these instructions:</p><ol><li class="list-gap">Tap on the \'discovered\' printer to be configured</li><li class="list-gap">Click Edit</li><img src="images/faq/114.png" class="screen-shots list-gap"><li class="list-gap">Next, give the printer a name e.g. Kitchen</li><li class="list-gap">Activate the required toggles to indicate if the printer should print Bills, Receipts, Reports or Orders</li><li class="list-gap">If Orders is active, you will be prompted to indicate which Venue Sections should be associated with the Printer. In the Merchant Dashboard you can create and associate Venue Sections with Categories and Products, so only items associated with a particular Venue Section are sent to print at a particular printer e.g. Drink items may be associated with a Venue Section named \'Bar\'. If Printer A is configured to print orders only for Venue Section \'Bar\', only ordered items associated with the \'Bar\' venue section will be printed by Printer A.</li><img src="images/faq/115.png" class="screen-shots list-gap"> <img src="images/faq/117.png" class="screen-shots list-gap"><li class="list-gap">Select to activate the toggle if the printer should open the cash drawer.</li></ol><p class="list-gap">Once complete save the printer configuration. Should connectivity with the printer be lost, for whatever reason, when the printer is rediscovered these settings will be automatically applied.</p><p class="list-gap">Repeat these steps to configure multiple printers.</p><img src="images/faq/116.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-53" style="outline: none"><p style="float: left; margin-bottom: 0">Can I print the content of an order?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-53" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Of course. From the order details window:</p><ol><li class="list-gap">Select the ‘Print’ icon to print a copy of the order.</li><li class="list-gap">If you want to give a copy of the order to your bar staff for drinks and another copy to the kitchen, print multiple copies. No more trying to decipher everybody’s handwriting and second- guessing what starter Table 2 has ordered!</li></ol><img src="images/faq/50.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-54" style="outline: none"><p style="float: left; margin-bottom: 0">There’s another field called “Print Bill” — what is that?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-54" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">smartPOS includes bill print functionality in case your customer prefers an itemised bill before settling payment for an order.</p><p class="list-gap">Perhaps you’ve applied a 5% student discount to an order as well as fully compensated a dessert due to a mix-up. The bill shows a full itemisation of both.</p><p>The customer receipt, however, shows the total discount applied expressed as an absolute number, without the itemisation.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-55" style="outline: none"><p style="float: left; margin-bottom: 0">Does the myCircle smartPOS support VAT receipts?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-55" class="collapse panel-edits"><div class="panel-body"><p>Yes, smartPOS allows you to be fully VAT compliant. If you provide your VAT number in the smartSet-up section of the smartDashboard, all customer receipts printed via the smartPOS app and printed on the thermal printer provided as part your Shop-in-a-Box bundle, will provide a detailed VAT breakdown.</p></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em">System FAQ:</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-56" style="outline: none"><p style="float: left; margin-bottom: 0">What happens if I lose connectivity?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-56" class="collapse panel-edits"><div class="panel-body"><p>Sometimes Wi-Fi connections aren’t as stable as we would like them to be and you may occasionally lose connectivity between the elements of the Shop-in-a-Box and your smartPOS. When the network is up and running again, all changes and transactions taken during an offline period automatically sync.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-57" style="outline: none"><p style="float: left; margin-bottom: 0">The globe symbol in the top right hand corner has turned red. What does this mean?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-57" class="collapse panel-edits"><div class="panel-body"><p>This indicates the connection between the smartPOS app and the internet has been disrupted.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-58" style="outline: none"><p style="float: left; margin-bottom: 0">What do I need to do when the globe has turned red?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-58" class="collapse panel-edits"><div class="panel-body"><p>You may also notice your iPad is no longer showing the Wi-Fi network symbol in the very top left hand corner. It’s usually due to your venue’s network. Open Safari or any other web browser app you have installed on your iPad and attempt to open a website. If you’re unable to connect to the internet, try re-setting your venue’s Wi-Fi-router to re-boot the network.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-59" style="outline: none"><p style="float: left; margin-bottom: 0">Did I lose everything while the internet was down?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-59" class="collapse panel-edits"><div class="panel-body"><p>No. Any orders made, amended or checked out for payment are saved on your iPad. When the network is back up and running, your orders will be synced seamlessly to the myCircle platform.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-60" style="outline: none"><p style="float: left; margin-bottom: 0">There is a number next to the globe. What does this mean?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-60" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">This is a count of orders that have been made and saved whilst connectivity was lost. When connectivity is restored, the count decreases as your queued orders are pulled onto myCircle’s platform.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-61" style="outline: none"><p style="float: left; margin-bottom: 0">The printer icon has turned red. What does this mean?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-61" class="collapse panel-edits"><div class="panel-body"><p>Your myCircle Shop-in-a-Box system comes with a Bluetooth® printer. When the Bluetooth® connection between the printer and iPad is disrupted, smartPOS will turn the printer icon red. Try turning your printer off and then on again to re-set your connection.</p></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-62" style="outline: none"><p style="float: left; margin-bottom: 0">I still have some questions on the smartPOS app. How do I get help?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-62" class="collapse panel-edits"><div class="panel-body"><ul><li class="list-gap">The Helpdesk can be contacted on 0800 8 403040.</li><li>It is manned 08.00 to 23.00 Monday to Saturday and 10.00 to 17.00 Sundays and bank holidays.</li></ul></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-80" style="outline: none"><p style="float: left; margin-bottom: 0">I see an alert a new version of the SmartPOS is available. What should I do?</p><img src="../images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-80" class="collapse panel-edits"><div class="panel-body"><ul><li class="list-gap">If you see an alert informing you a new version of the SmartPOS is available for download, follow the normal process to download and install the new version of the App.</li></ul></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em"><span class="section-heading-alt">smartOrders:</span> Set-up user rights under smartTools in your smartDashboard. Then process refunds directly from your smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-63" style="outline: none"><p style="float: left; margin-bottom: 0">How do I define user rights to the smartOrders app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-63" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Define access to the smartOrders app:</p><ol><li class="list-gap">Click smartTools from the smartDashboard</li><li class="list-gap">Find the smartOrders section.</li><li class="list-gap">Click on who the smartOrders app will be available to, i.e. Staff or Manager.</li><li class="list-gap">Save your entry.</li></ol><img src="images/faq/88.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-64" style="outline: none"><p style="float: left; margin-bottom: 0">How do I refund an item or the full transaction?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-64" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">Select the smartOrders smartTool icon.</li><li class="list-gap">The left hand navigation displays a list of transactions. The last 10 orders are automatically displayed.</li><li class="list-gap">Search for the transaction you wish to refund, using the unique numeric order ID code displayed at the bottom of the receipt as necessary.</li><li class="list-gap">You can refund items individually or the entire order by ticking the relevant boxes.</li></ol><img src="images/faq/45.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em"><span class="section-heading-alt">Pay In/Out:</span> Set up user rights under smartTools in your smartDashboard. Then pay and receive payments from vendors and staff on the spot from your smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-65" style="outline: none"><p style="float: left; margin-bottom: 0">How do I define user rights to the Pay In/Out app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-65" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Define access to the Pay In/Out app:</p><ol><li class="list-gap">Click smartTools from the smartDashboard</li><li class="list-gap">Find the Pay In/Out section.</li><li class="list-gap">Select who the Pay In/Out app will be available to, i.e. Staff or Manager</li><li class="list-gap">Save your entry.</li></ol><img src="images/faq/89.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-66" style="outline: none"><p style="float: left; margin-bottom: 0">How do I use the Pay In/Out smartTool app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-66" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">Tap the ‘Pay In/Out’ smartTool icon.</li><li class="list-gap">Select ‘outgoing payment’ to pay a supplier or employee.</li><li class="list-gap">Select ‘incoming payment’ to register any cash paid in to the system.</li></ol><img src="images/faq/69.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em"><span class="section-heading-alt">Clock In/Out:</span> Set up user rights under smartTools in your smartDashboard. Then monitor who is logged in and working, adjust hours and tweak shifts right from your smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-67" style="outline: none"><p style="float: left; margin-bottom: 0">How do I define user rights to the Clock In/Out app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-67" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Define access to the Clock In/Out app:</p><ol><li class="list-gap">Click smartTools from the smartDashboard.</li><li class="list-gap">Find the Clock In/Out section.</li><li class="list-gap">Select who the Clock In/Out app will be available to, i.e. Staff or Manager.</li><li class="list-gap">Save your entry.</li></ol><img src="images/faq/90.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-68" style="outline: none"><p style="float: left; margin-bottom: 0">How do I use the Clock In/Out smartTool app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-68" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">Tap the ‘Clock In/Out’ smartTool icon.</li><li class="list-gap">Press “Clock In” at the beginning of an employee’s shift to log them in.</li><li class="list-gap">Press “Clock Out” at the end of an employee’s shift to log them out.</li></ol><img src="images/faq/73.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em"><span class="section-heading-alt">smartReports:</span> Set up user rights under smartTools in your smartDashboard. Then generate your smartReport in real time right from your smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-69" style="outline: none"><p style="float: left; margin-bottom: 0">How do I define user rights to the smartReports app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-69" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Define access to the smartReport app:</p><ol><li class="list-gap">Click smartTools from the smartDashboard</li><li class="list-gap">Find the smartReport section.</li><li class="list-gap">Select who the smartReports app will be available to, i.e. Staff or Manager.</li><li class="list-gap">Save your entry.</li></ol><img src="images/faq/91.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-70" style="outline: none"><p style="float: left; margin-bottom: 0">How do I generate my smartReport?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-70" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">With one touch, your smartReport, a powerful version of the traditional “Z report” can be generated directly from the smartPOS app:</p><ol><li class="list-gap">Tap the smartReport smartTool icon.</li><li class="list-gap">Add notes if desired, such as what’s in your till to make cash reconciliation at the end of the day easier.</li><li class="list-gap">View the report on screen or print it out.</li><li class="list-gap">Your smartReport is also accessible via smartReports in the smartDashboard.</li></ol><img src="images/faq/41.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-71" style="outline: none"><p style="float: left; margin-bottom: 0">Do you provide more reports?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-71" class="collapse panel-edits"><div class="panel-body"><p>Yes, we make a powerful selection of comparison data and timesheet reports available to you via the smartReports in the smartDashboard.</p></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em"><span class="section-heading-alt">Facebook:</span> Set-up user rights under smartTools in your smartDashboard. Then share news and promotions on your Facebook page directly from your smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-72" style="outline: none"><p style="float: left; margin-bottom: 0">How do I define user rights to the Facebook app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-72" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Define access to the Facebook app:</p><ol><li class="list-gap">Click smartTools from the smartDashboard.</li><li class="list-gap">Find the Facebook section.</li><li class="list-gap">Click on who the app will be available to - Staff or Manager.</li><li class="list-gap">Save your entry.</li></ol><img src="images/faq/12.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-73" style="outline: none"><p style="float: left; margin-bottom: 0">How do I connect with the Facebook smartTool app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-73" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">Press the Facebook logo icon.</li><li class="list-gap">Update your status/promote offers and upload pictures.</li></ol><img src="images/faq/72.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em"><span class="section-heading-alt">Twitter:</span> Set-up user rights under smartTools in your smartDashboard. Then tweet news and promotions from the smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-74" style="outline: none"><p style="float: left; margin-bottom: 0">How do I define user rights to the Twitter app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-74" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Define access to the Twitter app:</p><ol><li class="list-gap">Click smartTools from the smartDashboard</li><li class="list-gap">Find the Twitter section</li><li class="list-gap">Click on who the app will be available to - Staff or Manager.</li><li class="list-gap">Save your entry.</li></ol><img src="images/faq/13.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-75" style="outline: none"><p style="float: left; margin-bottom: 0">How do I connect with the Twitter smartTool app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-75" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">Press the Twitter logo icon.</li><li class="list-gap">Update your status and promote offers.</li></ol><img src="images/faq/71.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em"><span class="section-heading-alt">Foursquare:</span> Set-up user rights under smartTools in your smartDashboard. Then see who’s checked into your venue with just a tap of an icon.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-76" style="outline: none"><p style="float: left; margin-bottom: 0">How do I define user rights to the Foursquare app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-76" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Define access to the Foursquare app:</p><ol><li class="list-gap">Click smartTools from the smartDashboard</li><li class="list-gap">Find the Foursquare section.</li><li class="list-gap">Click on who the app will be available to - Staff or Manager.</li><li class="list-gap">Save your entry.</li></ol><img src="images/faq/14.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-77" style="outline: none"><p style="float: left; margin-bottom: 0">How do I use the Foursquare smartTool app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-77" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">Press the Foursquare logo icon.</li><li class="list-gap">View which customers are currently “Checked in” to your business.</li></ol><img src="images/faq/70.png" class="screen-shots"></div></div></div><h4 style="margin-top: 3em; color: #D37E9E; margin-bottom: 1em"><span class="section-heading-alt">smartAdmin:</span> Set-up user rights under smartTools in your smartDashboard. Then leap to your smartDashboard with one touch from your smartPOS.</h4><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-78" style="outline: none"><p style="float: left; margin-bottom: 0">How do I define user rights to the smartAdmin app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-78" class="collapse panel-edits"><div class="panel-body"><p class="list-gap">Define access to the smartAdmin app:</p><ol><li class="list-gap">Click smartTools from the smartDashboard</li><li class="list-gap">Find the smartAdmin section.</li><li class="list-gap">Click on who the app will be available to - Staff or Manager.</li><li class="list-gap">Save your entry.</li></ol><img src="images/faq/92.png" class="screen-shots"></div></div></div><div class="panel" style="box-shadow: none"><button type="button" class="btn custom-btn-panel" data-toggle="collapse" data-target="#collapsible-79" style="outline: none"><p style="float: left; margin-bottom: 0">How do I use the smartAdmin smartTool app?</p><img src="images/faq/down-arrow.png" class="down-arrow"></button><div id="collapsible-79" class="collapse panel-edits"><div class="panel-body"><ol><li class="list-gap">Press the “Smart Admin” smartTool icon.</li><li class="list-gap">This will open a Safari, which will log you into the smartDashboard.</li><li class="list-gap">To get back to the smartPOS, you must use the button on the iPad itself and press on the app again.</li></ol><img src="images/faq/41.png" class="screen-shots"></div></div></div></div></div></div></div></section></div>'),a.put("views/venue-list.html",'<div data-ng-show="venues"><header class="container-fluid"><div class="container"><div class="row"><h1 class="pull-left main-header" data-ng-if="hasModuleEnabled(\'multivenue\')"><span data-i18n="venues.headerText"></span> <span class="subHeader" data-ng-pluralize count="venues.length" when="{\'0\': \'You currently have no venues.\',\n                                 \'1\': \'You currently have 1 venue.\',\n                                 \'other\': \'You currently have {{venues.length}} venues.\'}"></span></h1><h1 class="pull-left main-header" data-ng-if="!hasModuleEnabled(\'multivenue\')" data-i18n="venues.headerText"></h1><div class="controls pull-right" data-ng-if="hasModuleEnabled(\'multivenue\')"><input type="button" class="icon icon-lg plus-icon" data-ng-click="create()" data-ng-show="canAddVenue()" value="{{ \'common.add\' | i18n }}"> <input type="button" class="icon icon-lg duplicate-icon" data-ng-click="duplicateVenue()" data-ng-show="canAddVenue()" value="{{ \'common.duplicate\' | i18n }}"> </div></div></div></header><alert-box></alert-box><section id="venues" class="container"><div id="errorBox" data-ng-show="hasErrors()" class="col-md-12"><alert ng-repeat="error in errors.venue" type="danger">{{error}}</alert></div><table class="table"><thead><tr><th data-ng-if="hasModuleEnabled(\'multivenue\')"></th><th data-sortable="name">{{ \'venues.gridHeader-name\' | i18n }}</th><th data-sortable="address.postCode">{{ \'venues.gridHeader-postcode\' | i18n }}</th><th>{{ \'venues.gridHeader-telephone\' | i18n }}</th><th>{{ \'venues.gridHeader-email\' | i18n }}</th><th data-ng-if="hasModuleEnabled(\'multivenue\')"></th></tr></thead><tbody><tr ng-repeat="venue in venues | orderBy:sort:reverse"><td data-ng-show="hasModuleEnabled(\'multivenue\')" class="checkbox-col"><input type="checkbox" checklist-model="checkedVenues" id="venueCheckbox{{venue.id}}"><label data-ng-click="updateCheckboxStatus(venue)"></label></td><td>{{venue.name}}</td><td>{{venue.address.postCode}}</td><td>{{getVenueContactByType(venue, \'PHONE\')}}</td><td>{{getVenueContactByType(venue, \'EMAIL\')}}</td><td class="controls"><input type="button" class="icon icon-lg menu-icon" ng-click="editVenueProducts(venue)" data-requires-permission="PERM_MERCHANT_ADMINISTRATOR" value="{{ \'common.menu\' | i18n }}"> <input type="button" class="icon icon-lg edit-icon" ng-click="edit(venue)" data-requires-permission="PERM_MERCHANT_ADMINISTRATOR" value="{{ \'common.edit\' | i18n }}"> <button type="button" class="icon icon-lg bin-icon" data-ng-click="confirmedDelete(venue)">Delete</button></td></tr></tbody></table><div class="modal bs-modal-lg fade" data-trigger="venuesToDelete" data-on-cancel="closeConfirm" style="margin-top: 250px"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-body"><p>Are you sure you want to delete \'{{venuesToDelete[0].name}}\'?</p></div><div class="modal-footer"><button type="button" class="btn btn-default btn-lg" data-ng-click="closeConfirm()">{{ \'common.no\' | i18n }}</button> <button type="button" class="btn btn-danger btn-lg" data-ng-click="confirmYes()">{{ \'common.yes\' | i18n }}</button></div></div>]</div></div></section></div>')
}]),function(){"use strict";angular.module("smartRegisterApp").config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){return a.when("/merchants",{templateUrl:"views/merchant-list.html",controller:"MerchantsCtrl",resolve:{merchants:["MerchantService",function(a){return a.getPagedList()}],merchantlist:["MerchantService",function(a){return a.getList()}]},title:"Merchants",secured:!0,role:"PERM_PLATFORM_ADMINISTRATOR",fixedBar:!0}).when("/merchants/add",{templateUrl:"views/partials/merchants/merchant-edit-form.html",controller:"MerchantFormCtrl",resolve:{merchant:["MerchantService",function(a){return a["new"]()}],venues:[function(){return[]}],employees:["EmployeeService","$route",function(){return[]}]},title:"Add Merchant",backUrl:"/merchants",secured:!0,role:"PERM_PLATFORM_ADMINISTRATOR",fixedBar:!0}).when("/merchants/edit/:id",{templateUrl:"views/partials/merchants/merchant-edit-form.html",controller:"MerchantFormCtrl",resolve:{merchant:["MerchantService","$route",function(a,b){return a.getById(b.current.params.id,{full:!0})}],venues:["VenueService","$route",function(a,b){return a.getGridList(b.current.params.id)}],employees:["EmployeeService","$route",function(a,b){return a.getGridList(b.current.params.id)}]},title:"Edit Merchant",backUrl:"/merchants",secured:!0,role:"PERM_PLATFORM_ADMINISTRATOR",fixedBar:!0}).when("/venues",{templateUrl:"views/venue-list.html",controller:"VenuesCtrl",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/venues/add",{templateUrl:"views/partials/venues/venue-edit-form2.html",controller:"VenueFormCtrl",resolve:{venue:["$rootScope","VenueService",function(a,b){return b["new"]()}],employees:["VenueService","EmployeeService","$route",function(){return[]}],discounts:["VenueService","DiscountService","$route",function(){return[]}]},title:"Add Venue",backUrl:"/venues",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR",fixedBar:!0}).when("/venues/edit/:id",{templateUrl:"views/partials/venues/venue-edit-form2.html",controller:"VenueFormCtrl",resolve:{venue:["VenueService","$route",function(a,b){return a.getById(b.current.params.id,{full:!1})}],employees:["VenueService","EmployeeService","$route",function(a,b,c){return a.getById(c.current.params.id,{full:!1}).then(function(a){return b.getGridListByVenue(a,{full:!0})})}],discounts:["VenueService","DiscountService","$route",function(a,b){return b.getList()}]},title:"Edit Venue",backUrl:"/venues",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR",fixedBar:!0}).when("/employees",{templateUrl:"views/employee-list.html",controller:"EmployeesCtrl",resolve:{employees:["EmployeeService",function(a){return a.getList()}]},title:"Staff",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR",fixedBar:!0}).when("/employees/add",{templateUrl:"views/partials/employees/employee-edit-form.html",controller:"EmployeeFormCtrl",resolve:{employee:["EmployeeService",function(a){return a["new"]()}],venues:["VenueService",function(a){return a.getList()}]},title:"Add Staff",backUrl:"/employees",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR",fixedBar:!0}).when("/employees/edit/:id",{templateUrl:"views/partials/employees/employee-edit-form.html",controller:"EmployeeFormCtrl",resolve:{employee:["EmployeeService","$route",function(a,b){return a.getById(b.current.params.id,{full:!1}).then(function(a){return a.type="Merchant",a})}],venues:["VenueService",function(a){return a.getList()}]},title:"Edit Staff",backUrl:"/employees",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR",fixedBar:!0}).when("/venues/:venueId/employees/edit/:id",{templateUrl:"views/partials/employees/employee-edit-form.html",controller:"EmployeeFormCtrl",resolve:{employee:["EmployeeService","$route",function(a,b){return a.getById(b.current.params.id,{full:!1}).then(function(a){return a.type="Venue",a.venueId=b.current.params.venueId,a})}],venues:["VenueService",function(a){return a.getList()}]},title:"Edit Staff",backUrl:"/employees",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR",fixedBar:!0}).when("/products",{templateUrl:"views/product-list2.html",controller:"ProductsCtrl",resolve:{venue:["VenueService","$rootScope",function(a,b){return a.getById(b.credentials.venue.id)}],merchant:["MerchantService","$rootScope",function(a,b){return a.getById(b.credentials.merchant.id)}],venues:["VenueService","$rootScope",function(a,b){return a.getList(b.credentials.merchant.id)}],categories:["VenueService","$rootScope",function(a,b){return a.getVenueCategories(b.credentials.venue.id)}],products:["VenueService","ProductService","$rootScope",function(a,b,c){return a.getVenueCategories(c.credentials.venue.id).then(function(a){return angular.isArray(a)&&a.length?b.getListByCategory(c.credentials.venue.id,a[0].id):[]})}],sections:["VenueService","$rootScope","$route",function(a,b){return a.getVenueSections(b.credentials.venue.id)}]},title:"Products",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/venues/:id/products",{templateUrl:"views/product-list2.html",controller:"ProductsCtrl",resolve:{venue:["VenueService","$rootScope","$route",function(a,b,c){return a.getById(c.current.params.id,{full:!1})}],merchant:["MerchantService","$rootScope","$route",function(a,b){return a.getById(b.credentials.merchant.id,{full:!1})}],venues:["VenueService","$rootScope","$route",function(a,b){return a.getList(b.credentials.merchant.id,{full:!1})}],categories:["VenueService","$rootScope","$route",function(a,b,c){return a.getVenueCategories(c.current.params.id)}],products:["VenueService","ProductService","$rootScope","$route",function(a,b,c,d){return a.getVenueCategories(d.current.params.id).then(function(a){return angular.isArray(a)&&a.length?b.getListByCategory(d.current.params.id,a[0].id):[]})}],sections:["VenueService","$rootScope","$route",function(a,b){return a.getVenueSections(b.credentials.venue.id)}]},title:"Products",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/venues/:id/products/category/:categoryId",{templateUrl:"views/product-list2.html",controller:"ProductsCtrl",resolve:{venue:["VenueService","$rootScope","$route",function(a,b,c){return a.getById(c.current.params.id,{full:!1})}],merchant:["MerchantService","$rootScope","$route",function(a,b){return a.getById(b.credentials.merchant.id,{full:!1})}],venues:["VenueService","$rootScope","$route",function(a,b){return a.getList(b.credentials.merchant.id,{full:!1})}],categories:["VenueService","$rootScope","$route",function(a,b,c){return a.getVenueCategories(c.current.params.id)}],products:["VenueService","ProductService","$rootScope","$route",function(a,b,c,d){var e;return e=d.current.params.categoryId,e?b.getListByCategory(d.current.params.id,e):a.getVenueCategories(d.current.params.id).then(function(a){return angular.isArray(a)&&a.length?b.getListByCategory(d.current.params.id,a[0].id):[]})}],sections:["VenueService","$rootScope","$route",function(a,b){return a.getVenueSections(b.credentials.venue.id)}]},title:"Products",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/venues/:venueId/products/edit/:id",{templateUrl:"views/partials/products/product-edit-form2.html",controller:"ProductFormCtrl",resolve:{product:["ProductService","$route",function(a,b){return a.getById(b.current.params.venueId,b.current.params.id)}],categories:["VenueService","$rootScope","$route",function(a,b,c){return a.getVenueCategories(c.current.params.venueId)}],sections:["VenueService","$rootScope","$route",function(a,b){return a.getVenueSections(b.credentials.venue.id)}]},backUrl:"/products",title:"Edit Product",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/venues/:venueId/products/duplicate/:id",{templateUrl:"views/partials/products/product-edit-form2.html",controller:"ProductFormCtrl",resolve:{product:["ProductService","$route",function(a,b){return a.getById(b.current.params.venueId,b.current.params.id).then(function(c){return a.getListByCategory(b.current.params.venueId,c.category).then(function(a){var b,d;return d=_.filter(a,function(a){return a.title.startsWith(c.title)}),c.title=c.title+" #"+d.length,delete c.id,delete c.version,delete c.created,b=["id","version","created"],_.forEach(c.images,function(a){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(delete a[c]);return f}),_.forEach(c.modifiers,function(a){var c,d,e;for(d=0,e=b.length;e>d;d++)c=b[d],delete a[c];return _.forEach(a.variants,function(a){var d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(delete a[c]);return f})}),c})})}],categories:["VenueService","$rootScope","$route",function(a,b,c){return a.getVenueCategories(c.current.params.venueId)}],sections:["VenueService","$rootScope","$route",function(a,b){return a.getVenueSections(b.credentials.venue.id)}]},backUrl:"/products",title:"Edit Product",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/venues/:venueId/products/category/:categoryId/add",{templateUrl:"views/partials/products/product-edit-form2.html",controller:"ProductFormCtrl",resolve:{product:["ProductService","$route",function(a){return a["new"]()}],categories:["VenueService","$rootScope","$route",function(a,b,c){return a.getVenueCategories(c.current.params.venueId)}],sections:["VenueService","$rootScope","$route",function(a,b){return a.getVenueSections(b.credentials.venue.id)}]},backUrl:"/products",title:"Add Product",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/discounts",{templateUrl:"views/discount-list.html",controller:"DiscountsCtrl",resolve:{venues:["VenueService","$rootScope","$route",function(a,b){return a.getList(b.credentials.merchant.id,{full:!1})}],discounts:["DiscountService",function(a){return a.getList()}]},title:"Discounts",secured:!0,fixedBar:!0}).when("/discounts/add",{templateUrl:"views/partials/discounts/discount-edit-form.html",controller:"DiscountFormCtrl",resolve:{discount:["DiscountService",function(a){return a["new"]()}]},title:"Add Discount",backUrl:"/discounts",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/discounts/edit/:id",{templateUrl:"views/partials/discounts/discount-edit-form.html",controller:"DiscountFormCtrl",resolve:{discount:["DiscountService","$route",function(a,b){return a.getById(b.current.params.id,{full:!1})}]},title:"Edit Discount",backUrl:"/discounts",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR",fixedBar:!0}).when("/reports",{templateUrl:"views/smart-report.html",controller:"SmartReportCtrl",resolve:{report:["$location","Report",function(a,b){var c;return c={},null!=a.search()["pos.uuid"]&&(c.pos=a.search()["pos.uuid"]),b.get(c).$promise}],payments:["Payments",function(){return function(a){return a.query().$promise}}(this)]},title:"smartReport",secured:!0}).when("/reports/products",{templateUrl:"views/product-report.html",controller:"ProductReportCtrl",resolve:{report:["$location","Report",function(a,b){var c;return c={},b.get(c).$promise}]},title:"Product report",secured:!0}).when("/reports/sold-stock",{templateUrl:"views/sold-stock-report.html",controller:"SoldStockReportCtrl",resolve:{report:["$location","Report",function(a,b){var c;return c={type:"SOLD_STOCK"},null!=a.search()["pos.uuid"]&&(c.pos=a.search()["pos.uuid"]),b.get(c).$promise}]},title:"Sold stock report",secured:!0}).when("/reports/compare",{templateUrl:"views/comparison-report.html",controller:"ComparisonReportCtrl",resolve:{report1:["Report",function(a){var b,c;return b=moment().subtract("days",7).startOf("day"),c=moment().subtract("days",6).startOf("day"),a.get({from:b.format("YYYY-MM-DDTHH:mm"),to:c.format("YYYY-MM-DDTHH:mm")}).$promise}],report2:["Report",function(a){return a.get().$promise}]},title:"Comparison report",secured:!0}).when("/reports/cpr",{templateUrl:"views/cpr-report.html",controller:"CPRReportCtrl",resolve:{venues:["VenueService","$rootScope","$route",function(a,b){return a.getList(b.credentials.merchant.id,{full:!1})}],POSList:["$location","POSService","$rootScope",function(a,b,c){var d,e;return d=null!=(e=a.search().venueId)?e:c.credentials.venue.id,b.getList(d)}],POSName:["$location",function(a){return null!=a.search().pos?a.search().pos:void 0}],venue:["$location","$rootScope","VenueService",function(a,b,c){return null!=a.search().venueId?c.getById(a.search().venueId,{full:!1}):b.credentials.venue}],report:function(){return{}}},title:"Closing POS Report",backUrl:"/reports/cpr-history",secured:!0}).when("/reports/venue/:venueId/cpr/:id",{templateUrl:"views/cpr-report.html",controller:"CPRReportCtrl",resolve:{venues:["VenueService","$rootScope","$route",function(a,b){return a.getList(b.credentials.merchant.id,{full:!1})}],POSList:["$location","POSService","$rootScope",function(a,b,c){var d,e;return d=null!=(e=a.search().venueId)?e:c.credentials.venue.id,b.getList(d)}],POSName:["$route","POSService",function(){return""}],venue:["$route","VenueService",function(a,b){return b.getById(a.current.params.venueId,{full:!1})}]},title:"Closing POS Report",backUrl:"/reports/cpr-history",secured:!0}).when("/reports/cpr-history",{templateUrl:"views/cpr-history.html",controller:"CPRReportHistoryCtrl",resolve:{CPRList:["ReportsService","$rootScope",function(a){return a.getPagedCPRList()}]},title:"Closing POS Report History",secured:!0}).when("/reports/sales-transaction-history",{templateUrl:"views/sales-transaction-history.html",controller:"SalesTransactionHistoryCtrl",title:"Sales Transaction History",secured:!0}).when("/timesheets",{templateUrl:"views/timesheets.html",controller:"TimesheetsCtrl",resolve:{startDate:function(){return moment().startOf("day")},endDate:function(){return moment().startOf("day")},venues:["VenueService","$rootScope","$route",function(a,b){return a.getList(b.credentials.merchant.id,{full:!1})}],timesheets:["Timesheet",function(a){return a.query({from:moment().startOf("day").format("YYYY-MM-DDTHH:mm"),to:moment().add("days",1).startOf("day").format("YYYY-MM-DDTHH:mm")}).$promise}],shifts:["Shift",function(a){return a.query({from:moment().format("YYYY-MM-DD"),to:moment().add("days",1).format("YYYY-MM-DD"),status:"ENDED"}).$promise}]},title:"Staff timesheets",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/social",{templateUrl:"views/social.html",controller:"SocialCtrl",resolve:{tools:["Tool",function(a){return a.query().$promise}],venues:["VenueService","$rootScope","$route",function(a,b){return a.getList(b.credentials.merchant.id,{full:!1})}]},title:"smartSocial",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/tools",{templateUrl:"views/tools.html",controller:"ToolsCtrl",resolve:{tools:["Tool",function(a){return a.query().$promise}],venues:["VenueService","$rootScope","$route",function(a,b){return a.getList(b.credentials.merchant.id,{full:!1})}]},title:"smartTools",secured:!0,role:"PERM_MERCHANT_ADMINISTRATOR"}).when("/orders",{templateUrl:"views/orders.html",controller:"OrdersCtrl",resolve:{orders:["Order",function(a){return a.query({from:"1970-01-01T00:00"})}]},title:"smartOrders",secured:!0,role:"PERM_PLATFORM_ADMINISTRATOR"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",title:"Login",secured:!1}).when("/forgottenPassword",{templateUrl:"views/forgotten-password.html",controller:"ForgottenPasswordCtrl",title:"Forgotten Password",secured:!1}).when("/resetToken",{templateUrl:"views/reset-token.html",controller:"ResetTokenCtrl",title:"Reset Password",resolve:{token:["$location",function(a){var b;return null!=a.search().r?b=a.search().r:void 0}]},secured:!1}).when("/invalid-env",{templateUrl:"views/invalid-env.html",title:"Invalid Environment"}).when("/not-found",{templateUrl:"views/404.html",title:"Not found"}).when("/forbidden",{templateUrl:"views/403.html",title:"Not found"}).when("/oauth/:provider/:token",{template:'<div class="alert alert-success">Storing <em>OAuth</em> token&hellip;</div>',controller:"OAuthCtrl",resolve:{tools:["Tool",function(a){return a.query().$promise}]},secured:!0}).when("/user-guide",{templateUrl:"views/user-guide.html",title:"User guide",secured:!1}).when("/ui-tests",{templateUrl:"views/ui-tests.html",controller:"UITestsCtrl",title:"UI Tests",secured:!1}).when("/",{templateUrl:"views/faq.html",secured:!0}).otherwise({redirectTo:"/not-found"}),c.interceptors.push("apiInterceptor")}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").run(["$rootScope","$location","$route","$timeout","$window","Config","Auth","editableOptions",function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o;return a.messages=[],a.showMessages=!1,a.online=navigator.onLine,null!=b.search()["pos.version"]&&(a.posVersion=b.search()["pos.version"]),e.addEventListener("offline",function(){a.$apply(function(){a.online=!1})},!1),e.addEventListener("online",function(){a.$apply(function(){a.online=!0})},!1),a.$on("$routeChangeStart",function(c,d){var e,f,h,i;return a.secured=null!=(e=d.$$route)?e.secured:void 0,a.route=d,(null!=(f=d.$$route)?f.secured:void 0)&&!g.isLoggedIn()?b.path("/login"):g.isLoggedIn()&&null!=(null!=(h=d.$$route)?h.role:void 0)&&!g.hasRole(null!=(i=d.$$route)?i.role:void 0)&&"browser"===a.mode?b.path("/forbidden"):void 0}),a.$on("$routeChangeSuccess",function(b,c){var d,e,f;return a.messages=[],a.showMessages=!1,a.overwriteBackUrl=!1,a.title=null!=(d=c.$$route)?d.title:void 0,null!=(null!=(e=c.$$route)?e.backUrl:void 0)?a.backUrl=null!=(f=c.$$route)?f.backUrl:void 0:void 0}),a.back=function(b){return b&&(a.backUrl=b),d(function(){return window.location.href="#"+a.backUrl},100)},a.mode=f.mode(),a.iOSDevice=!!navigator.platform.match(/iPhone|iPod|iPad/),a.supportedInfo=kendo.support,a.isTablet=function(){return a.supportedInfo.mobileOS&&a.supportedInfo.mobileOS.tablet},a.isMobile=function(){return a.supportedInfo.mobileOS},a.crudServiceBaseUrl="api://api",h.theme="bs3",g.init(),(null!=(j=a.credentials)&&null!=(k=j.venue)?k.locale:void 0)&&(a.credentials.venue.locale=null!=(l=a.credentials)&&null!=(m=l.venue)?m.locale.replace("_","-"):void 0),i=b.search().locale||(null!=(n=a.credentials)&&null!=(o=n.venue)?o.locale:void 0)||e.navigator.userLanguage||e.navigator.language,g.setLocale(i),a.$localeService=g.getLocaleService(),OAuth.initialize("mlUjjtrYAO4sT4G08XkeIzX0oZA"),OAuth.callback("foursquare",function(a,c){return angular.isDefined(c)?b.path("/oauth/foursquare/"+c.access_token):void 0}),OAuth.callback("facebook",function(a,c){return angular.isDefined(c)?b.path("/oauth/facebook/"+c.access_token):void 0}),("undefined"!=typeof Modernizr&&null!==Modernizr?Modernizr.touch:void 0)?$(function(){return FastClick.attach(document.body)}):void 0}]).value("localeConf",{basePath:"languages",defaultLocale:"en-GB",sharedDictionary:"common",fileExtension:".lang.json",persistSelection:!1,cookieName:"COOKIE_LOCALE_LANG",observableAttrs:new RegExp("^data-(?!ng-|i18n)"),delimiter:"::"}).value("localeSupported",["en-GB","es-ES"]).value("localeFallbacks",{en:"en-GB",es:"es-ES"})}.call(this),function(){"use strict";angular.module("smartRegisterApp").constant("environments",Object.freeze({development:{baseURL:"http://dev-java.mycircleinc.net"},test:{baseURL:"http://platform-test.amazon.mycircleinc.net"},staging:{baseURL:"https://platform-staging.mycircleinc.com"},demo:{baseURL:"https://platform-demo.mycircleinc.com"},trial:{baseURL:"https://platform-trial.mycircleinc.com"},live:{baseURL:"https://platform-live.mycircleinc.com"}}))}.call(this),function(){"use strict";var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("smartRegisterApp").factory("apiInterceptor",["$q","$rootScope","$location","$timeout","$filter","Config","MessagingService",function(b,c,d,e,f,g,h){return{request:function(a){var b,d;return h.resetMessages(),0===a.url.indexOf("api:/")&&(a.url=a.url.replace(/^api:\//,g.baseURL()),a.isApiCall=!0,b=JSON.parse(localStorage.getItem("credentials")),null!=(null!=b?b.token:void 0)&&null==a.headers.Authorization&&(d=f("hmacSha256")(""+b.token+":"+b.email,b.token),a.headers.Authorization="Token "+d,a.headers["X-Session-Id"]=b.token)),a.headers||(a.headers={}),a.headers["X-Merchant-Dashboard-Version"]=c.currentVersion,a},responseError:function(e){var f,g,i,j,k,l,m;if(e.config.isApiCall)switch(!1){case 401!==e.status:c.retryPath=d.path(),c.credentials=null,d.path("/login");break;case i=e.status,a.call(function(){for(m=[],g=500;599>=g;g++)m.push(g);return m}.apply(this),i)<0:c.$broadcast("apiConnectionError");break;case 0!==e.status:break;default:c.errors=null!=(j=null!=(k=e.data)?k.errors:void 0)?j:[],null!=c.errors&&(angular.forEach(c.errors,function(a,b){var d,e,f;return d=c.errors[b],angular.isArray(d)&&(f=d[0]),e=h.createMessage("error",f,"GlobalErrors"),h.addMessage(e)}),null!=(null!=(l=e.data)?l.message:void 0)&&(h.resetMessages(),f=h.createMessage("error",e.data.message,"GlobalErrors"),h.addMessage(f))),h.hasMessages("GlobalErrors"),console.error("Got error "+e.status,e.config.method,e.config.url)}return b.reject(e)}}}])}.call(this),function(){"use strict";var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("smartRegisterApp").factory("Config",["$rootScope","$location","environments",function(b,c,d){return{baseURL:function(){var a;return this._overrideFromQueryString("env"),this._reverseLookupEnvFromBaseURL(),this._defaultEnvFromHost(),this._rejectInvalidEnv(),null!=(a=d[b.env])?a.baseURL:void 0},mode:function(){var a;return this._overrideFromQueryString("mode"),null!=(a=b.mode)?a:"browser"},_overrideFromQueryString:function(a){var d;return d=c.search()[a],d?b[a]=d:void 0},_reverseLookupEnvFromBaseURL:function(){var a;return a=c.search().baseURL,null!=a?b.env=_.find(_.keys(d),function(b){return d[b].baseURL===a}):void 0},_defaultEnvFromHost:function(){var a;return"localhost"===c.host()?b.env="staging":"imac.mycircleinc.net"===c.host()?b.env="test":"merchant.mycircleinc.com"===c.host()?b.env="live":(a=/^merchant[\.-](\w+)\./.exec(c.host()),null!=a?b.env=a[1]:void 0)},_rejectInvalidEnv:function(){var e;return e=b.env,a.call(_.keys(d),e)<0?(console.warn("Invalid environment '"+b.env+"'"),delete b.env,c.path("/invalid-env")):void 0}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Colors",[function(){return{lightness:function(a){var b,c,d,e,f;return f=parseInt(a.substr(1,2),16)/255,c=parseInt(a.substr(3,2),16)/255,b=parseInt(a.substr(5,2),16)/255,d=Math.max(f,c,b),e=Math.min(f,c,b),(d+e)/2},contrastColor:function(a,b,c,d){return null==b&&(b="#ffffff"),null==c&&(c="#333333"),null==d&&(d=.4),this.lightness(a)<d?b:c}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("SettingsService",["$rootScope",function(a){return{getModules:function(){return{multivenue:{enabledEnv:{development:!0,test:!0,staging:!0,demo:!0,trial:!1,live:!0}}}},hasModuleEnabled:function(b){return this.getModules()[b].enabledEnv[a.env]}}}])}.call(this),function(){"use strict";angular.module("API",["restangular"]).config(["RestangularProvider",function(a){a.setBaseUrl("api://api")}]),angular.module("API").factory("ResourceWithPaging",["Restangular",function(a){var b;return b=a.withConfig(function(a){return a.setResponseExtractor(function(a,b){var c,d,e,f;return"getList"===b?(c=null!=(d=a.content)?d:[],c.page=null!=(e=a.page)?e:{},c.links=null!=(f=a.links)?f:{},c):a})})}]),angular.module("API").factory("ResourceNoPaging",["$rootScope","Restangular",function(a,b){var c;return c=b.withConfig(function(a){return a.setResponseExtractor(function(a,b){var c;return"getList"===b&&angular.isObject(a)?(c=[],angular.forEach(a,function(a){return c.push(a)}),c):a})})}])}.call(this),function(){angular.module("smartRegisterApp").factory("ProductService",["$rootScope","ResourceNoPaging","SettingsService","Auth",function(a,b){return{"new":function(c){var d,e;return d=b.one("merchants",null!=(e=a.credentials.merchant)?e.id:void 0).one("venues").one("venues",c).one("products"),d.tax=.2,d.altTax=.2,d.modifiers=[],d},getListByCategory:function(c,d,e){var f,g,h,i;return c=null!=c?c:null!=(f=a.credentials)&&null!=(g=f.venue)?g.id:void 0,e=null!=e?e:{},b.one("merchants",null!=(h=a.credentials)&&null!=(i=h.merchant)?i.id:void 0).one("venues",c).one("categories",d).getList("products")},getById:function(c,d,e){var f,g;return c=null!=c?c:null!=(f=a.credentials)&&null!=(g=f.venue)?g.id:void 0,e=null!=e?e:{},b.one("merchants",a.credentials.merchant.id).one("venues",c).one("products",d).get(e)},save:function(c,d){var e,f;return d.id?d.save():b.one("merchants",null!=(e=a.credentials)&&null!=(f=e.merchant)?f.id:void 0).one("venues",c).post("products",d)},batchSave:function(c,d){var e,f;return d.length?b.one("merchants",null!=(e=a.credentials)&&null!=(f=e.merchant)?f.id:void 0).one("venues",c).one("products").customPUT(d):void 0},remove:function(c){var d,e,f,g;return b.one("merchants",null!=(f=a.credentials)&&null!=(g=f.merchant)?g.id:void 0).one("venues",null!=(d=a.credentials)&&null!=(e=d.venue)?e.id:void 0).one("products",c.id).remove()}}}])}.call(this),function(){angular.module("smartRegisterApp").factory("MerchantService",["$rootScope","ResourceWithPaging","ResourceNoPaging","$route",function(a,b,c,d){return{"new":function(){var a;return a=c.one("merchants"),a.enabled=!0,a.venues=[{address:{country:{numericCode:826},isAddressFor:"ALL"},contacts:[{type:"NAME",value:""},{type:"PHONE",value:""},{type:"EMAIL",value:""}]}],a.employees=[{enabled:!0,credentials:[{type:"EMAIL"}],groups:[{name:"MERCHANT_ADMINISTRATORS"}]}],a},getPagedList:function(a){var c,e,f;return angular.isObject(a)||(a={page:null!=(c=d.current.params.page)?c:null,size:null!=(e=d.current.params.size)?e:null,sort:null!=(f=d.current.params.sort)?f:null}),b.all("merchants").getList(a)},getList:function(){return c.all("merchants").all("list").getList()},getById:function(b,d){return b=null!=b?b:a.credentials.merchant.id,d=null!=d?d:{full:!1},c.one("merchants",b).get(d)},save:function(a){return a.id?a.save():c.all("merchants").post(a)},remove:function(a){return a.remove()}}}])}.call(this),function(){angular.module("smartRegisterApp").factory("CategoryService",["$rootScope","ResourceNoPaging",function(a,b){return{getList:function(c,d){var e,f,g,h;return c=null!=c?c:null!=(e=a.credentials)&&null!=(f=e.venue)?f.id:void 0,d=null!=d?d:{},b.one("merchants",null!=(g=a.credentials)&&null!=(h=g.merchant)?h.id:void 0).one("venues",c).getList("categories",d)},getById:function(c,d,e){var f,g;return c=null!=c?c:null!=(f=a.credentials)&&null!=(g=f.venue)?g.id:void 0,e=null!=e?e:{},b.one("merchants",a.credentials.merchant.id).one("venues",c).one("categories",d).get(e)},save:function(c,d){var e,f;return d.id?(d=b.copy(d),d.save()):b.one("merchants",null!=(e=a.credentials)&&null!=(f=e.merchant)?f.id:void 0).one("venues",c).post("categories",d)},remove:function(a){return a=b.copy(a),a.remove()}}}])}.call(this),function(){angular.module("smartRegisterApp").factory("VenueService",["$rootScope","ResourceNoPaging","SettingsService","Auth",function(a,b,c,d){return{"new":function(){var c,d;return c=b.one("merchants",null!=(d=a.credentials.merchant)?d.id:void 0).one("venues"),c.address={country:{numericCode:826},isAddressFor:"ALL"},c.contacts=[{type:"PHONE"}],c.sections=[],c},getVenueContactByType:function(a,b){return _.find(a.contacts,function(a){return a.type===b})},getSectionById:function(a,b){return _.find(a.sections,function(a){return a.id===b})},isExistingSection:function(a,b){return _.filter(a.sections,function(a){return a.name===b})},getGridList:function(c,d){var e,f,g;return c=null!=c?c:null!=(f=a.credentials)&&null!=(g=f.merchant)?g.id:void 0,d=null!=d?d:{},e=[],b.one("merchants",c).getList("venues",d).then(function(a){return angular.forEach(a,function(a){var b,c,d,f,g;return b=_.find(a.contacts,function(a){var b;return null!=(b="EMAIL"===a.type)?b:""}),d=_.find(a.contacts,function(a){var b;return null!=(b="PHONE"===a.type)?b:""}),c={id:a.id,name:a.name,postcode:a.address.postCode,email:null!=(f=null!=b?b.value:void 0)?f:"",phone:null!=(g=null!=d?d.value:void 0)?g:""},e.push(c)}),e})},getList:function(c,d){var e,f;return c=null!=c?c:null!=(e=a.credentials)&&null!=(f=e.merchant)?f.id:void 0,d=null!=d?d:{},b.one("merchants",c).all("venues").getList(d)},getById:function(c,d){var e,f,g,h,i;return c=null!=c?c:null!=(f=a.credentials)&&null!=(g=f.venue)?g.id:void 0,d=null!=d?d:{full:!0},e=null,b.one("merchants",null!=(h=a.credentials)&&null!=(i=h.merchant)?i.id:void 0).one("venues",c).get(d).then(function(a){return e=a,e.sections||(e.sections=[]),e})},getVenueCategories:function(c,d){var e,f,g,h;return c=null!=c?c:null!=(e=a.credentials)&&null!=(f=e.venue)?f.id:void 0,d=null!=d?d:{},b.one("merchants",null!=(g=a.credentials)&&null!=(h=g.merchant)?h.id:void 0).one("venues",c).getList("categories",d)},getVenueSections:function(a){return this.getById(a).then(function(a){return null!=a?a.sections:void 0})},getVenueProducts:function(c,d){var e,f,g,h;return c=null!=c?c:null!=(e=a.credentials)&&null!=(f=e.venue)?f.id:void 0,d=null!=d?d:{},b.one("merchants",null!=(g=a.credentials)&&null!=(h=g.merchant)?h.id:void 0).one("venues",c).getList("products",d)},getVenueProductsByCategory:function(c,d,e){var f,g,h,i;return c=null!=c?c:null!=(f=a.credentials)&&null!=(g=f.venue)?g.id:void 0,e=null!=e?e:{},b.one("merchants",null!=(h=a.credentials)&&null!=(i=h.merchant)?i.id:void 0).one("venues",c).one("categories",d).getList("products",e)},save:function(c){var d,e;return c.id?(c=b.copy(c),c.save()):b.one("merchants",null!=(d=a.credentials)&&null!=(e=d.merchant)?e.id:void 0).post("venues",c)},remove:function(a){return a=b.copy(a),a.remove()},canAddVenue:function(){return c.hasModuleEnabled("multivenue")&&d.hasRole("PERM_MERCHANT_ADMINISTRATOR")},duplicate:function(c){var d,e,f,g,h,i;return d=null!=(e=null!=c?c.id:void 0)?e:null!=(f=a.credentials)&&null!=(g=f.venue)?g.id:void 0,b.one("merchants",null!=(h=a.credentials)&&null!=(i=h.merchant)?i.id:void 0).one("venues",d).customPOST("","clone")}}}])}.call(this),function(){angular.module("smartRegisterApp").factory("POSService",["$rootScope","ResourceNoPaging","SettingsService","Auth",function(a,b,c,d){return{getList:function(c,e){var f,g,h;return c=null!=c?c:null!=(f=a.credentials)&&null!=(g=f.venue)?g.id:void 0,e=null!=e?e:{},b.one("merchants",null!=(h=d.getMerchant())?h.id:void 0).one("venues",c).getList("pos",e)},getById:function(a){var c;return b.one("merchants",null!=(c=d.getMerchant())?c.id:void 0).one("venues",venueId).one("pos",a).get()},getByName:function(a){return this.getList().then(function(b){return _.filter(b,function(b){return b.name===a})})},getPosValues:function(c,e){var f,g,h;return c=null!=c?c:null!=(f=a.credentials)&&null!=(g=f.venue)?g.id:void 0,e=null!=e?e:{},b.one("merchants",null!=(h=d.getMerchant())?h.id:void 0).one("venues",c).one("pos").one("values").get(e)}}}])}.call(this),function(){angular.module("smartRegisterApp").factory("EmployeeService",["$rootScope","$http","ResourceWithPaging","ResourceNoPaging","MessagingService",function(a,b,c,d,e){return{"new":function(){var b,c;return b=d.one("merchants",null!=(c=a.credentials.merchant)?c.id:void 0).one("employees"),b.enabled=!0,b.credentials=[{type:"PIN"}],b.groups=[{name:"MERCHANT_EMPLOYEE"}],b},getGridListByVenue:function(b,c){var e,f,g,h,i;return f=null!=(g=a.credentials)&&null!=(h=g.merchant)?h.id:void 0,b=null!=b?b:null!=(i=a.credentials)?i.venue:void 0,c=null!=c?c:{},e=[],d.one("merchants",f).one("venues",b.id).getList("employees",c).then(function(a){return angular.forEach(a,function(a){var c,d;return c="Active",a.enabled||(c="Active"),d={id:a.id,firstname:a.firstname,lastname:a.lastname,displayname:a.displayName,venueName:b.name,email:a.email,active:c},e.push(d)}),e})},getList:function(b,c){var e,f;return b=null!=b?b:null!=(e=a.credentials)&&null!=(f=e.merchant)?f.id:void 0,c=null!=c?c:{},d.one("merchants",b).getList("employees",c)},getGridList:function(b,c){var e,f,g;return b=null!=b?b:null!=(f=a.credentials)&&null!=(g=f.merchant)?g.id:void 0,c=null!=c?c:{},e=[],d.one("merchants",b).getList("employees",c).then(function(a){return angular.forEach(a,function(a){var b,c;return b="Active",a.enabled||(b="Active"),c={id:a.id,firstname:a.firstname,lastname:a.lastname,displayname:a.displayName,email:a.email,active:b},e.push(c)
}),e})},getById:function(b,c){var e,f;return c=null!=c?c:{full:!0},d.one("merchants",null!=(e=a.credentials)&&null!=(f=e.merchant)?f.id:void 0).one("employees",b).get()},save:function(b){var c,e,f;return c=_.findWhere(b.credentials,{type:"PIN"}),null==b.credentials||c.value||delete b.credentials,b.id?(b=d.copy(b),b.save()):d.one("merchants",null!=(e=a.credentials)&&null!=(f=e.merchant)?f.id:void 0).post("employees",b)},remove:function(a){return a=d.copy(a),a.remove()},isInGroup:function(a,b){return null!=_.findWhere(a.groups,{name:b})},resetToken:function(a,b){var c,e;return e={reference:a,password:b},c="merchants/employees/token/reset",d.allUrl(c).customPUT(e)},requestPasswordReset:function(a){var c,d;return d={email:a},c="api://api/merchants/employees/token/forgot",b({method:"PUT",url:c,data:d}).success(function(a){return a}).error(function(a){var b;return b=e.createMessage("error",a.message,"ForgottenPassword"),e.addMessage(b),e.hasMessages("ForgottenPassword")})}}}])}.call(this),function(){angular.module("smartRegisterApp").factory("MessagingService",["$rootScope","$filter",function(a){return{resetMessages:function(){return a.showMessages=!1,a.messages=[],a.filteredMessages=[]},createMessage:function(a,b,c,d,e){return b={type:a,text:b,group:c,linkUrl:d,linkText:e}},addMessage:function(b){return a.messages.push(b)},removeMessage:function(b){var c;return c=a.messages.indexOf(b),a.messages.splice(c,1)},hasMessages:function(b){return null!=b?(a.filteredMessages=this.getMessagesByGroup(b),a.showMessages=!0):a.filteredMessages=a.messages,a.showMessages=a.filteredMessages.length?!0:!1,a.filteredMessages},hasErrors:function(){var b;return b=this.getMessagesByType("error"),b.length&&(a.showMessages=!0),b},getLocalizedMessage:function(b,c){return a.$localeService.ready("messages").then(function(){return a.$localeService.getString(b,c)})},getMessagesByType:function(b){return a.filteredMessages=_.filter(a.messages,function(a){return a.type===b})},getMessagesByValue:function(b){return a.filteredMessages=_.filter(a.messages,function(a){return a.message===b})},getMessagesByGroup:function(b){return _.filter(a.messages,function(a){return a.group===b})}}}])}.call(this),function(){angular.module("smartRegisterApp").factory("DiscountService",["$rootScope","$http","ResourceWithPaging","ResourceNoPaging","MessagingService",function(a,b,c,d){return{"new":function(){var b,c,e;return b=d.one("merchants",null!=(e=a.credentials.merchant)?e.id:void 0).one("venues",null!=(c=a.credentials.venue)?c.id:void 0).one("discounts"),b.value=0,b.groups=[],b},getList:function(b,c){var e,f,g,h,i;return e=null!=(f=a.credentials)&&null!=(g=f.merchant)?g.id:void 0,b=null!=b?b:null!=(h=a.credentials)&&null!=(i=h.venue)?i.id:void 0,c=null!=c?c:{},d.one("merchants",e).one("venues",b).getList("discounts",c)},getById:function(b,c){var e,f,g;return c=null!=c?c:{full:!0},d.one("merchants",null!=(f=a.credentials)&&null!=(g=f.merchant)?g.id:void 0).one("venues",null!=(e=a.credentials.venue)?e.id:void 0).one("discounts",b).get().then(function(a){var b;return b=a,a.groups||(b.groups=[]),b})},save:function(b){var c,e,f;return b.id?(b=d.copy(b),b.save()):d.one("merchants",null!=(e=a.credentials)&&null!=(f=e.merchant)?f.id:void 0).one("venues",null!=(c=a.credentials.venue)?c.id:void 0).post("discounts",b)},remove:function(a){return a=d.copy(a),a.remove()}}}])}.call(this),function(){angular.module("smartRegisterApp").factory("ImageService",["$http","$rootScope","$filter","Auth","ResourceNoPaging",function(a,b,c,d,e){return{getS3Config:function(){return e.one("platform").one("s3images").get()},uploadToS3:function(a){var b;return b=$(".image-uploader"),console.log(a)}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("ValidationService",["$rootScope","MessagingService",function(a){return{validate:function(b){return a.$broadcast("validate-data:validate",b)},reset:function(){return a.$broadcast("validate-data:reset")},isRequired:function(a){return a=String(a),"undefined"!==a&&angular.isString(a)&&a.length},isNumeric:function(a){return angular.isNumber(Number(a))},isEmail:function(a){var b;return b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,b.test(a)},isMatch:function(a,b){return angular.equals(a,b)},isPostcode:function(a){var b;return b=/^(([gG][iI][rR] {0,}0[aA]{2})|((([a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y]?[0-9][0-9]?)|(([a-pr-uwyzA-PR-UWYZ][0-9][a-hjkstuwA-HJKSTUW])|([a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y][0-9][abehmnprv-yABEHMNPRV-Y]))) {0,}[0-9][abd-hjlnp-uw-zABD-HJLNP-UW-Z]{2}))$/,b.test(a)}}}])}.call(this),function(){angular.module("smartRegisterApp").factory("ReportsService",["$rootScope","$q","$http","$timeout","$route","ResourceWithPaging","ResourceNoPaging","Auth","POSService","MessagingService",function(a,b,c,d,e,f,g,h,i,j){return{getPagedCPRList:function(b,c){var d,g,i,j,k,l;return b=null!=b?b:null!=(d=a.credentials)&&null!=(g=d.venue)?g.id:void 0,angular.isObject(c)||(c={page:null!=(i=e.current.params.page)?i:null,size:null!=(j=e.current.params.size)?j:null,sort:null!=(k=e.current.params.sort)?k:null}),f.one("merchants",null!=(l=h.getMerchant())?l.id:void 0).one("venues",b).one("reports").all("cprs").getList(c)},saveCPR:function(a){var d,e;return e=b.defer(),d="api://api/merchants/"+a.merchantId+"/venues/"+a.venueId+"/reports/cpr",delete a.vatSummaryDetails,delete a.calculated,delete a.created,delete a.apiVersion,c({url:d,method:"POST",data:a}).success(function(a){return e.resolve(a),e.promise}).error(function(a){var b;return b=j.createMessage("error",a.message,"CPRReport"),j.resetMessages(),j.addMessage(b),j.hasMessages("CPRReport")})},getSavedCPR:function(a,b){var c;return g.one("merchants",null!=(c=h.getMerchant())?c.id:void 0).one("venues",a).one("reports").one("cprs",b).get()},getPagedOrderList:function(b,c){var d,e,g,i,j,k,l,m;return b=null!=b?b:null!=(e=a.credentials)&&null!=(g=e.venue)?g.id:void 0,d={page:null!=(i=c.data.page-1)?i:null,size:null!=(j=c.data.pageSize)?j:null},null!=(null!=(k=c.data)?k.sort:void 0)&&angular.forEach(c.data.sort,function(a){return d.sort=""+a.field+","+a.dir}),null!=(null!=(l=c.data)?l.filter:void 0)&&angular.forEach(c.data.filter.filters,function(a){return d[a.field]=a.value}),f.one("merchants",null!=(m=h.getMerchant())?m.id:void 0).one("venues",b).all("orders").getList(d).then(function(a){return angular.forEach(a,function(b,c){var d;return d=0,angular.forEach(a[c].basket.items,function(a){return d+=a.total}),a[c].orderTotal=parseFloat(null!=d?d:0).toFixed(2)})})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").filter("afterLast",[function(){return function(a,b){return a.substring(a.lastIndexOf(b)+1)}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").filter("base64",[function(){return function(a){return"string"!=typeof a&&(a=JSON.stringify(a)),CryptoJS.enc.Utf8.parse(a).toString(CryptoJS.enc.Base64)}}]).filter("hmacSha1",[function(){return function(a,b){return CryptoJS.HmacSHA1(a,b).toString(CryptoJS.enc.Base64)}}]).filter("hmacSha256",[function(){return function(a,b){return CryptoJS.HmacSHA256(a,b).toString(CryptoJS.enc.Base64)}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").filter("dashCase",[function(){return function(a){var b;return b=a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}),"-"===b.charAt(0)?b.substr(1):b}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").filter("map",[function(){return function(a,b){return _.pluck(a,b)}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").filter("join",[function(){return function(a,b){return null==b&&(b=", "),"string"==typeof a&&(a=a.split(",")),a.join(b)}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").filter("moment",[function(){return function(a,b){return moment(a).format(b)}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").filter("duration",["$filter",function(a){return function(b,c,d){return null==d&&(d=1),a("number")(moment.duration(b).as(c),d)}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").filter("percentage",[function(){return function(a){return""+100*a+"%"}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("adminNav",["$rootScope","$location","$timeout","Config","Auth",function(a,b,c,d,e){return{replace:!0,restrict:"E",scope:!0,templateUrl:"views/partials/nav2.html",link:function(f,g){return f.$on("$routeChangeStart",function(){return g.find("li.k-state-active, li.k-state-hover").removeClass("k-state-active").removeClass("k-state-hover")}),f.$on("$routeChangeSuccess",function(){return g.find("a[href='#"+b.path()+"']").closest("li.toplevel").addClass("k-state-active")}),f.$watch("isVisible()",function(a){return $("body").toggleClass("has-navbar",a)}),f.isLoggedIn=function(){return e.isLoggedIn()&&"browser"===d.mode()},f.isPreOrderEnabled=function(){return e.isPreOrderEnabled()},f.isVisible=function(){return"browser"===d.mode()},a.isMobile()&&!a.isMobile().tablet?($("body").addClass("mobile").removeClass("browser"),$("#menu").kendoMobileDrawer({container:"#content-wrapper"})):($("body").removeClass("mobile").addClass("browser"),$("#menu").kendoMenu({alignToAnchor:!0,openOnClick:!0,select:function(a){var c,d,e,f;return d=angular.element(a.item),e=d.find("a"),c=d.hasClass("has-nested"),f=d.closest("li.toplevel"),c||$("#menu").data("kendoMenu").close(f),null!=e.href?(b.path(e.href),b.reload()):void 0}})),c(function(){return $("#drawer-trigger").click(function(){var a;return a=$("#menu").data("kendoMobileDrawer"),a.visible?a.hide():a.show(),!1})},500)}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("actionButton",[function(){return{restrict:"A",link:function(a,b,c){var d,e,f;return e=b.html(),d=null!=(f=c.loadingText)?f:"Loading…",a.$on(""+c.action+":starting",function(){return b.prop("disabled",!0).html(d)}),a.$on(""+c.action+":complete",function(){return b.prop("disabled",!1).html(e)})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").constant("datetimeLocalFormat","YYYY-MM-DDTHH:mm").constant("dateFormat","YYYY-MM-DD").directive("datetimeLocal",["datetimeLocalFormat",function(a){return{require:"?ngModel",restrict:"A",link:function(b,c,d,e){return e.$formatters.push(function(b){return moment(b).local().format(a)}),e.$parsers.push(function(b){return moment(b,a).local()})}}}]).directive("date",["dateFormat",function(a){return{require:"?ngModel",restrict:"A",link:function(b,c,d,e){return e.$formatters.push(function(b){return moment(b).local().format(a)}),e.$parsers.push(function(b){return moment(b,a).local()})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("deleteButton",[function(){return{scope:{resource:"="},restrict:"A",controller:["$scope","$element","$attrs",function(a,b){var c,d;return c=function(){return b.prop("disabled",!0)},d=function(){return b.prop("disabled",!1)},b.on("click",function(){return a.$emit("delete:requested",a.resource)}),a.$on("delete:pending",function(b,d){return d.id===a.resource.id?c():void 0}),a.$on("delete:succeeded",function(b,c){return c.id===a.resource.id?d():void 0}),a.$on("delete:failed",function(b,c){return c.id===a.resource.id?d():void 0})}]}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("dragSort",[function(){return{scope:{array:"=dragSort",disabled:"=dragDisabled"},link:function(a,b,c){return b.sortable({containment:"body",tolerance:"pointer",start:function(b,d){return d.item.data("start",d.item.index()),a.$parent.$broadcast(""+c.dragSort+":"+b.type)},update:function(b,d){var e,f;return f=d.item.data("start"),e=d.item.index(),a.$apply(function(){return a.array.splice(e,0,a.array.splice(f,1)[0])}),a.$emit(""+c.dragSort+":"+b.type,a.array)}}),a.$watch("disabled",function(a){return b.sortable(a?"disable":"enable")})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").service("sequence",[function(){var a;return a=0,{next:function(){return a++}}}]).directive("formGroup",["sequence","$timeout",function(a,b){return{require:"^form",restrict:"C",link:function(c,d,e,f){var g,h,i,j;return g=d.closest("form"),h=d.find(":input"),null==f.submitted&&(f.submitted=!1,g.on("submit",function(){return f.submitted=!0}),i=f.$setPristine,f.$setPristine=function(){return this.submitted=!1,i(),j()}),j=function(){return b(function(){return d.toggleClass("has-error",(f.submitted||h.hasClass("ng-dirty"))&&h.hasClass("ng-invalid"))})},c.$watch(""+g.attr("name")+"."+h.attr("name")+".$valid",j),h.on("input change",j),g.on("submit",j),null!=e.label?(null==h.attr("id")&&h.attr("id","id_"+a.next().toString(16)),d.prepend($("<label></label>",{"for":h.attr("id"),text:e.label}))):void 0}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("gt",[function(){return{require:"ngModel",restrict:"A",link:function(a,b,c,d){return a.$watch(c.gt,function(){return d.$setViewValue(d.$viewValue),b.trigger("change")}),d.$parsers.push(function(b){var e,f;return f=a.$eval(c.gt),e=d.$modelValue,b>f?(d.$setValidity("gt",!0),e=b):d.$setValidity("gt",!1),e})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("after",[function(){return{require:"ngModel",restrict:"A",link:function(a,b,c,d){return a.$watch(c.after,function(){return d.$setViewValue(d.$viewValue),b.trigger("change")}),d.$parsers.push(function(b){var e,f;return f=a.$eval(c.after),e=d.$modelValue,b.isAfter(f)?(d.$setValidity("after",!0),e=b):d.$setValidity("after",!1),e})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").constant("apiPollFrequency",1e4).directive("offlineNotification",["$rootScope","$timeout","$http","Config","apiPollFrequency",function(a,b,c,d,e){return{replace:!0,restrict:"E",template:'<div class="offline-notification modal fade bs-modal-sm">\n  <div class="modal-dialog modal-sm">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4>Offline</h4>\n      </div>\n      <div class="modal-body">\n        <p>Unable to contact the myCircle API. Please check your network connection.</p>\n      </div>\n    </div>\n  </div>\n</div>',link:function(d,f){return f.modal({backdrop:"static",keyboard:!1,show:!1}),d.$on("apiConnectionError",function(){return f.modal("show"),b(function(){return c.get("api://api/ping").success(function(){return d.$broadcast("apiConnectionSuccess")})},e)}),d.$on("apiConnectionSuccess",function(){return f.modal("hide")}),a.fail=function(){return c.get("api://api/ping/503")}}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("loadingButton",["$http",function(a){return{require:["^?form","?ngDisabled"],restrict:"A",scope:!0,link:function(b,c,d,e){var f,g,h,i,j,k;return i=e[0],k=c.html(),j=d.loadingButton,j||(j="Loading…"),f=c.closest("form"),g=function(){return null==i||i.$valid?c.prop("disabled",!0).html(j):void 0},h=function(){return c.html(k),c.prop("disabled",d.ngDisabled?b.$eval(d.ngDisabled):!1)},f.on("submit",g),f.length>0||c.on("click",g),b.activeRequests=function(){return a.pendingRequests.length},b.$watch("activeRequests()",function(a){return 0===a?h():void 0})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("loggedInAs",function(){return{replace:!0,restrict:"C",scope:!0,template:'<span data-ng-show="username()">{{username()}}</span>',controller:["$scope","Auth",function(a,b){return a.username=function(){var a;return null!=(a=b.getCredentials())?a.username:void 0}}]}})}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("modal",["$timeout",function(a){return{restrict:"C",link:function(b,c,d){return null!=d.trigger?(b.$watch(d.trigger,function(a,b){return null!=a&&null==b&&c.modal("show"),null!=b&&null==a?c.modal("hide"):void 0}),c.on("hide.bs.modal",function(){var c,e;return c=b[null!=(e=d.onCancel)?e:"cancel"],c(),a(function(){return b.$digest()})})):void 0}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("percentageInput",[function(){return{require:"?ngModel",link:function(a,b,c,d){return d.$formatters.push(function(a){return a?100*a:null}),d.$parsers.push(function(a){return a?parseInt(a)/100:null})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("requiresPermission",["Auth",function(){return{restrict:"A",scope:!0,controller:["$scope","Auth",function(a,b){return a.toggleClass=function(a,c){return c.toggleClass("ng-hide",!b.hasRole(a))}}],link:function(a,b,c){var d;return d=c.requiresPermission,a.toggleClass(d,b),a.$on("auth:updated",function(){return a.toggleClass(d,b)})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("requiresTool",["Auth",function(a){return{restrict:"A",scope:!0,link:function(b,c,d){var e;return e=d.requiresTool,b.$on("auth:updated",function(){return c.toggleClass("ng-hide",!a.hasTool(e))})}}}])}.call(this),function(){angular.module("smartRegisterApp").directive("roleSelector",[function(){return{replace:!0,restrict:"A",scope:{list:"=roleSelector"},template:'<div class="btn-group btn-group-justified btn-group-lg">\n  <label class="btn btn-default" data-ng-class="{active: isChecked(\'MERCHANT_EMPLOYEE\')}">\n    <input type="checkbox" data-ng-checked="isChecked(\'MERCHANT_EMPLOYEE\')" data-ng-click="toggle(\'MERCHANT_EMPLOYEE\')"> Staff\n  </label>\n  <label class="btn btn-default" data-ng-class="{active: isChecked(\'MERCHANT_ADMINISTRATORS\')}">\n    <input type="checkbox" data-ng-checked="isChecked(\'MERCHANT_ADMINISTRATORS\')" data-ng-click="toggle(\'MERCHANT_ADMINISTRATORS\')"> Merchant admin\n  </label>\n</div>',link:function(a){return a.isChecked=function(b){return null!=_.findWhere(a.list,{name:b})},a.toggle=function(b){var c;return c=_.pluck(a.list,"name").indexOf(b),c>-1?a.list.splice(c,1):a.list.push({name:b})}}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("sortable",[function(){return{replace:!1,restrict:"A",template:'<a href="" data-ng-transclude></a>',transclude:!0,link:function(a,b,c){var d;return d=c.sortable,b.delegate("a","click",function(){return a.$apply(function(){return a.reverse=a.sort===d?!a.reverse:!1,a.sort=d})}),a.$watch("sort",function(a){return b.toggleClass("active",a===d)}),a.$watch("reverse",function(a){return b.toggleClass("desc",a)})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("time",[function(){return{replace:!1,restrict:"E",scope:{moment:"="},link:function(a,b,c){var d,e,f;return d=null!=(f=c.format)?f:"ddd Do MMM YYYY",e=function(a){var c;return null!=a?(c=moment(a),b.attr("datetime",c.toISOString()),b.text(c.format(d))):void 0},a.$watch("moment",e)}}}])}.call(this),function(){angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function(a,b){var c,d,e,f;return d=function(a,b){var c;if(angular.isArray(a))for(c=0;c<a.length;){if(angular.equals(a[c],b))return!0;c++}return!1},c=function(a,b){var c;for(a=angular.isArray(a)?a:[],c=0;c<a.length;){if(angular.equals(a[c],b))return a;c++}return a.push(b),a},f=function(a,b){var c;if(angular.isArray(a))for(c=0;c<a.length;){if(angular.equals(a[c],b)){a.splice(c,1);break}c++}return a},e=function(e,g,h){var i,j,k;b(g)(e),i=a(h.checklistModel),j=i.assign,k=a(h.checklistValue)(e.$parent),e.$watch("checked",function(a,b){var d;a!==b&&(d=i(e.$parent),a===!0?j(e.$parent,c(d,k)):j(e.$parent,f(d,k)))}),e.$parent.$watch(h.checklistModel,function(a){e.checked=d(a,k)},!0)},{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(a,b){if("INPUT"!==a[0].tagName||!a.attr("type","checkbox"))throw'checklist-model should be applied to `input[type="checkbox"]`.';if(!b.checklistValue)throw"You should provide `checklist-value`.";return a.removeAttr("checklist-model"),a.attr("ng-model","checked"),e}}}])}.call(this),function(){angular.module("smartRegisterApp").directive("dragAndDropList",function(){return function(a,b,c){var d,e;e=null,d=-1,a.$watch(c.dragAndDropList,function(a){e=a},!0),$(b[0]).sortable({items:"li",start:function(a,b){d=$(b.item).index()},stop:function(b,c){var f,g;f=$(c.item).index(),g=e[d],e.splice(d,1),e.splice(f,0,g),a.$apply(a.model)},axis:"y"})}})}.call(this),function(){angular.module("smartRegisterApp").directive("validateData",["$timeout",function(){return{restrict:"A",scope:{data:"=validateData",rules:"=rules",match:"=matchData"},controller:["$scope","MessagingService","ValidationService",function(a,b,c){return a.hasRule=function(a,b){var c;return c=!1,angular.forEach(a,function(a){return a===b?c=!0:void 0}),c},a.validate=function(a,d,e){var f,g,h,i,j,k;return g=d.find("label:first"),a.error=null,a.hasRule(a.rules,"required")&&(e.type||(i=null),c.isRequired(a.data,i)||(f=!0),f&&(a.error=b.createMessage("error",e.displayname+" is required.",e.groupname),b.addMessage(a.error))),a.hasRule(a.rules,"numeric")&&(c.isNumeric(a.data)||(a.error=b.createMessage("error",e.displayname+" must be numeric",e.groupname),b.addMessage(a.error))),a.hasRule(a.rules,"match")&&(h=angular.element(document.querySelector("input[name="+e.matchData+"]")),j=a.data,k=h[0].value,c.isMatch(j,k)||(a.error=b.createMessage("error","The values of ''"+h.parent().context.placeholder+"' and '"+e.displayname+"' must match.",e.groupname),b.addMessage(a.error))),a.hasRule(a.rules,"email")&&(c.isEmail(a.data)||(a.error=b.createMessage("error",e.displayname+" must be a valid email address.",e.groupname),b.addMessage(a.error))),null!=a.error?(g.addClass("hasError"),delete a.error):void 0}}],link:function(a,b,c){return a.$on("validate-data:validate",function(d,e){return c.groupname===e?a.validate(a,b,c):void 0}),a.$on("validate-data:reset",function(){var a;return a=b.find("label:first"),a.removeClass("hasError")})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("alertBox",["$rootScope","MessagingService",function(a,b){return{replace:!0,restrict:"E",template:'<div class="alerts-box alert alert-info row" data-ng-if="hasMessages()" style="margin-top: 50px">\n  <ul ng-repeat="message in filteredMessages" class="col-md-12">\n    <li class="message icon-{{message.type}}">\n      {{message.text}}\n      <a href="{{message.linkUrl}}" title="{{message.linkText}}" data-ng-if="hasLink(message)">{{message.linkText}}</a>\n    </li>\n  </ul>\n</div>',scope:!0,link:function(a,c,d){var e;return e=d.group,a.hasMessages=function(){return b.hasMessages(e).length},a.hasErrors=function(){return b.getMessagesByType("error").length},a.hasLink=function(a){return null!=a.linkUrl&&null!=a.linkText}}}}])}.call(this),function(){angular.module("smartRegisterApp").directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}})}.call(this),function(){angular.module("smartRegisterApp").directive("ngTab",function(){return function(a,b,c){b.bind("keydown keypress",function(b){9===b.which&&(a.$apply(function(){a.$eval(c.ngTab)}),b.preventDefault())})}})}.call(this),function(){angular.module("checklist-model",[]).directive("bindCompiledHtml",["$compile","$timeout",function(a){return{template:"<div></div>",scope:{rawHtml:"=bindCompiledHtml"},link:function(b,c){b.isHtml=function(){return/<[a-z][\s\S]*>/i.test()},b.$watch("rawHtml",function(d){var e;d&&(b.isHtml(d)||(d="<span>"+d+"</span>"),e=a(d)(b.$parent),c.contents().remove(),c.append(e))})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("ModalService",["$rootScope","$compile",function(a,b){var c;return c={},c.repositionWindow=function(a){var b,c,d;b=$("#"+a).closest(".k-window"),c=($(window).width()-$(b).outerWidth())/2,d=($(window).height()-$(b).outerWidth())/2,b.css({position:"absolute",left:c,top:d})},c.createWindow=function(a,d){var e,f,g,h;return e={scope:null,templateUrl:null,title:null,width:600,height:null,modal:!0,actions:["Maximize","Close"],apiEvents:{onOpen:null,onClose:null,onActivate:null,onDeactivate:null,onDragend:null,onResize:null,onRefresh:null}},d="object"==typeof d?$.extend(e,d):e,$("body").append('<div id="'+a+'"></div>'),h=$("#"+a),null!=d.templateUrl&&(g="'"+d.templateUrl+"'",f=b('<ng-include src="'+g+'"></ng-include>')(d.scope),h.append(f),b(h)),h.data("kendoWindow")?void 0:h.kendoWindow({width:d.width+"px",height:d.height+"px",title:d.title,actions:d.actions,modal:d.modal,open:function(){"function"==typeof d.apiEvents.open&&d.apiEvents.open()},close:function(){$("#"+a).data("kendoWindow").destroy(),"function"==typeof d.apiEvents.onClose&&d.apiEvents.onClose()},activate:function(){c.repositionWindow(a),"function"==typeof d.apiEvents.onActivate&&d.apiEvents.onActivate()},deactivate:function(){"function"==typeof d.apiEvents.onDeactivate&&d.apiEvents.onDeactivate()},dragend:function(){c.repositionWindow(a),"function"==typeof d.apiEvents.onDragend&&d.apiEvents.onDragend()},resize:function(){c.repositionWindow(a),"function"==typeof d.apiEvents.onResize&&d.apiEvents.onResize()}})},c}])}.call(this),function(){"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return a.length>0&&this.substring(0,a.length)===a}),"function"!=typeof String.prototype.truncateAt&&(String.prototype.truncateAt=function(a){return this.substring(0,a)})}.call(this),function(){"use strict";var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("smartRegisterApp").factory("Auth",["$http","$rootScope","$location","$timeout","Config","Venue","ResourceNoPaging","locale",function(b,c,d,e,f,g,h,i){var j;return c.credentials=null,c.unsecured=["forgottenPassword","resetToken"],c.$watch("credentials",function(a){return null!=a?localStorage.setItem("credentials",JSON.stringify(a)):localStorage.removeItem("credentials"),c.$broadcast("auth:updated")},!0),j=function(a){return c.credentials.venue=a,c.credentials.tools=[],_.each(a.smartTools,function(a){return a.groups.length>0?c.credentials.tools.push(a.appId):void 0})},{isLoggedIn:function(){return null!=c.credentials},isSecured:function(){return!c.unsecured.indexOf(d.$$path)},isMemberOf:function(b){var d,e,f;return d=null!=(e=null!=(f=c.credentials)?f.groups:void 0)?e:[],a.call(d,b)>=0},hasRole:function(b){var d,e,f;return d=null!=(e=null!=(f=c.credentials)?f.permissions:void 0)?e:[],a.call(d,b)>=0||a.call(d,"PERM_DEVELOPER")>=0},hasTool:function(b){var d,e,f;return d=null!=(e=null!=(f=c.credentials)?f.tools:void 0)?e:[],a.call(d,b)>=0},login:function(d,f,g){var i;return i=btoa(""+d.email+":"+d.password),b.get("api://api/merchants/authenticate",{headers:{Authorization:"Basic "+i}}).success(function(){return function(b){var i;return c.credentials={username:b.employee.displayName,email:d.email,token:b.sessionId,merchant:{id:b.merchantId},permissions:_.flatten(null!=(i=b.employee.groups)?i.map(function(a){var b,c;return b=null!=(c=a.authorities)?c.map(function(a){return a.permission}):void 0,null!=b?b:[]}):void 0),groups:_.pluck(b.employee.groups,"name")},e(function(){var d,e,i;return h.one("merchants",b.merchantId).getList("venues",{full:!1}).then(function(a){return a.length?(j(a[0]),c.credentials.venues=a,f(c.credentials)):(c.credentials=null,g("Merchant has no venues"))}),d=null!=(e=null!=(i=c.credentials)?i.permissions:void 0)?e:[],a.call(d,"PERM_PLATFORM_ADMINISTRATOR")>=0||a.call(d,"PERM_DEVELOPER")>=0?h.all("merchants").all("list").getList().then(function(a){return a.length?c.merchants=a:(c.credentials=null,g("Merchant has no venues"))}):void 0})}}(this)).error(function(a,b){return g(401===b?"Incorrect username or password":"Login failed")})},logout:function(){return b.get("api://api/merchants/logout").success(function(){return c.credentials=null,d.path("/login")}).error(function(){return c.credentials=null,d.path("/login")})},getVenue:function(){var a;return null!=(a=c.credentials)?a.venue:void 0},getMerchant:function(){var a;return null!=(a=c.credentials)?a.merchant:void 0},getCredentials:function(){return c.credentials},clearCredentials:function(){return c.credentials=null},impersonateMerchant:function(a,b){return c.credentials.merchant=a,h.one("merchants",a.id).getList("venues",{full:!1}).then(function(a){return a.length?(c.credentials.venues=a,c.$broadcast("merchant:switch",a[0]),j(a[0]),b()):(c.credentials=null,errorCallback("Merchant has no venues"))})},switchVenue:function(a,b){return j(a),b()},setLocale:function(a){return i.setLocale(a)},getLocale:function(){return i.getLocale()},getLocaleService:function(){return i},init:function(){var a,b,e,f;return e=d.search().token,b=d.search().merchantId,f=d.search().venueId,a=d.search().email,null!=a&&null!=e&&null!=b&&null!=f?c.credentials={email:a,token:e,merchant:{id:b},venue:{id:f}}:null!=a||null!=e||null!=b||null!=f?this.clearCredentials():c.credentials=JSON.parse(localStorage.getItem("credentials")),!this.isLoggedIn()&&c.secured?d.path("/login"):void 0}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("LoginCtrl",["$rootScope","$scope","$location","Auth",function(a,b,c,d){return d.isLoggedIn()&&c.path("/"),b.login=function(){return d.login({email:b.email,password:b.password},function(){return c.path(null!=a.retryPath&&"/login"!==a.retryPath?a.retryPath:"/")},function(b){return a.error=b})}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("btnLogout",["$location","Auth",function(a,b){return{restrict:"C",link:function(c,d){return d.on("click",function(){return b.logout(),a.path("/login")}),c.isLoggedIn=function(){return b.isLoggedIn()}}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("merchantSelector",[function(){return{restrict:"C",scope:!0,template:'<select class="form-control input-sm"\n        data-ng-show="merchants.length"\n        data-ng-model="merchant"\n        data-ng-options="merchant.name for merchant in merchants track by merchant.id"\n        data-ng-change="switchMerchant(merchant)"\n        data-requires-permission="PERM_PLATFORM_ADMINISTRATOR"\n        required>\n</select>',controller:["$scope","$rootScope","$route","Auth","Merchant","MerchantService",function(a,b,c,d,e,f){return a.switchMerchant=function(a){return d.impersonateMerchant(a,function(){return c.reload()})},a.canSwitchMerchant=function(){return d.hasRole("PERM_PLATFORM_ADMINISTRATOR")},a.canSwitchMerchant()&&(a.merchant=d.getMerchant(),a.venue=d.getVenue(),f.getList().then(function(a){return b.merchants=a,b.merchantCount=a.length})),a.$on("auth:updated",function(){return a.merchant=d.getMerchant()}),a.$on("merchant:created",function(a,c){return c.enabled?b.merchants.push(c):void 0})}]}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("venueSelector",[function(){return{restrict:"C",scope:!0,template:'<select class="form-control input-sm"\n        data-ng-if="canSwitchVenue()"\n        data-ng-show="venues.length"\n        data-ng-model="venue"\n        data-ng-options="venue.name for venue in venues track by venue.id"\n        data-ng-change="switchVenue(venue)"\n        required>\n</select>',controller:["$rootScope","$scope","$route","Auth","Venue",function(a,b,c,d){return angular.isDefined(a.credentials.merchant)&&(b.venues=a.credentials.merchant.venues),b.switchVenue=function(a){return d.switchVenue(a,function(){return c.reload(),b.$apply,b.selectedVenue=a})},b.canSwitchVenue=function(){return d.hasRole("PERM_MERCHANT_ADMINISTRATOR")}}]}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("OAuthCtrl",["$routeParams","$location","Tool","tools",function(a,b,c,d){var e,f,g,h,i;return f=a.provider,h=a.token,e="com.mycircleinc.smarttools.social."+f,i=_.find(d,function(a){return a.appId===e
}),g=function(){return b.path("/social")},null!=i?(null==i.properties&&(i.properties={}),i.properties.token=h,i.$update(g)):(i=new c({appId:e,availableTo:[0,1,2,3],displayIndex:5,properties:{token:h}}),i.$save(g))}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Merchant",["$resource","Config",function(a){return a("api://api/merchants/:id",{id:"@id"},{query:{method:"GET",isArray:!0,transformResponse:function(a){return"string"==typeof a&&(a=JSON.parse(a)),a.content}}},{update:{method:"PUT"}})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("MerchantsCtrl",["$scope","$http","$location","Config","Merchant","Venue","Employee","merchants","merchantlist","MerchantService","SettingsService",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n;return angular.isDefined(i)&&(a.merchantlist=i),angular.isDefined(h)?a.merchants=h:(l={page:null!=(m=a.currentPage-1)?m:null,size:null!=(n=a.maxSize)?n:null},j.getPagedList(l).then(function(b){return a.merchants=b})),angular.isDefined(a.merchants.page)&&(a.totalItems=a.merchants.page.totalElements,a.currentPage=a.merchants.page.number+1,a.itemsPerPage=a.merchants.page.size,a.totalPages=a.merchants.page.totalPages),a.setPage=function(b){return a.currentPage=b},a.pageChanged=function(){var b,c;return l={page:null!=(b=a.currentPage-1)?b:null,size:null!=(c=a.maxSize)?c:null},j.getPagedList(l).then(function(b){return a.merchants=b})},a.sort="name",a.reverse=!1,a.create=function(){return c.path("/merchants/add")},a["delete"]=function(b){return j.getById(b.id).then(function(c){return b=c,j.remove(b).then(function(){return a.merchants=_.reject(a.merchants,function(a){return a.id===b.id})})})},a.edit=function(a){return c.path("/merchants/edit/"+a.id)},a.save=function(){var b,c,d;return a.merchantForm.$valid?(b=a.merchant,a.locked=!0,!(null!=b?b.id:void 0)&&(null!=(c=b.employees)&&null!=(d=c[0].credentials)?d[0]:void 0)&&(b.employees[0].credentials[0].uid=b.employees[0].email),j.save(b).then(function(c){var d,e,f,g;if(e=c,null!=b?b.id:void 0)for(d=f=0,g=a.merchants.length;g>=0?g>f:f>g;d=g>=0?++f:--f)a.merchants[d].id===b.id&&(a.merchants[d]=angular.copy(b));else a.merchants.push(e),a.$root.$broadcast("merchant:created",e);return delete a.locked,a.close()},function(){return console.error("failed to save credential"),delete a.locked})):void 0},a.close=function(){return delete a.merchant,delete a.venue,delete a.employee},a.confirmedDelete=function(b){return a.merchantToDelete=b},a.closeConfirm=function(){return delete a.merchantToDelete},a.confirmYes=function(){var b;return a["delete"](a.merchantToDelete),b=a.merchants.indexOf(a.merchantToDelete.id),a.merchants.splice(b,1),a.closeConfirm()},a.hasModuleEnabled=function(a){return k.hasModuleEnabled(a)}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("MerchantFormCtrl",["$rootScope","$scope","$location","$timeout","$http","merchant","venues","employees","Auth","VenueService","EmployeeService","MerchantService","MessagingService","ValidationService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return b.merchant=f,b.venues=g,b.employees=h,b.countries=[{id:232,numericCode:826,name:"United Kingdom"},{id:233,numericCode:840,name:"United States"}],b.venueGridOptions={dataSource:{data:b.venues,pageSize:5,serverPaging:!0,serverSorting:!0},sortable:!0,pageable:!0,filterable:!0,columns:[{field:"name",title:"Name"},{field:"postcode",title:"Postcode",width:"150px"},{field:"email",title:"Email",width:"250px"},{field:"phone",title:"Phone",width:"150px"},{template:'<button data-kendo-button data-ng-click="editVenue(#=id#)">Edit</button>',title:"",width:"100px"}]},b.employeeGridOptions={dataSource:{data:b.employees,pageSize:5,serverPaging:!0,serverSorting:!0},sortable:!0,pageable:!0,filterable:!0,columns:[{field:"firstname",title:"First name"},{field:"lastname",title:"Last name"},{field:"displayname",title:"Display name"},{template:'<button data-kendo-button data-ng-click="editEmployee(#=id#)">Edit</button>',title:"",width:"100px"}]},b.editEmployee=function(a){return c.path("employees/edit/"+a)},b.editVenue=function(a){return c.path("venues/edit/"+a)},b.reset=function(){return m.resetMessages(),n.reset(),null!=b.merchant.id?l.getById(b.merchant.id).then(function(a){return b.merchant=a}):b.merchant=l["new"]()},b.save=function(c){var d,e;return m.resetMessages(),n.reset(),n.validate("Merchant"),m.hasMessages("Merchant").length?void 0:(b.locked=!0,f=b.merchant,!(null!=f?f.id:void 0)&&(null!=(d=f.employees)&&null!=(e=d[0].credentials)?e[0]:void 0)&&(f.employees[0].credentials[0].uid=f.employees[0].email),l.save(f).then(function(d){return c?a.back():(b.locked=!1,b.merchant=d)},function(){return console.error("update failed"),b.locked=!1}))},b.showDataChangedMessage=function(){var a;return m.resetMessages(),a=m.createMessage("warning","Your merchant data has changed. Don't forget to press the 'Save' button.","Merchant"),m.addMessage(a),m.hasMessages("Merchant")},b.findNextElemByTabIndex=function(a){var b;return b=angular.element(document.querySelector("[tabindex='"+a+"']"))},b.moveToNextTabIndex=function(a,c){var e,f;return e=c,f=[],null!=e.attrs.nexttabindex&&(f=b.findNextElemByTabIndex(e.attrs.nexttabindex)),e.save(),e.hide(),f.length?d(function(){return f.click()},10):void 0},b.keypressCallback=function(a,c){var e,f;return e=c,f=[],null!=e.attrs.nexttabindex&&(f=b.findNextElemByTabIndex(e.attrs.nexttabindex)),9===a.which&&(a.preventDefault(),e.save(),e.hide(),f.length&&d(function(){return f.click()},10)),13===a.which?(a.preventDefault(),e.save(),e.hide()):void 0}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Catalog",["catalogTemplate","$http","$timeout","Config","VenueService",function(a,b){return{populate:function(a,c,d,e){var f,g;return g=function(d,e,f){var h;return h=e.pop(),h.category=d,b.post("api://api/merchants/"+a.id+"/venues/"+c.id+"/products",h).success(function(){return e.length?g(d,e,f):f()})},(f=function(d,e){var h,i;return h=d.pop(),i=h.products,delete h.products,b.post("api://api/merchants/"+a.id+"/venues/"+c.id+"/categories",h).success(function(a){return g(a.id,i,function(){return d.length?f(d,e):e()})})})(d,e)}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").constant("catalogTemplate",Object.freeze({categories:[{title:"Bar Snacks",colour:"#314b78",index:0,products:[{title:"Salted Peanuts",favourite:!1,price:.8,tax:.2,altPrice:0,altTax:0,index:0},{title:"Crisps",favourite:!1,price:.75,tax:0,altPrice:0,altTax:0,index:1,modifiers:[{title:"Flavours",allowMultiples:!1,allowNone:!1,variants:[{title:"Cheese & Onion",isDefault:!1,priceDelta:0},{title:"Ready Salted",isDefault:!1,priceDelta:0},{title:"Salt & Vinegar",isDefault:!1,priceDelta:0}]}]},{title:"Pork Scratching Large",favourite:!1,price:2.2,tax:0,altPrice:0,altTax:0,index:2},{title:"Pork Scratchings",favourite:!1,price:1.99,tax:0,altPrice:0,altTax:0,index:3},{title:"Roast Peanuts",favourite:!1,price:1.99,tax:0,altPrice:0,altTax:0,index:4}]},{title:"Beer",colour:"#487831",index:1,products:[{title:"Budweiser",favourite:!1,price:3,tax:.2,altPrice:0,altTax:0,index:0},{title:"Peroni",favourite:!1,price:3,tax:.2,altPrice:0,altTax:0,index:1}]},{title:"Breakfast",colour:"#FF0000",index:2,products:[{title:"Breakfast",favourite:!1,price:0,tax:0,altPrice:0,altTax:0,index:0},{title:"Continental Breakfast",favourite:!0,price:3,tax:.2,altPrice:3,altTax:0,index:1},{title:"Eggs Benedict",favourite:!1,price:6.5,tax:.2,altPrice:0,altTax:0,index:2},{title:"Full English Breakfast",favourite:!1,price:6.75,tax:.2,altPrice:0,altTax:0,index:3,modifiers:[{title:"Bacon",allowMultiples:!1,allowNone:!0,variants:[{title:"1 Extra Bacon",isDefault:!1,priceDelta:.5},{title:"2 Extra Bacon",isDefault:!1,priceDelta:1},{title:"3 Extra Bacon",isDefault:!1,priceDelta:1.5}]},{title:"Hash Brown",allowMultiples:!1,allowNone:!0,variants:[{title:"1 Extra Hash Bn",isDefault:!1,priceDelta:.5},{title:"2 Extra Hash Bn",isDefault:!1,priceDelta:1},{title:"3 Extra Hash Bn",isDefault:!1,priceDelta:1.5}]},{title:"Sausage",allowMultiples:!1,allowNone:!0,variants:[{title:"1 Extra Sausage",isDefault:!1,priceDelta:.5},{title:"2 Extra Sausage",isDefault:!1,priceDelta:1},{title:"3 Extra Sausage",isDefault:!1,priceDelta:1.5}]}]}]},{title:"Coffee",colour:"#487831",index:3,products:[{title:"Americano",favourite:!1,price:2.2,tax:0,altPrice:1.9,altTax:0,index:0,modifiers:[{title:"Size",allowMultiples:!0,allowNone:!1,variants:[{title:"Large",isDefault:!1,priceDelta:.3},{title:"Regular",isDefault:!0,priceDelta:0}]}]},{title:"Cappuccino",favourite:!1,price:2.2,tax:.2,altPrice:2,altTax:.2,index:1,modifiers:[{title:"Extra Shots",allowMultiples:!1,allowNone:!0,variants:[{title:"One",isDefault:!1,priceDelta:.5},{title:"Three",isDefault:!1,priceDelta:1.5},{title:"Two",isDefault:!1,priceDelta:1}]},{title:"Milk",allowMultiples:!1,allowNone:!1,variants:[{title:"Full-Fat",isDefault:!1,priceDelta:0},{title:"Semi-Skimmed",isDefault:!1,priceDelta:0},{title:"Skimmed",isDefault:!0,priceDelta:0},{title:"Soya",isDefault:!1,priceDelta:.5}]},{title:"Size",allowMultiples:!1,allowNone:!0,variants:[{title:"Large",isDefault:!1,priceDelta:.3},{title:"Medium",isDefault:!0,priceDelta:0},{title:"Small",isDefault:!1,priceDelta:-.3}]},{title:"Syrups",allowMultiples:!0,allowNone:!0,variants:[{title:"Gingerbread",isDefault:!1,priceDelta:.2},{title:"Hazelnut",isDefault:!1,priceDelta:.2},{title:"Vanilla",isDefault:!1,priceDelta:.2}]}]},{title:"Coffee",favourite:!0,price:.8,tax:0,altPrice:.8,altTax:0,index:2},{title:"Double Espresso",favourite:!1,price:1.5,tax:.2,altPrice:0,altTax:0,index:3,modifiers:[{title:"Shots",allowMultiples:!1,allowNone:!1,variants:[{title:"Double Shot",isDefault:!1,priceDelta:.5},{title:"Single Shot",isDefault:!0,priceDelta:0},{title:"Triple Shot",isDefault:!1,priceDelta:1}]}]},{title:"Espresso",favourite:!1,price:1.65,tax:.2,altPrice:1.5,altTax:.2,index:4,modifiers:[{title:"Shots",allowMultiples:!1,allowNone:!1,variants:[{title:"Double Shot",isDefault:!1,priceDelta:.5},{title:"Single Shot",isDefault:!0,priceDelta:0},{title:"Triple Shot",isDefault:!1,priceDelta:1}]}]},{title:"Latte",favourite:!0,price:2.2,tax:.2,altPrice:2,altTax:.2,index:5,modifiers:[{title:"Extra Shots",allowMultiples:!1,allowNone:!0,variants:[{title:"One",isDefault:!1,priceDelta:.5},{title:"Three",isDefault:!1,priceDelta:1.5},{title:"Two",isDefault:!1,priceDelta:1}]},{title:"Milk",allowMultiples:!1,allowNone:!1,variants:[{title:"Full-Fat",isDefault:!1,priceDelta:0},{title:"Semi-Skimmed",isDefault:!1,priceDelta:0},{title:"Skimmed",isDefault:!0,priceDelta:0},{title:"Soya",isDefault:!1,priceDelta:.5}]},{title:"Size",allowMultiples:!1,allowNone:!1,variants:[{title:"Large",isDefault:!1,priceDelta:.3},{title:"Medium",isDefault:!0,priceDelta:0},{title:"Small",isDefault:!1,priceDelta:-.3}]},{title:"Syrups",allowMultiples:!0,allowNone:!0,variants:[{title:"Gingerbread",isDefault:!1,priceDelta:.2},{title:"Hazelnut",isDefault:!1,priceDelta:.2},{title:"Vanilla",isDefault:!1,priceDelta:.2}]}]},{title:"Turkish Coffee",favourite:!1,price:2.15,tax:0,altPrice:2.15,altTax:0,index:6}]},{title:"Cold Drinks",colour:"#0000ff",index:4,products:[{title:"Bottled Water",favourite:!1,price:1.1,tax:.2,altPrice:1,altTax:0,index:0},{title:"Coca Cola",favourite:!0,price:1.1,tax:.2,altPrice:1,altTax:0,index:1},{title:"Fruit Juice",favourite:!1,price:1,tax:.2,altPrice:0,altTax:0,index:2},{title:"Milkshake",favourite:!1,price:2.75,tax:.2,altPrice:2.5,altTax:.2,index:3,modifiers:[{title:"Flavouring",allowMultiples:!1,allowNone:!1,variants:[{title:"Chocolate",isDefault:!1,priceDelta:0},{title:"Strawberry",isDefault:!1,priceDelta:0},{title:"Vanilla",isDefault:!0,priceDelta:0}]}]},{title:"Sparkling water",favourite:!1,price:.8,tax:0,altPrice:0,altTax:0,index:4},{title:"Sprite",favourite:!1,price:1.1,tax:.2,altPrice:1,altTax:0,index:5}]},{title:"Lunch",colour:"#a1aa15",index:5,products:[{title:"Salmon & Avocado Salad",favourite:!1,price:8.8,tax:.2,altPrice:8,altTax:.2,index:0},{title:"Cheese & Pickle Sandwich",favourite:!1,price:3.75,tax:.15,altPrice:3.75,altTax:0,index:1},{title:"Chilli & Cheese Jacket",favourite:!0,price:6.6,tax:.2,altPrice:6,altTax:.2,index:2},{title:"Classic Burger",favourite:!0,price:7.15,tax:.2,altPrice:6.5,altTax:.2,index:3,modifiers:[{title:"Toppings",allowMultiples:!0,allowNone:!0,variants:[{title:"Bacon",isDefault:!1,priceDelta:.5},{title:"Cheese",isDefault:!1,priceDelta:.5}]}]},{title:"Ham & Tomato Sandwich",favourite:!1,price:3.85,tax:.2,altPrice:2.5,altTax:0,index:4,modifiers:[{title:"Bread",allowMultiples:!1,allowNone:!1,variants:[{title:"White",isDefault:!0,priceDelta:0},{title:"Wholegrain",isDefault:!1,priceDelta:0}]},{title:"Sides",allowMultiples:!0,allowNone:!0,variants:[{title:"Chips",isDefault:!1,priceDelta:1},{title:"Crisps",isDefault:!1,priceDelta:.5}]}]}]},{title:"Pastries",colour:"#21aabd",index:6,products:[{title:"Angle Cake",favourite:!1,price:2.45,tax:.2,altPrice:2,altTax:.2,index:0},{title:"Carrot Cake",favourite:!1,price:2.2,tax:.2,altPrice:2,altTax:0,index:1},{title:"Chocolate Cake",favourite:!1,price:2.2,tax:.2,altPrice:2,altTax:0,index:2},{title:"Danish Pastry",favourite:!0,price:1.75,tax:.15,altPrice:1.55,altTax:0,index:3},{title:"Sponge Cake",favourite:!1,price:2.45,tax:.2,altPrice:0,altTax:0,index:4},{title:"Walnut Cake",favourite:!1,price:3.25,tax:.15,altPrice:3.1,altTax:0,index:5}]},{title:"Red Wine",colour:"#900b0b",index:7,products:[{title:"Cabernet Sauvignon",favourite:!0,price:10.95,tax:.2,altPrice:0,altTax:0,index:0},{title:"Glass of House Red",favourite:!1,price:2.3,tax:.2,altPrice:0,altTax:0,index:1},{title:"Merlot",favourite:!1,price:10.95,tax:.2,altPrice:0,altTax:0,index:2},{title:"Rioja",favourite:!1,price:9.95,tax:.2,altPrice:9.95,altTax:.2,index:3}]},{title:"Sandwiches",colour:"#872435",index:8,products:[{title:"Cheese and Ham",favourite:!1,price:2.3,tax:0,altPrice:0,altTax:0,index:0}]},{title:"Tea",colour:"#E36891",index:9,products:[{title:"Tea",favourite:!1,price:1.5,tax:0,altPrice:1.5,altTax:0,index:0},{title:"Darjeeling Earl Grey",favourite:!1,price:2.2,tax:.2,altPrice:2,altTax:.2,index:1},{title:"English B'fast",favourite:!0,price:2.2,tax:.2,altPrice:2,altTax:.2,index:2},{title:"Green Tea",favourite:!1,price:0,tax:0,altPrice:0,altTax:0,index:3},{title:"Herbal Tea",favourite:!1,price:2.2,tax:.2,altPrice:2,altTax:.2,index:4},{title:"Large Pot Yorkshire Tea",favourite:!0,price:2.75,tax:.2,altPrice:0,altTax:0,index:5}]},{title:"Today's Specials",colour:"#FF0000",index:10,products:[{title:"Rainbow Trout",favourite:!0,price:12.95,tax:.2,altPrice:0,altTax:0,index:0}]},{title:"White Wine",colour:"#21aabd",index:11,products:[{title:"Sauvignon Blanc",favourite:!1,price:3.75,tax:.2,altPrice:0,altTax:0,index:0},{title:"Chateau Verdignan",favourite:!1,price:5,tax:.2,altPrice:0,altTax:0,index:1,modifiers:[{title:"Size",allowMultiples:!1,allowNone:!1,variants:[{title:"Bottle",isDefault:!1,priceDelta:30}]}]},{title:"Merlot",favourite:!1,price:10.95,tax:.2,altPrice:0,altTax:0,index:2}]}]}))}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("populateCatalogFor",["Catalog","MerchantService","VenueService","catalogTemplate",function(a,b,c,d){return{restrict:"A",controller:["$scope","$route","MerchantService","VenueService","catalogTemplate",function(a,b){return a.$on("catalog:populated",function(){return b.reload()})}],link:function(b,c){var e;return angular.isDefined(b.products)&&(null!=(e=b.products)?e.length:void 0)?c.prop("disabled",!0):c.click(function(){return a.populate(b.merchant,b.venue,d.categories,function(){return b.$emit("catalog:populated")})})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Venue",["$location","$resource","Config","$rootScope",function(a,b,c,d){return b("api://api/merchants/:merchantId/venues/:id",{id:"@id",merchantId:function(){var a,b;return null!=(a=d.credentials)&&null!=(b=a.merchant)?b.id:void 0}},{query:{method:"GET",isArray:!0,params:{full:!0}}},{update:{method:"PUT",params:{id:"@id"}}})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("VenuesCtrl",["$rootScope","$document","$http","$location","$route","$scope","Auth","VenueService","SettingsService",function(a,b,c,d,e,f,g,h){return h.getList(a.credentials.merchant.id).then(function(a){return f.venues=a}),a.errors={venue:[]},f.getVenueContactByType=function(a,b){var c,d;return null!=(null!=(c=h.getVenueContactByType(a,b))?c.value:void 0)?null!=(d=h.getVenueContactByType(a,b))?d.value:void 0:null},f.confirmedDelete=function(a){return f.venuesToDelete=[a]},f.closeConfirm=function(){return delete f.venuesToDelete},f.confirmYes=function(){return f.remove(f.venuesToDelete[0]),f.closeConfirm()},f.resetChecked=function(){return $('input[type="checkbox"').prop("checked",!1),f.checkedVenues=[]},f.resetErrors=function(){return a.errors.venue=[]},f.updateCheckboxStatus=function(a){var b;return f.resetChecked(),b=$("#venueCheckbox"+a.id),b.prop("checked",!b.prop("checked")),f.checkedVenues.push(a.id)},f.create=function(){return d.path("/venues/add")},f.duplicateVenue=function(){return f.resetErrors(),f.checkedVenues.length&&1===f.checkedVenues.length?h.getById(f.checkedVenues[0]).then(function(a){return f.duplicate(a)}):f.checkedVenues.length>1?f.errors.venue.push("You can only duplicate 1 venue at a time."):0===f.checkedVenues.length?f.errors.venue.push("Please select a venue to duplicate"):void 0},f.duplicate=function(a){return f.$broadcast("venue:duplicate",a)},f.edit=function(a){return d.path("/venues/edit/"+a.id)},f.editVenueProducts=function(a){return f.$broadcast("venue:editProducts",a)},f.remove=function(a){return h.remove(a).then(function(){return h.getList().then(function(a){return f.venues=a})},function(){return console.error("could not delete",a),f.$broadcast("delete:failed",a)})},f.hasErrors=function(){return angular.isDefined(a.errors)?!0:!1},f.hasMultipleVenues=function(){return null!=f.venues?f.venues.length>1?!0:!1:void 0},f.canAddVenue=function(){return h.canAddVenue()},f.canDuplicateVenues=function(){return g.hasRole("PERM_MERCHANT_ADMINISTRATOR")},f.canDeleteVenues=function(){return g.hasRole("PERM_MERCHANT_ADMINISTRATOR")&&f.hasMultipleVenues()?!0:!1},f.$on("delete:succeeded",function(){return e.reload()}),f.$on("delete:requested",function(a,b){return f["delete"](b)}),f.$on("venue:saved",function(){return h.getList().then(function(a){return f.venues=a})}),f.$on("venue:created",function(a,b){return f.venues.push(b)}),f.$on("venue:updated",function(a,b){var c,d,e,g;for(g=[],c=d=0,e=f.venues.length;e>=0?e>d:d>e;c=e>=0?++d:--d)g.push(f.venues[c].id===b.id?f.venues[c]=angular.copy(b):void 0);return g}),f.$on("venue:editProducts",function(b,c){return a.credentials.venue=angular.copy(c),f.productsForCategory=f.products,d.path("/products")}),f.$on("venue:duplicate",function(a,b){return h.getById(b.id,{full:!0}).then(function(a){return h.duplicate(a).then(function(a){var c;return f.$broadcast("venue:created",a),c=f.checkedVenues.indexOf(b.id),f.checkedVenues.splice(c,1),f.resetChecked(),location.reload()})})})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("venueEditForm",["$filter","VenueService",function(a,b){return{templateUrl:"views/partials/venues/venue-edit-form.html",replace:!0,restrict:"E",scope:!0,controller:["$scope","$element","$attrs","Venue",function(a){return a.$on("venue:create",function(){return a.venue={address:{country:{numericCode:826},isAddressFor:"ALL"},contacts:[{type:"PHONE"}]},a.contact=a.venue.contacts[0]}),a.$on("venue:edit",function(b,c){return a.venue=angular.copy(c),a.venue.contacts||(a.venue.contacts=[]),a.contact=_.find(a.venue.contacts,function(a){return"PHONE"===a.type}),null==a.contact?(a.contact={type:"PHONE"},a.venue.contacts.push(a.contact)):void 0}),a.save=function(){return a.venueForm.$valid?(a.locked=!0,b.save(a.venue).then(function(b){return a.$emit("venue:saved",b),a.locked=!1},function(){return console.error("update failed"),a.locked=!1})):void 0}}]}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("VenueFormCtrl",["$rootScope","$scope","$location","$timeout","venue","employees","discounts","VenueService","MessagingService","ValidationService",function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n;return b.venue=e,b.employees=f,b.discounts=g,b.venue.contacts||(b.venue.contacts=[]),b.countries=[{id:232,numericCode:826,name:"United Kingdom"},{id:233,numericCode:840,name:"United States"}],b.name=null!=(k=h.getVenueContactByType(e,"NAME"))?k:{},b.phone=null!=(l=h.getVenueContactByType(e,"PHONE"))?l:{},b.email=null!=(m=h.getVenueContactByType(e,"EMAIL"))?m:{},b.venue.sections=null!=(n=b.venue.sections)?n:[],b.employeeGridOptions={dataSource:{data:b.employees,pageSize:5,serverPaging:!1,serverSorting:!1},sortable:!0,pageable:!0,columns:[{field:"firstname",title:"First name"},{field:"lastname",title:"Last name"},{field:"displayname",title:"Display name"},{field:"active",title:"Active"},{template:'<button data-kendo-button data-ng-click="editEmployee(#=id#)">Edit</button>',title:"",width:"100px"}]},b.discountGridOptions={dataSource:{data:b.discounts,pageSize:5,serverPaging:!1,serverSorting:!1},sortable:!0,pageable:!0,columns:[{field:"name",title:"Name"},{field:"value",title:"Value",template:"#=value * 100#\\%"},{template:'<button data-kendo-button data-ng-click="editDiscount(#=id#)">Edit</button>',title:"",width:"100px"}]},b.editEmployee=function(a){return c.path("venues/"+e.id+"/employees/edit/"+a)},b.editDiscount=function(a){return c.path("discounts/edit/"+a)},b.updateVenueCountry=function(){return b.venue.address.country={numericCode:b.venue.address.country.numericCode}},b.addSection=function(a){var c;return i.resetMessages(),j.reset(),j.validate("Sections"),h.isExistingSection(b.venue,a).length&&(c=i.createMessage("error","A section with that name already exists.","Sections"),i.addMessage(c)),i.hasMessages("Sections").length?void 0:(b.venue.sections.push({name:a}),delete b.newSection,b.showDataChangedMessage())},b.deleteSection=function(a){var c;return a=h.getSectionById(b.venue,a.id),c=b.venue.sections.indexOf(a),b.venue.sections.splice(c,1),b.showDataChangedMessage()},b.reset=function(){return i.resetMessages(),j.reset(),null!=b.venue.id?h.getById(b.venue.id).then(function(a){return b.venue=a}):b.venue=h["new"]()},b.showDataChangedMessage=function(){var a;return i.resetMessages(),a=i.createMessage("warning","Your venue data has changed. Don't forget to press the 'Save' button.","Venue"),i.addMessage(a),i.hasMessages("Venue")},b.save=function(c){var d,e,f,g,k;return i.resetMessages(),j.reset(),j.validate("Venue"),i.hasMessages("Venue").length?void 0:(e=h.getVenueContactByType(b.venue,"NAME"),f=h.getVenueContactByType(b.venue,"PHONE"),d=h.getVenueContactByType(b.venue,"EMAIL"),e||null!=b.name.value&&(b.name.type="NAME",null!=(g=b.venue)&&g.contacts.push(b.name)),f||null!=b.phone.value&&(b.phone.type="PHONE",null!=(k=b.venue)&&k.contacts.push(b.phone)),d||null!=b.email.value&&(b.email.type="EMAIL",b.venue.contacts.push(b.email)),h.save(b.venue).then(function(b){return c?a.back():!0},function(){return console.error("update failed"),b.locked=!1}))},b.findNextElemByTabIndex=function(a){var b;return b=angular.element(document.querySelector("[tabindex='"+a+"']"))},b.moveToNextTabIndex=function(a,c){var e,f;return e=c,f=[],null!=e.attrs.nexttabindex&&(f=b.findNextElemByTabIndex(e.attrs.nexttabindex)),e.save(),e.hide(),f.length?d(function(){return f.click()},10):void 0},b.keypressCallback=function(a,c){var e,f;return e=c,f=[],null!=e.attrs.nexttabindex&&(f=b.findNextElemByTabIndex(e.attrs.nexttabindex)),9===a.which&&(a.preventDefault(),e.save(),e.hide(),f.length&&d(function(){return f.click()},10)),13===a.which?(a.preventDefault(),e.save(),e.hide()):void 0},b.validateEmail=function(a){var b;return a.length&&!j.isEmail(a)?(i.resetMessages(),b=i.createMessage("error","'"+a+"' is not a valid email address.","Venue"),i.addMessage(b),i.hasMessages("Venue")):void 0},b.validatePostcode=function(a){var b;return a.length&&!j.isPostcode(a)?(i.resetMessages(),b=i.createMessage("error","'"+a+"' is not a valid postcode.","Venue"),i.addMessage(b),i.hasMessages("Venue")):void 0}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Employee",["$resource","Config","Auth",function(a,b,c){var d;return d=a("api://api/merchants/:merchantId/employees/:id",{id:"@id",merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0}},{save:{method:"POST",transformRequest:function(a){var b;return b=angular.copy(a),delete b.credentials,JSON.stringify(b)}},update:{method:"PUT",transformRequest:function(a){var b;return b=angular.copy(a),delete b.credentials,delete b.discounts,delete b.smartTools,JSON.stringify(b)}}}),d.prototype.isInGroup=function(a){return null!=_.findWhere(this.groups,{name:a})},d}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("EmployeesCtrl",["$scope","$http","$location","Employee","employees","Auth","Config","SettingsService","EmployeeService",function(a,b,c,d,e,f,g,h,i){var j;return a.employees=e,a.roles=[{group:{name:"MERCHANT_EMPLOYEE"},label:"Staff"},{group:{name:"MERCHANT_ADMINISTRATORS"},label:"Merchant admin"},{group:{name:"PLATFORM_ADMINISTRATORS"},label:"Global admin"}],f.isMemberOf("PLATFORM_ADMINISTRATORS")||(a.roles=a.roles.slice(0,_.lastIndexOf(a.roles,function(a){return f.isMemberOf(a.group.name)}))),a.create=function(){return c.path("/employees/add")},a.edit=function(a){return c.path("/employees/edit/"+a.id)},a.remove=function(b){return i.remove(b).then(function(){var c;return c=a.employees.indexOf(b),a.employees.splice(c,1)},function(){return console.error("could not delete",b),a.$broadcast("delete:failed",b)})},j=function(c,d,e){var g;return(null!=d?d.token:void 0)?(g=function(b,c){return console.error("failed to create credentials",c,b),a.error=""+b.reference+": "+b.message,409===c&&a.employeeForm.pin.$setValidity("unique",!1),delete a.locked},null!=d.id?b.put("api://api/merchants/"+f.getMerchant().id+"/employees/"+c.id+"/credentials/"+d.id,d).success(e).error(g):b.post("api://api/merchants/"+f.getMerchant().id+"/employees/"+c.id+"/credentials",d).success(e).error(g)):null!=(null!=d?d.id:void 0)?b["delete"]("api://api/merchants/"+f.getMerchant().id+"/employees/"+c.id+"/credentials/"+d.id).success(function(){return c.credentials=_.reject(c.credentials,function(a){return a.id===d.id}),e()}).error(function(b,c){return console.error("failed to delete credential",c,b),a.error=""+b.reference+": "+b.message,delete a.locked}):e()},a.save=function(){var b,c;return a.employeeForm.$valid?(a.locked=!0,c=a.employee,b=a.credential,null!=c.id?c.$update(function(){return j(c,b,function(){var b,d,e;for(b=d=0,e=a.employees.length;e>=0?e>d:d>e;b=e>=0?++d:--d)a.employees[b].id===c.id&&(a.employees[b]=c);return delete a.employee,delete a.credential,delete a.locked})},function(b){return console.error("failed to update employee '"+c.name+"'"),a.error=""+b.data.reference+": "+b.data.message,delete a.locked}):c.$save(function(){return c.credentials=[b],j(c,b,function(){return a.employees.push(c),delete a.employee,delete a.credential,delete a.locked})},function(b){return console.error("failed to save employee '"+c.name+"'"),a.error=""+b.data.reference+": "+b.data.message,delete a.locked})):void 0},a.cancel=function(){return delete a.employee,delete a.credential,delete a.error},a.switchToGroup=function(b){var c,d,e,f;for(f=a.roles,d=0,e=f.length;e>d;d++)c=f[d],a.employee.groups=_.reject(a.employee.groups,function(a){return a.name===c.group.name});return a.employee.groups.push(b)},a.hasModuleEnabled=function(a){return h.hasModuleEnabled(a)},a.confirmedDelete=function(b){return a.employeeToDelete=b},a.closeConfirm=function(){return delete a.employeeToDelete},a.confirmYes=function(){return a.remove(a.employeeToDelete),a.closeConfirm()}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("ResetTokenCtrl",["$rootScope","$scope","$timeout","$location","EmployeeService","MessagingService","ValidationService","Auth","token",function(a,b,c,d,e,f,g,h,i){var j;return angular.isDefined(i)?b.token=i:(j=f.createMessage("error","A valid token is required to be passed in the URL.","ResetToken","/login","Go to login page"),f.addMessage(j),f.hasMessages("ResetToken")),b.resetToken=function(){return f.resetMessages(),g.reset(),g.validate(),f.hasMessages("ResetToken").length?void 0:(e.resetToken(b.token,b.new_password),j=f.createMessage("success","Your password has been successfully reset.","ResetToken","/login","Go to login screen"),f.addMessage(j),f.hasMessages("ResetToken"))}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("ForgottenPasswordCtrl",["$rootScope","$scope","EmployeeService","MessagingService",function(a,b,c,d){return b.requestPasswordReset=function(){return d.resetMessages(),a.$broadcast("validate-data:validate"),d.hasMessages("ForgottenPassword").length?void 0:c.requestPasswordReset(b.email).then(function(){var a;return a=d.createMessage("success","An email has been sent to "+b.email+" with password reset instructions.","ForgottenPassword","/login","Go to login screen"),d.addMessage(a),d.hasMessages("ForgottenPassword")})}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("EmployeeFormCtrl",["$rootScope","$scope","$location","$timeout","$http","employee","venues","Auth","EmployeeService","MessagingService","ValidationService",function(a,b,c,d,e,f,g,h,i,j,k){return b.employee=f,b.credential=_.find(b.employee.credentials,function(a){return"PIN"===a.type}),b.venues=g,console.log(b.employee),b.credential||(b.credential={type:"PIN"}),b.roles=[{group:{name:"MERCHANT_EMPLOYEE"},label:"Staff"},{group:{name:"MERCHANT_ADMINISTRATORS"},label:"Merchant admin"},{group:{name:"PLATFORM_ADMINISTRATORS"},label:"Global admin"}],h.isMemberOf("PLATFORM_ADMINISTRATORS")||(b.roles=b.roles.slice(0,_.lastIndexOf(b.roles,function(a){return h.isMemberOf(a.group.name)}))),b.switchMerchantType=function(a){return b.employee.type=a,b.employee.venueId="Venue"===a?b.venues[0].id:null},b.isVenueStaffMember=function(){return angular.isNumber(f.venueId)},b.isInGroup=function(a,b){return i.isInGroup(a,b)},b.switchToGroup=function(a){var c,d,e,f;for(f=b.roles,d=0,e=f.length;e>d;d++)c=f[d],b.employee.groups=_.reject(b.employee.groups,function(a){return a.name===c.group.name});return b.employee.groups.push(a)},b.updateCredentials=function(a,c,d){var f,g;return(null!=c?c.token:void 0)?(f=function(a,c){return console.error("failed to create credentials",c,a),b.error=""+a.reference+": "+a.message,409===c&&b.employeeForm.pin.$setValidity("unique",!1),delete b.locked},null!=c.id?(g=angular.copy(c),delete g.id,e.put("api://api/merchants/"+h.getMerchant().id+"/employees/"+a.id+"/credentials/"+c.id,g).success(d).error(f)):e.post("api://api/merchants/"+h.getMerchant().id+"/employees/"+a.id+"/credentials",c).success(d).error(f)):null!=(null!=c?c.id:void 0)?e["delete"]("api://api/merchants/"+h.getMerchant().id+"/employees/"+a.id+"/credentials/"+c.id).success(function(){return a.credentials=_.reject(a.credentials,function(a){return a.id===c.id}),d()}).error(function(a,c){return console.error("failed to delete credential",c,a),b.error=""+a.reference+": "+a.message,delete b.locked}):d()},b.reset=function(){return j.resetMessages(),k.reset(),null!=b.employee.id?i.getById(b.employee.id).then(function(a){return b.employee=a}):b.employee=i["new"]()},b.save=function(c){var d;return j.resetMessages(),k.reset(),k.validate("Employee"),j.hasMessages("Employee").length?void 0:(b.locked=!0,f=b.employee,d=b.credential,i.save(f).then(function(e){return b.employee=e,null!=b.employee.id?b.updateCredentials(b.employee,d,function(){return delete b.employee,delete b.locked,c?a.back():void 0}):void 0},function(){return console.error("update failed"),b.locked=!1
}))},b.cancel=function(){return delete b.employee,delete b.credential,delete b.error},b.showDataChangedMessage=function(){var a;return j.resetMessages(),a=j.createMessage("warning","Your employee data has changed. Don't forget to press the 'Save' button.","Employee"),j.addMessage(a),j.hasMessages("Employee")},b.findNextElemByTabIndex=function(a){var b;return b=angular.element(document.querySelector("[tabindex='"+a+"']"))},b.moveToNextTabIndex=function(a,c){var e,f;return e=c,f=[],null!=e.attrs.nexttabindex&&(f=b.findNextElemByTabIndex(e.attrs.nexttabindex)),e.save(),e.hide(),f.length?d(function(){return f.click()},10):void 0},b.keypressCallback=function(a,c){var e,f;return e=c,f=[],null!=e.attrs.nexttabindex&&(f=b.findNextElemByTabIndex(e.attrs.nexttabindex)),9===a.which&&(a.preventDefault(),e.save(),e.hide(),f.length&&d(function(){return f.click()},10)),13===a.which?(a.preventDefault(),e.save(),e.hide()):void 0}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").constant("productImageSize",[function(){return Object.freeze({width:230,height:130})}]).directive("s3ImageUploader",["$http","$filter","$timeout","Config","Auth","ImageService","MessagingService",function(a,b,c,d,e,f,g){return{replace:!0,restrict:"E",scope:!0,templateUrl:"views/partials/images/s3-image-uploader.html",link:function(d,h){var i,j,k,l,m,n,o,p,q,r;return m=h.find(":input"),j=h.find("button.crop"),i=h.find("button.cancel"),l=h.find("button.delete"),n=h.find(".image-preview"),o=n.find("canvas").get(0),k=h.find(".image-cropper"),q=null,p=null,r=null,f.getS3Config().then(function(f){var h,j,l,n,s,t,u,v,w;return p="products",s={expiration:"2020-12-01T12:00:00.000Z",conditions:[{bucket:f.bucketName},["starts-with","$key",""],{acl:"public-read"},{success_action_status:"201"},["starts-with","$Content-Type","image/"]]},t=b("base64")(s),r=b("hmacSha1")(t,f.secretKey),n=function(){return m.get(0).files[0]},l=function(){var a,b,c,d,e,f,g;for(e=n().type,c=o.toDataURL(e),b=atob(c.split(",")[1]),a=[],d=f=0,g=b.length;g>=0?g>=f:f>=g;d=g>=0?++f:--f)a.push(b.charCodeAt(d));return new Blob([new Uint8Array(a)],{type:e})},u=function(a){var b;return b=o.getContext("2d"),b.clearRect(0,0,o.width,o.height),b.fillStyle="#ffffff",b.fill(),b.drawImage(k.find("img").get(0),a.x,a.y,a.w,a.h,0,0,o.width,o.height)},w=function(a){var b;return a?(b=new Image,b.src=window.URL.createObjectURL(a),b.onload=function(){var a,c,d;return d=b.naturalWidth,c=b.naturalHeight,window.URL.revokeObjectURL(b.src),d>=236&&c>=136?!0:(a=g.createMessage("error","Images must be at least 236px wide by 136px high. Please choose a larger image.","Product"),g.addMessage(a),!1)}):void 0},m.on("change",function(){var a;return a=w(n()),c(function(){var b;return a&&!g.hasMessages("Product").length?(b=new FileReader,b.onload=function(){var a;return null!=q&&(q.destroy(),k.find("img").remove()),a=$("<img>",{src:b.result}),k.append(a),a.Jcrop({aspectRatio:1.77,minSize:[230,130],setSelect:[0,0,230,130],boxWidth:400,boxHeight:400,onChange:u,onSelect:u},function(){return q=this})},b.readAsDataURL(n())):void 0},200)}),v=function(b){var c,d,g;return c=n(),null!=c?(g=""+p+"/"+e.getMerchant().id+"/"+(new Date).getTime()+"-"+c.name,d=new FormData,d.append("key",g),d.append("acl","public-read"),d.append("success_action_status","201"),d.append("Content-Type",c.type),d.append("AWSAccessKeyId",f.accessKeyId),d.append("policy",t),d.append("signature",r),d.append("file",l()),a.post("https://"+f.bucketName+".s3.amazonaws.com/",d,{headers:{"Content-Type":void 0},transformRequest:function(a){return a}}).success(function(a){return b({filename:g,url:$(a).find("location").text()})})):void 0},h=function(a){var b,c;return b=new AWS.S3({params:{Bucket:f.bucketName}}),c={Bucket:f.bucketName,Key:a.url},b.deleteObject(c,function(a,b){return console.log(null!=a?a:b)})},j=function(){return m.val(""),null!=q&&q.destroy(),k.find("img").remove(),o.getContext("2d").clearRect(0,0,o.width,o.height)},i.on("click",function(){return d.$apply(j)}),d.deleteImage=function(a){var b;return b=d.product.images.indexOf(a),d.product.images.splice(b,1),d.$parent.save()},d.$on("product:save",function(){return v(function(a){return d.image=a,d.product.images=[],d.product.images.push(a),j()})})})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Order",["$resource","Config","$location","Auth",function(a,b,c,d){return a("api://api/merchants/:merchantId/venues/:venueId/orders/:id",{id:"@id",merchantId:function(){var a;return null!=(a=d.getMerchant())?a.id:void 0},venueId:function(){var a;return null!=(a=d.getVenue())?a.id:void 0}},{query:{method:"GET",isArray:!0,params:{sort:"created,desc"},transformResponse:function(a){return"string"==typeof a&&(a=JSON.parse(a)),a.content}},refund:{method:"PUT",transformRequest:function(a){return JSON.stringify({items:_.pluck(a.basket.items.filter(function(a){return a.toRefund}),"id"),pos:c.search()["pos.name"]})}}})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("OrdersCtrl",["$scope","Order","orders",function(a,b,c){return a.orders=c,a.search=function(){return a.orders=[],b.query({orderId:a.orderId,from:"1970-01-01T00:00"},function(b){return a.orders=b})},a.clear=function(){return a.orderId="",a.search()},a.$on("order:updated",function(b,c){var d,e,f,g;for(g=[],d=e=0,f=a.orders.length;f>=0?f>e:e>f;d=f>=0?++e:--e)g.push(a.orders[d].id===c.id?a.orders[d]=angular.copy(c):void 0);return g})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("orderRefundForm",["$filter","Config",function(a,b){return{templateUrl:"views/partials/orders/order-refund-form.html",replace:!0,restrict:"E",scope:{order:"="},controller:["$scope","$element","$attrs",function(c){var d;return c.fullyRefunded=function(){return"REFUNDED"===c.order.status||c.order.basket.items.every(function(a){return"REFUNDED"===a.state})},c.isRefunded=function(a){return c.fullyRefunded()||"REFUNDED"===a.state},c.canRefund=function(){return!c.order.splitOrder},c.refundValue=function(){return c.order.basket.items.some(function(a){return a.toRefund})?c.order.basket.items.map(function(a){return a.toRefund?a.total+a.adjustment:0}).reduce(function(a,b){return a+b}):c.order.basket.items.map(function(a){return"REFUNDED"===a.state?0:a.total+a.adjustment}).reduce(function(a,b){return a+b})},d=function(a){var c;return"browser"===b.mode()?alert(a):(c=document.createElement("iframe"),c.setAttribute("src","data:text/plain"),document.documentElement.appendChild(c),window.frames[0].window.alert(a),c.parentNode.removeChild(c))},c.refund=function(){var b;return c.$broadcast("refund:starting"),b=c.refundValue(),c.order.$refund({id:c.order.id},function(e){return c.$broadcast("refund:complete"),c.$emit("order:updated",e),d("Items with a value of "+a("currency")(b,"£")+" refunded")},function(){return c.$broadcast("refund:complete"),d("Refund failed")})},c.refundAll=function(){var a,b,d,e;for(e=c.order.basket.items,b=0,d=e.length;d>b;b++)a=e[b],a.toRefund=!1;return c.refund()},c.anySelected=function(){return _.some(c.order.basket.items,function(a){return a.toRefund})}}]}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Category",["$resource","Config","Auth",function(a,b,c){return a("api://api/merchants/:merchantId/venues/:venueId/categories/:id",{id:"@id",venueId:function(){var a;return null!=(a=c.getVenue())?a.id:void 0},merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0}},{update:{method:"PUT"}})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Product",["$resource","Config","Auth",function(a,b,c){return a("api://api/merchants/:merchantId/venues/:venueId/products/:id",{id:"@id",venueId:function(){var a;return null!=(a=c.getVenue())?a.id:void 0},merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0}},{update:{method:"PUT"}})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("ProductsCtrl",["$route","$scope","$rootScope","$location","$timeout","venue","venues","merchant","categories","products","sections","VenueService","ProductService","Catalog","catalogTemplate","CategoryService","SettingsService","MessagingService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s,t,u;return b.categories=i,b.products=j,b.venues=g,b.sections=k,b.venue=null!=f?f:c.credentials.venue,b.merchant=h,b.productsSorted=!1,b.lockedMode=!1,b.lockedModeText="Unlocked",b.lockedClass="",(null!=a.current.params.categoryId||b.products.length)&&(r=null!=(u=a.current.params.categoryId)?u:b.products[0].category),null!=r&&(b.category=_.find(b.categories,function(a){return a.id===Number(r)}),b.selectedCategory=[],b.selectedCategory.category=b.category,b.selectedCategory.favorites=!1),b.openMenu=null,b.$on("products:batchsave",function(a,c){return c.length?m.batchSave(b.venue.id,c):void 0}),b.$on("products:persist",function(a,c){return b.productsSorted?t(c):void 0}),b.redirectToCategory=function(a,b){return d.path("/venues/"+a+"/products/category/"+b)},null!=b.selectedCategory&&b.redirectToCategory(b.venue.id,b.selectedCategory.category.id),b.toggleLockMode=function(){var a,c;return a=$("button.lockToggle"),c=$("#categoryList, #productList").find("li"),b.lockedMode?(b.lockedMode=!1,b.lockedModeText="Unlocked",b.lockedClass="",a.removeClass("toggle-inactive-icon").addClass("toggle-active-icon"),c.removeClass("disabled")):(b.lockedMode=!0,b.lockedModeText="Locked",b.lockedClass="disabled",a.removeClass("toggle-active-icon").addClass("toggle-inactive-icon"),c.addClass("disabled"),b.productsSorted&&(j=$("#productList").find("li"),b.$broadcast("products:persist",j))),!0},e(function(){return $("#categoryList").kendoSortable({placeholder:function(a){return a.clone().css("opacity",.3)},disabled:".disabled",hint:function(a){var b,c;return b=a.clone().removeClass("active").addClass("hint").removeAttr("data-ng-repeat"),c=angular.element('<div class="row"><div class="container"><div class="col-md-3"></div></div></div>'),c.find(".col-md-3").append(b),c.find("a").css({"border-style":"solid"}),c},change:function(){return s()}}),$("#productList").kendoSortable({filter:">li.product-tile",cursor:"move",disabled:".disabled",placeholder:function(a){var b;return a.hasClass("disabled")?void 0:(b=a.clone().css("opacity",.3),$("#productList").append(b),b)},hint:function(a){return a.clone().removeClass("k-state-selected")},change:function(){return b.productsSorted=!0,b.toggleSaveButton()}})},500),t=function(a){var c;return c=[],angular.forEach(a,function(a){var d,e,f;return d=angular.element(a),e=_.find(b.productsForCategory,function(a){return a.id===angular.fromJson(d.attr("data-product")).id}),null!=e?(delete e.version,delete e.created,f=["version","created"],_.forEach(e.images,function(a){var b,c,d,e;for(e=[],c=0,d=f.length;d>c;c++)b=f[c],e.push(delete a[b]);return e}),_.forEach(e.modifiers,function(a){var b,c,d;for(c=0,d=f.length;d>c;c++)b=f[c],delete a[b];return _.forEach(a.variants,function(a){var c,d,e;for(e=[],c=0,d=f.length;d>c;c++)b=f[c],e.push(delete a[b]);return e})}),e.favourite?e.favouriteIndex=d.index():e.index=d.index(),c.push(e.plain())):void 0}),e(function(){return b.productsSorted=!1,b.$broadcast("products:batchsave",c)},300)},s=function(){return i=$("#categoryList").find("li"),angular.forEach(i,function(a){var d,e;return e=angular.element(a),d=_.find(b.categories,function(a){return a.id===angular.fromJson(e.attr("data-category")).id}),null!=d?(d.index=e.index(),p.save(c.credentials.venue.id,d)):void 0})},b.populateCatalog=function(){return n.populate(b.merchant,b.venue,o.categories,function(){return b.$emit("catalog:populated")})},b.canAddVenue=function(){return l.canAddVenue()},b.switchVenue=function(a){return b.$broadcast("venue:switch",a)},b.create=function(){return d.path("/venues/"+b.venue.id+"/products/category/"+b.selectedCategory.category.id+"/add")},b.copy=function(a){return d.path("/venues/"+b.venue.id+"/products/duplicate/"+a.id)},b.edit=function(a){return d.path("/venues/"+b.venue.id+"/products/edit/"+a.id)},b.selectCategory=function(a){return d.path("/venues/"+b.venue.id+"/products/category/"+a.id)},b["delete"]=function(a){return b.$broadcast("delete:pending",a),m.remove(a).then(function(){return b.products=_.reject(b.products,function(b){return b.id===a.id}),b.productsForCategory=_.reject(b.productsForCategory,function(b){return b.id===a.id})},function(){return console.error("could not delete",a),b.$broadcast("delete:failed",a)})},b.removeFromFavorites=function(a){return a.favourite=!1,m.save(c.credentials.venue.id,a).then(function(){},function(){return console.error("update failed"),b.locked=!1})},b.hasModuleEnabled=function(a){return q.hasModuleEnabled(a)},b.hasMultipleVenues=function(){return b.venues.length>1?!0:!1},b.hasProducts=function(){return b.products.length?!0:!1},b.hasCategories=function(){return angular.isArray(b.categories)&&b.categories.length?!0:!1},b.canDeleteCategory=function(){return!0},b.deleteCategory=function(){var a;return b.canDeleteCategory()?(a=b.selectedCategory.category,p.remove(a).then(function(){return b.categories=_.reject(b.categories,function(b){return b.id===a.id}),b.selectedCategory.category=b.categories[0]})):void 0},b.toggleMenu=function(a,c){return b.openMenu=b.isMenuOpen(c)?null:c,a.stopPropagation()},b.closeMenus=function(){return b.openMenu=null},b.isMenuOpen=function(a){return b.openMenu===a},b.confirmedDelete=function(a){return b.productToDelete=a},b.closeConfirm=function(){return delete b.productToDelete},b.confirmYes=function(){return b["delete"](b.productToDelete),b.closeConfirm()},b.indexProperty=function(){var a;return(null!=(a=b.selectedCategory)?a.favorites:void 0)?"favouriteIndex":"index"},b.$on("catalog:populated",function(){return a.reload()}),b.$on("delete:requested",function(a,c){return b["delete"](c)}),b.$on("product:created",function(a,c){return b.products.push(c),b.productsForCategory.push(c)}),b.$on("product:updated",function(a,c){var d,e,f,g,h,i;for(d=e=0,g=b.products.length;g>=0?g>e:e>g;d=g>=0?++e:--e)b.products[d].id===c.id&&(b.products[d]=angular.copy(c));for(i=[],d=f=0,h=b.productsForCategory.length;h>=0?h>f:f>h;d=h>=0?++f:--f)i.push(b.productsForCategory[d].id===c.id?b.productsForCategory[d]=angular.copy(c):void 0);return i}),b.$on("merchant:switch",function(a,c){return c.getList("products").then(function(a){return b.products=a})}),b.$on("venue:switch",function(b,d){return c.credentials.venue=d,a.reload()}),b.$watch("selectedCategory",function(a){var c;return b.productsSorted&&(j=$("#productList").find("li"),b.$broadcast("products:persist",j)),(null!=a?a.favorites:void 0)?l.getVenueProducts(f.id,{favourite:null!=a?a.favorites:void 0}).then(function(a){return b.productsForCategory=_(a).chain().sortBy(["favouriteIndex","title"]).value()}):angular.isDefined(null!=a&&null!=(c=a.category)?c.id:void 0)?l.getVenueProductsByCategory(f.id,null!=a?a.category.id:void 0).then(function(a){return b.productsForCategory=_(a).chain().sortBy(["index","title"]).value()}):void 0}),b.save=function(){j=$("#productList").find("li"),b.$broadcast("products:persist",j),e(function(){return b.toggleSaveButton()},500)},b.toggleSaveButton=function(){var a;return a=$(".product-save-btn"),b.productsSorted?a.removeAttr("disabled"):a.attr("disabled","disabled")},b.$on("$locationChangeStart",function(a,c){var f;return b.productsSorted?(a.preventDefault(),f=confirm("Save your changes before leaving the page?"),f?(j=$("#productList").find("li"),b.$broadcast("products:persist",j)):b.productsSorted=!1,e(function(){return location.href=d.url(c).hash(),location.reload()},500)):void 0})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("productTile",[function(){return{restrict:"C",template:'<a data-ng-click="toggleMenu($event, product)" data-ng-style="productStyle()">\n  <div class="image-placeholder" style="background-image: url({{productImage}})"></div>\n  <h4 class="title">{{truncateTitle(product.title)}}</h4>\n</a>\n<div class="popover fade left" data-ng-class="{in: isMenuOpen(product)}">\n  <div class="arrow"></div>\n  <div class="popover-content">\n    <button data-ng-click="edit(product)" type="button" class="btn btn-default btn-lg" data-ng-if="selectedCategory.category">Edit</button>\n    <button data-ng-click="copy(product)" type="button" class="btn btn-default btn-lg" data-ng-if="selectedCategory.category">Duplicate</button>\n    <button data-ng-click="confirmedDelete(product)" type="button" class="btn btn-danger btn-lg" data-ng-if="selectedCategory.category">Delete</button>\n    <button data-ng-click="removeFromFavorites(product)" type="button" class="btn btn-danger btn-lg" data-ng-if="selectedCategory.favorites">Remove</button>\n  </div>\n</div>',link:function(a,b){var c,d,e,f;return c=b.find("a"),e=b.find(".popover"),d=b.find(".delete-confirm"),f=function(b){return $(b.originalEvent.target).is(".product-tile > a")?void 0:a.$apply(a.closeMenus)},a.truncateTitle=function(a){return a.length>35?a.truncateAt(35)+"...":a},a.$watch("openMenu",function(c){var d;return c===a.product?(d=b.position(),d.top+=parseInt(b.css("margin-top"),10),d.left+=parseInt(b.css("margin-left"),10),e.css({display:"block",top:d.top+b.outerHeight()/2-e.outerHeight()/2,left:d.left-e.outerWidth()}),$("body").on("click",f)):($("body").off("click",f),e.css({display:"none"}))}),e.on("click","button",function(){return a.closeMenus()}),a.$on("productsForCategory:sortstart",function(){return a.$apply(function(){return a.closeMenus()})}),a.productStyle=function(){var b,c,d,e;return angular.isDefined(a.product)?(b=a.categories.filter(function(b){return b.id===a.product.category}),b.length>0&&(c={"background-color":b[0].colour}),c.color="#FFFFFF",a.productImage=null!=(d=null!=(e=a.product.images)?e[0].url:void 0)?d:"styles/images/no-image.png",c):void 0}}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").filter("category",[function(){return function(a,b){return null!=b?a.filter(function(a){var c;return b.favorites?a.favourite:a.category===(null!=b&&null!=(c=b.category)?c.id:void 0)}):[]}}]).directive("categoryFilter",[function(){return{restrict:"E",scope:{categories:"=",selected:"=",sections:"="},templateUrl:"views/partials/products/category-filter.html",controller:["$scope","$rootScope","$element","$timeout","$location","Colors","VenueService","CategoryService","ModalService","ProductService",function(a,b,c,d,e,f,g,h,i){return a.categoryModal=angular.element($("#categoryModal")),a.sectionDropdown=angular.element($("#sectionNames")),a.renderModal=function(){var c;return c={scope:a,width:"600px",title:"Edit Category",actions:["Pin","Minimize","Maximize","Close"],apiEvents:{close:a.cancel},templateUrl:"views/partials/products/categoryModal.html"},i.createWindow("categoryModal",c),g.getVenueSections(b.credentials.venue.id).then(function(b){return a.sections=b}),d(function(){return $("#sectionNames").data("kendoMultiSelect")?void 0:(a.sectionIds=_.map(a.selected.category.sections,function(a){return a.id}),$("#sectionNames").kendoMultiSelect({animation:!1,open:function(){},placeholder:"Select a section...",dataTextField:"name",dataValueField:"id",maxSelectedItems:4,dataSource:{data:a.sections},value:a.sectionIds,change:function(){return a.sectionIds=this.value()}}))},100)},a.palette=["#b0cffe","#2ca8c2","#5481e5","#913ccc","#b179a3","#df93ff","#c93237","#f05f74","#f76d3c","#fcb96b","#e0be2f","#948d61","#168349","#839097","#bfbfbf","#e5a760"],a.hasCategories=function(){return angular.isArray(a.categories)&&a.categories.length?!0:!1},a.canDeleteCategory=function(){return!a.$parent.products.length},a.deleteCategory=function(){var b;return b=a.selected.category,a.canDeleteCategory()?(b=a.selected.category,h.remove(b).then(function(){return a.categories=_.reject(a.categories,function(a){return a.id===b.id}),a.$parent.selectedCategory.category=a.categories[0]})):void 0},a.selectCategory=function(b){return a.$parent.selectCategory(b)},a.selectFavorites=function(){return a.selected={category:null,favorites:!0}},a.isSelected=function(b){var c;return(null!=(c=a.selected.category)?c.id:void 0)===b.id},a.isFavoritesSelected=function(){var b,c;return null!=(b=null!=(c=a.selected)?c.favorites:void 0)?b:!1},a.create=function(){return a.category={colour:a.palette[0]},d(function(){return a.renderModal()},200)},a.edit=function(b){return a.category=angular.copy(b),a.sectionIds=_.map(a.category.sections,function(a){return a.id}),d(function(){return a.renderModal()},200)},a.save=function(c){var d;return a.locked=!0,d=[],angular.forEach(a.sectionIds,function(b){var c;return c=_.filter(a.sections,function(a){return a.id===b}),d.push(c)}),a.category.sections=_.flatten(d),null!=c.id?h.save(b.credentials.venue.id,c).then(function(b){var d,e,f,g;for(d=e=0,f=a.categories.length;f>=0?f>e:e>f;d=f>=0?++e:--e)a.categories[d].id===c.id&&(a.categories[d]=c);return(null!=(g=a.selected.category)?g.id:void 0)===c.id&&(a.selected.category=c),a.$emit("category:updated",b),a.selectCategory(c),delete a.category,delete a.locked,$("#categoryModal").data("kendoWindow").close()},function(){return console.error("failed to update category '"+c.title+"'"),delete a.locked}):(c.index=a.categories.length+1,h.save(b.credentials.venue.id,c).then(function(b){return a.$emit("category:created",b),a.categories.push(b),a.selectCategory(b),delete a.category,delete a.locked,$("#categoryModal").data("kendoWindow").close()},function(){return console.error("failed to save category '"+c.title+"'"),delete a.locked}))},a.cancel=function(){return delete a.category}}]}}]).directive("productGrid",["$timeout",function(){return{restrict:"C",link:function(a,b){return a.$watch("selectedCategory",function(){var a;return a=$(".category-filter").height()-b.prev().outerHeight()-parseInt(b.prev().css("margin-bottom"),10),b.css({"min-height":""+a+"px"})})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("ProductFormCtrl",["$rootScope","$scope","$location","$timeout","$route","$filter","$http","product","categories","sections","Auth","ProductService","MessagingService","ValidationService","ImageService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q,r,s,t,u;return b.product=h,b.categories=i,b.sections=j,p=$(".image-cropper"),s=null,b.s3Config=null,q=null,t=null,o.getS3Config().then(function(a){var c;return b.s3Config=a,q="products",c={expiration:"2020-12-01T12:00:00.000Z",conditions:[{bucket:a.bucketName},["starts-with","$key",""],{acl:"public-read"},{success_action_status:"201"},["starts-with","$Content-Type","image/"]]},b.policyBase64=f("base64")(c),b.signature=f("hmacSha1")(b.policyBase64,a.secretKey)}),r=function(){return $("canvas").get(0)},b.getImageFile=function(){return $("input.imageInput").get(0).files[0]},b.getCroppedImage=function(){var a,c,d,e,f,g,h;for(f=b.getImageFile().type,d=r().toDataURL(f),c=atob(d.split(",")[1]),a=[],e=g=0,h=c.length;h>=0?h>=g:g>=h;e=h>=0?++g:--g)a.push(c.charCodeAt(e));return new Blob([new Uint8Array(a)],{type:f})},b.updatePreview=function(a){var b;return b=r().getContext("2d"),b.clearRect(0,0,r().width,r().height),b.fillStyle="#ffffff",b.fill(),b.drawImage($(".image-cropper img").get(0),a.x,a.y,a.w,a.h,0,0,r().width,r().height)},b.imageChanged=function(){var a;return a=new FileReader,a.onload=function(){var c;return null!=s&&(s.destroy(),$(".image-cropper img").remove()),c=$("<img>",{src:a.result}),$(".image-cropper").append(c),c.Jcrop({aspectRatio:1.77,minSize:[230,130],setSelect:[0,0,230,130],boxWidth:400,boxHeight:400,onChange:b.updatePreview,onSelect:b.updatePreview},function(){return s=this})},a.readAsDataURL(b.getImageFile())},b.validateImageSize=function(a){var b;return a?(b=new Image,b.src=window.URL.createObjectURL(a),b.onload=function(){var a,c,d;return d=b.naturalWidth,c=b.naturalHeight,window.URL.revokeObjectURL(b.src),d>=236&&c>=136?!0:(a=m.createMessage("error","Images must be at least 236px wide by 136px high. Please choose a larger image.","Product"),m.addMessage(a),!1)}):void 0},b.uploadToS3=function(a){var c,d,e;return c=b.getImageFile(),angular.isDefined(c)?(e=""+q+"/"+k.getMerchant().id+"/"+(new Date).getTime()+"-"+c.name,d=new FormData,d.append("key",e),d.append("acl","public-read"),d.append("success_action_status","201"),d.append("Content-Type",c.type),d.append("AWSAccessKeyId",b.s3Config.accessKeyId),d.append("policy",b.policyBase64),d.append("signature",b.signature),d.append("file",b.getCroppedImage()),g.post("https://"+b.s3Config.bucketName+".s3.amazonaws.com/",d,{headers:{"Content-Type":void 0},transformRequest:function(a){return a}}).success(function(b){return a({filename:e,url:$(b).find("location").text()})})):a()},b.deleteImage=function(a){var c;return c=b.product.images.indexOf(a),b.product.images.splice(c,1),b.save()},b.back=function(){return a.backUrl="/venues/"+a.credentials.venue.id+"/products/category/"+b.product.category,a.back()},b.sectionOptions={animation:!1,placeholder:"Select a section...",dataTextField:"name",dataValueField:"id",maxSelectedItems:4,dataSource:{data:b.sections},change:function(){return b.sectionIds=this.value()}},b.sectionIds=_.map(h.sections,function(a){return a.id}),b.product.category=Number(null!=(null!=(u=e.current.params)?u.categoryId:void 0)?e.current.params.categoryId:b.product.category),b.product.modifiers||(b.product.modifiers=[]),d(function(){return angular.element(document.querySelector(".nav-tabs")).find("a:first").tab("show"),angular.element(document.querySelector(".k-dropdown")).on("keydown",function(a){var c;return 9===a.keyCode?(c=angular.element(a.currentTarget).find("select:first"),b.moveToNextTabIndex(a,c)):void 0})},100),b.reset=function(){var c,d;return m.resetMessages(),n.reset(),null!=b.product.id?l.getById(null!=(c=a.credentials)&&null!=(d=c.venue)?d.id:void 0,b.product.id).then(function(a){return b.product=a}):b.product=l["new"]()},b.save=function(c){var e;return e=[],angular.forEach(b.sectionIds,function(a){var b;return b=_.filter(j,function(b){return b.id===a}),e.push(b)}),b.product.sections=_.flatten(e),m.resetMessages(),n.reset(),n.validate("Product"),m.hasMessages("Product").length?void 0:(b.locked=!0,c||(c=!1),b.product.category=Number(b.product.category),b.uploadToS3(function(e){return console.log("called back"),e&&(b.product.images=[],b.product.images.push(e)),null!=b.product.id?(null==j&&(b.product.sections=[]),d(function(){return l.save(a.credentials.venue.id,b.product).then(function(a){return b.$emit("product:updated",a),b.locked=!1,c?b.back():void 0},function(){return console.error("update failed"),b.locked=!1})},100)):d(function(){return l.save(a.credentials.venue.id,b.product).then(function(a){return b.$emit("product:created",a),b.locked=!1,c?b.back():void 0},function(a){return console.error(a),b.locked=!1})},100)}))},b.selectModifier=function(a){return b.selectedModifier=a},b.addModifier=function(){var a;return a={title:"",allowNone:!1,allowMultiples:!1,variants:[]},b.selectedModifier=a,b.product.modifiers.push(a)},b.deleteModifier=function(){var a,c;return a=b.product.modifiers.indexOf(b.selectedModifier),a>=0?(b.product.modifiers.splice(a,1),b.selectedModifier=null!=(c=b.product.modifiers[a])?c:b.product.modifiers[b.product.modifiers.length-1]):void 0},b.addVariant=function(){var a;return a={title:"",priceDelta:0,isDefault:!1},null==b.selectedModifier.variants&&(b.selectedModifier.variants=[]),b.selectedModifier.variants.push(a)},b.deleteVariant=function(a){var c;return c=b.selectedModifier.variants.indexOf(a),c>=0?b.selectedModifier.variants.splice(c,1):void 0},b.selectDefaultVariant=function(a,b){var c,d,e,f,g;for(f=a.variants,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c!==b?c.isDefault=!1:void 0);return g},b.showDataChangedMessage=function(){var a;return m.resetMessages(),a=m.createMessage("warning","Your product data has changed. Don't forget to press the 'Save' button.","Venue"),m.addMessage(a),m.hasMessages("Venue")},b.findNextElemByTabIndex=function(a){var b;return b=angular.element(document.querySelector("[tabindex='"+a+"']"))},b.moveToNextTabIndex=function(a,c){var e,f,g,h;return e=c,f=[],null!=(null!=e&&null!=(g=e.attrs)?g.nexttabindex:void 0)?f=b.findNextElemByTabIndex(e.attrs.nexttabindex):null!=(null!=(h=e[0].attributes)?h.nexttabindex:void 0)&&(f=b.findNextElemByTabIndex(e[0].attributes.nexttabindex.value)),null!=e.save&&(e.save(),e.hide()),f.length?d(function(){return f.click()},10):void 0}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Discount",["$resource","Config","Auth",function(a,b,c){return a("api://api/merchants/:merchantId/venues/:venueId/discounts/:id",{id:"@id",merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0},venueId:function(){var a;return null!=(a=c.getVenue())?a.id:void 0}},{update:{method:"PUT"}})}])}.call(this),function(){angular.module("smartRegisterApp").controller("DiscountsCtrl",["$route","$scope","$rootScope","$location","venues","discounts","SettingsService","DiscountService","venues",function(a,b,c,d,e,f,g,h){return b.discounts=f,b.venues=e,b.venue=c.credentials.venue,b.create=function(){return d.path("/discounts/add/")},b.edit=function(a){return d.path("/discounts/edit/"+a.id)},b.save=function(){var a;return a=b.discount,b.discountForm.$valid?null!=a.id?a.$update(function(){var c,d,e;for(c=d=0,e=b.discounts.length;e>=0?e>d:d>e;c=e>=0?++d:--d)b.discounts[c].id===a.id&&(b.discounts[c]=a);return b.cancel()}):a.$save(function(){return b.discounts.push(a),b.cancel()}):void 0},b.remove=function(a){return h.remove(a).then(function(){var c;return c=b.discounts.indexOf(a),b.discounts.splice(c,1)},function(){return console.error("could not delete",a),b.$broadcast("delete:failed",a)})},b.toggleAvailableTo=function(a){var c;return c=b.discount.availableTo.indexOf(a),c>-1?b.discount.availableTo.splice(c,1):b.discount.availableTo.push(a)},b.canAddDiscount=function(){return b.discounts.length<3},b.hasModuleEnabled=function(a){return g.hasModuleEnabled(a)},b.hasMultipleVenues=function(){return b.venues.length>1?!0:!1},b.switchVenue=function(a){return b.$broadcast("venue:switch",a)},b.$on("venue:switch",function(b,d){return c.credentials.venue=d,a.reload()})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("DiscountFormCtrl",["$rootScope","$scope","$location","$timeout","$http","discount","Auth","DiscountService","MessagingService","ValidationService",function(a,b,c,d,e,f,g,h,i,j){return b.discount=f,b.reset=function(){return i.resetMessages(),j.reset(),null!=b.discount.id?h.getById(b.discount.id).then(function(a){return b.discount=a}):b.discount=h["new"]()},b.save=function(c){return i.resetMessages(),j.reset(),j.validate("Discount"),i.hasMessages("Discount").length?void 0:(b.locked=!0,f=b.discount,h.save(f).then(function(d){return c?a.back():(b.locked=!1,b.discount=d)},function(){return console.error("update failed"),b.locked=!1}))},b.showDataChangedMessage=function(){var a;return i.resetMessages(),a=i.createMessage("warning","Your discount data has changed. Don't forget to press the 'Save' button.","Discount"),i.addMessage(a),i.hasMessages("Discount")},b.findNextElemByTabIndex=function(a){var b;return b=angular.element(document.querySelector("[tabindex='"+a+"']"))},b.moveToNextTabIndex=function(a,c){var e,f;return e=c,f=[],null!=e.attrs.nexttabindex&&(f=b.findNextElemByTabIndex(e.attrs.nexttabindex)),e.save(),e.hide(),f.length?d(function(){return f.click()},10):void 0},b.keypressCallback=function(a,c){var e,f;return e=c,f=[],null!=e.attrs.nexttabindex&&(f=b.findNextElemByTabIndex(e.attrs.nexttabindex)),9===a.which&&(a.preventDefault(),e.save(),e.hide(),f.length&&d(function(){return f.click()},10)),13===a.which?(a.preventDefault(),e.save(),e.hide()):void 0}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Event",["$resource","Config","Auth",function(a,b,c){return a("api://api/merchants/:merchantId/venues/:venueId/events/:id",{id:"@id",merchantId:function(){var a;
return null!=(a=c.getMerchant())?a.id:void 0},venueId:function(){var a;return null!=(a=c.getVenue())?a.id:void 0}},{query:{method:"GET",isArray:!0,transformResponse:function(a){return"string"==typeof a&&(a=JSON.parse(a)),a.content}}})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Pos",["$resource","Config","Auth",function(a,b,c){return a("api://api/merchants/:merchantId/venues/:venueId/pos/:id",{id:"@id",venueId:function(){var a;return null!=(a=c.getVenue())?a.id:void 0},merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0}},{update:{method:"PUT"}})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("SocialCtrl",["$route","$rootScope","$scope","SettingsService","MessagingService","tools","venues",function(a,b,c,d,e,f,g){return c.tools=f,c.venues=g,c.venue=b.credentials.venue,c.connect=function(a){return OAuth.redirect(a,"/")},c.disconnect=function(a){var b,d;d=c.toolFor(a);for(b in d.properties)delete d.properties[b];return d.$update()},c.isConnected=function(a){var b,d;return null!=(null!=(b=c.toolFor(a))&&null!=(d=b.properties)?d.token:void 0)},c.toolFor=function(a){return _.find(c.tools,function(b){return b.appId==="com.mycircleinc.smarttools.social."+a})},c.save=function(a){var b;return a.$update(),e.resetMessages(),b=e.createMessage("success","Your "+a.name+" settings have been saved","Twitter"),e.addMessage(b),e.hasMessages("Social")},c.hasModuleEnabled=function(a){return d.hasModuleEnabled(a)},c.hasMultipleVenues=function(){return c.venues.length>1?!0:!1},c.switchVenue=function(a){return c.$broadcast("venue:switch",a)},c.$on("venue:switch",function(c,d){return b.credentials.venue=d,a.reload()})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("FoursquareCtrl",["$scope","$http","MessagingService",function(a,b,c){return a.tool=a.toolFor("foursquare"),a.save=function(){var b;return a.tool.$update(),c.resetMessages(),b=c.createMessage("success","Your Foursquare settings have been saved","Foursquare"),c.addMessage(b),c.hasMessages("Social")},a.deleteVenue=function(){return delete a.tool.properties.venueId,a.tool.$update()},a.isValidVenue=function(){var b;return null!=(null!=(b=a.tool.properties)?b.venueId:void 0)}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("foursquareUser",["$http",function(a){return{replace:!0,restrict:"E",scope:{tool:"="},template:'<figure data-ng-if="user" class="media"><img data-ng-src="{{user.photo.prefix}}64x64{{user.photo.suffix}}" class="img-rounded media-object pull-left"><figcaption class="media-body">Connected as&hellip;<br><span class="name">{{user.firstName}} {{user.lastName}}</span></figcaption></figure>',link:function(b){return b.$watch("tool.properties.token",function(c){return null!=c?a.get("https://api.foursquare.com/v2/users/self?oauth_token="+c+"&v="+moment().format("YYYYMMDD")).success(function(a){return b.user=a.response.user}).error(function(a,b){return console.error("could not get user details from Foursquare",b,a)}):delete b.user})}}}]).directive("foursquareVenue",["$http",function(a){return{replace:!0,restrict:"E",scope:{tool:"="},template:'<div class="alert" data-ng-class="{\'alert-success\': venue, \'alert-danger\': error}">\n  <div data-ng-if="venue"><strong>{{venue.name}}</strong><br>{{venue.location.address}}, {{venue.location.city}} {{venue.location.postalCode}}</div>\n  <div data-ng-if="error"><strong>Error</strong><br>{{error}}</div>\n</div>',link:function(b){return b.$watch("tool.properties.venueId",function(c){return null!=c?a.get("https://api.foursquare.com/v2/venues/"+c+"?oauth_token="+b.tool.properties.token+"&v="+moment().format("YYYYMMDD")).success(function(a){return b.venue=a.response.venue,delete b.error}).error(function(a){return delete b.venue,b.error=a.meta.errorDetail}):(delete b.venue,delete b.error)})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("FacebookCtrl",["$scope","$http","MessagingService",function(a,b,c){return a.tool=a.toolFor("facebook"),a.save=function(){var b;return a.tool.$update(),c.resetMessages(),b=c.createMessage("success","Your Facebook settings have been saved","Facebook"),c.addMessage(b),c.hasMessages("Social")},a.$watch("page",function(b){return null!=b?(a.tool.properties.pageId=b.id,a.tool.properties.pageName=b.name,a.tool.properties.pageToken=b.access_token):void 0}),a.$watch("tool.properties.token",function(c){return null!=c&&angular.isDefined(a.tool.properties.token)?b.get("https://graph.facebook.com/me?fields=accounts.fields(name,access_token)&format=json&access_token="+c).success(function(b){return a.pages=b.accounts.data,a.page=_.find(a.pages,function(b){return b.id===a.tool.properties.pageId})}).error(function(a,b){return console.error("could not get pages for user from Facebook",b,a)}):void 0})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("facebookUser",["$http",function(a){return{replace:!0,restrict:"E",scope:{tool:"="},template:'<figure data-ng-if="user" class="media"><img data-ng-src="{{picture()}}" class="img-rounded media-object pull-left"><figcaption class="media-body">Connected as&hellip;<br><span class="name">{{user.name}}</span></figcaption></figure>',link:function(b){return b.picture=function(){return angular.isDefined(b.tool.properties.token)?"https://graph.facebook.com/me/picture?width=64&height=64&access_token="+b.tool.properties.token:void 0},b.$watch("tool.properties.token",function(c){return null==c?delete b.user:angular.isDefined(b.tool.properties.token)?a.get("https://graph.facebook.com/me?format=json&access_token="+b.tool.properties.token).success(function(a){return b.user=a}).error(function(a,b){return console.error("could not get user details from Facebook",b,a)}):void 0})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("SmartReportCtrl",["$scope","$location","$filter","Report","report","Payments","payments",function(a,b,c,d,e,f,g){var h,i,j;return a.reports=[e],a.paymentLineItems=g,a.openingTotal=parseFloat(null!=(h=localStorage.getItem("openingTotal"))?h:0),a.partialPayments={CASH:parseFloat(null!=(i=b.search().cash)?i:0),CARD:parseFloat(null!=(j=b.search().card)?j:0)},a.byCategory=function(){return a.reports.map(function(a){return a.byCategory()})},a.topByProduct=function(){return a.reports.map(function(a){return a.topByProduct()})},a.$watch("openingTotal",function(a){return localStorage.setItem("openingTotal",a)}),a.$on("report:update",function(b,c){return d.get(c,function(b){return a.reports=[b]}),f.query(c,function(b){return a.paymentLineItems=b})}),a.paymentTypeTotal=function(b,c,d){var e,f,g;return e=null!=(f=null!=(g=b.byPaymentType(c,d))?g.total:void 0)?f:0,"PAYMENT"===d&&(e+=a.partialPayments[c]),e},b.search().from&&b.search().to?a.update():void 0}]).controller("ComparisonReportCtrl",["$scope","$filter","Report","report1","report2",function(a,b,c,d,e){return a.reports=[d,e],a.date=moment(e.dateRange.from).format("YYYY-MM-DD"),a.compare="day",a.byCategory=function(){return a.reports.map(function(a){return a.byCategory()})},a.topByProduct=function(){return a.reports.map(function(a){return a.topByProduct()})},a.reportPeriods=function(){return a.reports.map(function(a){var b,c;return c=moment(a.dateRange.from),b=moment(a.dateRange.to),Math.abs(c.diff(b,"weeks"))>1?c.format("MMM YYYY"):Math.abs(c.diff(b,"days"))>=6?"w/c "+c.format("Do MMM YYYY"):c.format("Do MMM YYYY")})},a.update=function(){var b;return d={},e={},b=moment(a.date),"day"===a.compare&&(d.from=b.clone().subtract("days",7),d.to=b.clone().subtract("days",6),e.from=b.clone().startOf("day"),e.to=b.clone().add("days",1)),"week"===a.compare&&(d.from=b.clone().subtract("days",7),d.to=b.clone(),e.from=b.clone(),e.to=b.clone().add("days",7)),"month"===a.compare&&(d.from=b.clone().subtract("months",1).startOf("month"),d.to=b.clone().startOf("month"),e.from=b.clone().startOf("month"),e.to=b.clone().add("months",1).startOf("month")),"year"===a.compare&&(d.from=b.clone().subtract("years",1).startOf("month"),d.to=b.clone().subtract("years",1).add("months",1).startOf("month"),e.from=b.clone().startOf("month"),e.to=b.clone().add("months",1).startOf("month")),c.get({from:d.from.format("YYYY-MM-DDTHH:mm"),to:d.to.format("YYYY-MM-DDTHH:mm")},function(b){return a.reports[0]=b}),c.get({from:e.from.format("YYYY-MM-DDTHH:mm"),to:e.to.format("YYYY-MM-DDTHH:mm")},function(b){return a.reports[1]=b})}}])}.call(this),function(){"use strict";var __indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("smartRegisterApp").directive("barChart",["$filter","$window",function($filter,$window){return{template:'<figure class="bar-chart"><figcaption ng-transclude></figcaption><div class="chart"></div></figure>',replace:!0,restrict:"E",transclude:!0,link:function($scope,$element,$attrs){var categoryAxis,getLabels,getValues,plot,plotOptions,redraw,valueAxis;return $element.find(".chart").attr("id",$attrs.id),getLabels=function(sources){var categories,category,point,source,_i,_j,_len,_len1;if(categories=[],null!=sources)for(_i=0,_len=sources.length;_len>_i;_i++)for(source=sources[_i],_j=0,_len1=source.length;_len1>_j;_j++)point=source[_j],category=eval("point."+$attrs.labels),__indexOf.call(categories,category)<0&&categories.push(category);return categories},getValues=function(sources,labels){var data,index,point,series,source,_i,_j,_len,_len1;if(series=[],null!=sources)for(_i=0,_len=sources.length;_len>_i;_i++){for(source=sources[_i],data=function(){var a,b,c;for(c=[],a=1,b=labels.length;b>=1?b>=a:a>=b;b>=1?a++:a--)c.push(0);return c}(),_j=0,_len1=source.length;_len1>_j;_j++)point=source[_j],index=labels.indexOf(eval("point."+$attrs.labels)),data[index]=eval("point."+$attrs.values);data.length>0&&series.push(data)}return series},plotOptions={grid:{background:"#ffffff",borderWidth:0,shadow:!1},seriesDefaults:{pointLabels:{show:!0,formatString:$attrs.currency?""+$attrs.currency+"%01.2f":null},renderer:$.jqplot.BarRenderer,rendererOptions:{barPadding:2,barMargin:5,fillToZero:!0},shadow:!1},series:[{color:"#3594a6"}]},null!=$attrs.tooltips&&(plotOptions.highlighter={useAxesFormatters:!1,tooltipFormatString:$attrs.currency?""+$attrs.currency+"%01.2f":null,show:!0,sizeAdjust:7.5}),null!=$attrs.legends&&(plotOptions.legend={show:!0,labels:eval("$scope."+$attrs.legends+"()")}),categoryAxis={renderer:$.jqplot.CategoryAxisRenderer,tickOptions:{showGridline:!1}},valueAxis={tickOptions:{formatString:$attrs.currency?""+$attrs.currency+"%01d":null}},"horizontal"===$attrs.direction?(plotOptions.seriesDefaults.rendererOptions.barDirection="horizontal",plotOptions.seriesDefaults.pointLabels.location="e",null!=$attrs.tooltips&&(plotOptions.highlighter.tooltipAxes="x"),plotOptions.axes={xaxis:valueAxis,yaxis:categoryAxis}):(categoryAxis.tickRenderer=$.jqplot.CanvasAxisTickRenderer,categoryAxis.tickOptions.angle=-30,plotOptions.seriesDefaults.pointLabels.location="n",null!=$attrs.tooltips&&(plotOptions.highlighter.tooltipAxes="y"),plotOptions.axes={xaxis:categoryAxis,yaxis:valueAxis}),null!=$attrs.hideValues&&(plotOptions.seriesDefaults.pointLabels.show=!1),plot=null,redraw=function(a){return null!=plot&&plot.destroy(),0!==a.length?plot=$.jqplot($attrs.id,a,plotOptions):void 0},$scope.$watchCollection($attrs.source,function(value){var data,labels;return labels=getLabels(value),data=getValues(value,labels),"horizontal"===$attrs.direction?plotOptions.axes.yaxis.ticks=labels:plotOptions.axes.xaxis.ticks=labels,null!=$attrs.legends&&(plotOptions.legend.labels=eval("$scope."+$attrs.legends+"()")),redraw(data)}),$($window).on("debouncedresize",function(){return redraw(null!=plot?plot.data:void 0)})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("reportPrintButton",["$location",function(){return{replace:!0,restrict:"E",template:'<div class="btn-group app-only">\n   <a href="/printreport" class="btn btn-default btn-lg" data-ng-click="print(\'small\')">Print</a>\n</div>',link:function(a,b){return a.print=function(a){var c,d,e,f,g;for(c=b.parents("body"),g=["small","medium","large"],e=0,f=g.length;f>e;e++)d=g[e],c.removeClass("print-"+d);return c.addClass("print-"+a),!0}}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("ProductReportCtrl",["$scope","Report","report",function(a,b,c){return a.report=c,a.byProduct=function(){return a.reports.map(function(a){return a.byProduct()})},a.$on("report:update",function(c,d){return b.get(d,function(b){return a.report=b})}),a.csvFilename=function(){var b,c,d;return b=moment(a.report.dateRange.from).startOf("day"),d=moment(a.report.dateRange.to).startOf("day"),c="products_",c+=b.format("YYYY-MM-DD"),b.isSame(d)||(c+="_",c+=d.format("YYYY-MM-DD")),c+=".csv"}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("SoldStockReportCtrl",["$scope","Report","report",function(a,b,c){return a.report=c,a.sort="total",a.reverse=!0,a.$on("report:update",function(c,d){return d.type="SOLD_STOCK",b.get(d,function(b){return a.report=b})})}])}.call(this),function(){"use strict";var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("smartRegisterApp").directive("reportControls",[function(){return{replace:!0,restrict:"E",scope:{hidePos:"@"},template:'<nav class="navbar navbar-default navbar-fixed-top report-subnav" role="navigation">\n  <form class="navbar-form" name="reportForm" data-ng-submit="update()">\n    <div class="container">\n      <div class="form-group navbar-left" data-date-range="range" data-disabled="!!event"></div>\n    </div>\n    <div class="container">\n      <div class="form-group navbar-left">\n        <select class="form-control input-lg" data-ng-model="event" data-ng-options="event.name for event in events | orderBy:\'start\':true track by event.id" data-ng-show="showEventList()">\n          <option value="">All events</option>\n        </select>\n        <select class="form-control input-lg"\n            data-ng-show="venues.length"\n            data-ng-model="venue"\n            data-ng-options="venue.name for venue in venues track by venue.id"\n            data-ng-disabled="venueIsLockedDown()"\n          >\n            <option value="">All venues</option>\n        </select>\n        <select class="form-control input-lg"\n          data-ng-model="device"\n          data-ng-options="device.label group by device.type for device in deviceList track by device.id"\n          data-ng-hide="hidePos"\n          data-ng-disabled="!venueSelected()"\n         >\n          <option value="">All orders</option>\n        </select>\n      </div>\n      <div class="navbar-right">\n        <button type="submit" class="btn btn-primary btn-lg" data-loading-button="Updating&hellip;" data-ng-disabled="!isValid()">Update</button>\n        <report-print-button/>\n      </div>\n    </div>\n  </form>\n</nav>',controller:["$scope","$rootScope","$element","$location","Event","POSService","VenueService","versionCheckService",function(b,c,d,e,f,g,h){var i;return h.getList(c.credentials.merchant.id).then(function(a){return b.venues=a}),null!=e.search().venueId&&h.getById(e.search().venueId).then(function(a){return b.venue=a}),b.venueIsLockedDown=function(){return null!=e.search().venueId},b.events=[],f.query(function(a){return b.events=a}),b.populateDeviceList=function(c){var d,f,g,h,i;for(b.device=null,b.deviceList=[{id:"ALL_POS",label:"All POS orders"},{id:"ALL_POPP",label:"All POPP orders"}],g=0,h=c.length;h>g;g++)d=c[g],b.deviceList.push({id:d.name,label:d.name,type:"Devices"});return null!=e.search()["pos.uuid"]?(f={id:e.search()["pos.name"],label:e.search()["pos.name"],type:"Devices"},i=f.id,a.call(_.pluck(b.deviceList,"id"),i)<0&&b.deviceList.push(f),b.device=f):void 0},g.getList(null!=(i=b.venue)?i.id:void 0).then(function(a){return b.populateDeviceList(a),b.update()}),b.range={from:null,to:null},b.device=null,b.event=null,b.venueSelected=function(){return null!=b.venue},b.isValid=function(){return b.reportForm.$valid},b.update=function(){var a,c,d,e,f,g,h,i,j,k,l;return b.isValid()?(a={},"ALL_POS"===(null!=(c=b.device)?c.id:void 0)?a.origin="MERCHANT":"ALL_POPP"===(null!=(e=b.device)?e.id:void 0)?a.origin="CONSUMER":null!=b.device&&(a.origin="MERCHANT",a.pos=null!=(f=b.device)?f.id:void 0),null!=b.venue&&(a.venueId=null!=(g=b.venue)?g.id:void 0),null!=b.event?(a.from=moment(b.event.ordersAcceptedFrom).format("YYYY-MM-DDTHH:mm"),a.to=moment(b.event.finish).format("YYYY-MM-DDTHH:mm"),a.eventId=b.event.id):(a.from=null!=(h=b.range)&&null!=(i=h.from)&&null!=(j=i.utc())?j.format("YYYY-MM-DDTHH:mm"):void 0,a.to=null!=(k=b.range)&&null!=(l=k.to)&&null!=(d=l.utc())?d.format("YYYY-MM-DDTHH:mm"):void 0),b.$emit("report:update",a)):void 0},b.showEventList=function(){return b.events.length>0},b.$watch("venue",function(){var a;return g.getList(null!=(a=b.venue)?a.id:void 0).then(function(a){return b.populateDeviceList(a)})})}]}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Report",["$resource","Config","Auth","$filter",function(a,b,c,d){var e,f;return e=a("api://api/merchants/:merchantId/venues/:venueId/reports",{merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0},venueId:function(){var a;return null!=(a=c.getVenue())?a.id:void 0}},{get:{method:"GET",transformResponse:function(a,b){var c,d;return d="string"==typeof a?JSON.parse(a):a,c=b("Date"),d.created=null!=c?new Date(c):new Date,d}}}),e.prototype.totalTax=function(){var a;return a=0,_.forEach(this.vatReport.vatSummary,function(b){return _.forEach(b.vatSummaryDetails,function(b){return a+="PAYMENT"===b.type?b.total:-b.total})}),a},e.prototype.totalGross=function(){return _.reduce(this.zReport.summary,function(a,b){return a+("PAYMENT"===b.type?b.total:-b.total)},0)},e.prototype.totalSales=function(){return _.reduce(this.zReport.summary,function(a,b){return a+("PAYMENT"===b.type?b.total:0)},0)},e.prototype.totalRefunds=function(){return _.reduce(this.zReport.summary,function(a,b){return a+("REFUND"===b.type?b.total:0)},0)},e.prototype.refundCount=function(){return _.reduce(this.zReport.summary,function(a,b){return a+("REFUND"===b.type?b.count:0)},0)},e.prototype.cashIn=function(){var a;return a=_.reduce(this.zReport.summary,function(a,b){return a+("CASH"===b.paymentType&&"PAYMENT"===b.type?b.total:0)},0),a=_.reduce(this.paymentReport.payments,function(a,b){return a+("CASH"===b.paymentType&&"IN"===b.direction?b.total:0)},a)},e.prototype.cashOut=function(){var a;return a=_.reduce(this.zReport.summary,function(a,b){return a+("CASH"===b.paymentType&&"REFUND"===b.type?b.total:0)},0),a=_.reduce(this.paymentReport.payments,function(a,b){return a+("CASH"===b.paymentType&&"OUT"===b.direction?b.total:0)},a)},e.prototype.closingTotal=function(){var a;return parseFloat(null!=(a=this.openingTotal)?a:"0")+this.cashIn()-this.cashOut()},f=function(a,b){var c,d,e,f,g,h,i,j,k;for(e=[],g=0,i=a.length;i>g;g++){if(d=a[g],c=e.filter(function(a){return a[b]===d[b]})[0],null==c){for(c={net:0},c[b]=d[b],k=["payment","refund"],h=0,j=k.length;j>h;h++)f=k[h],c[f]={total:0,count:0};e.push(c)}c[d.type.toLowerCase()].total+=d.total,c[d.type.toLowerCase()].count+=d.count,"PAYMENT"===d.type?c.net+=d.total:c.net-=d.total}return _.sortBy(e,function(a){return-a.payment.total})},e.prototype.byCategory=function(){var a,b;return null==this._byCategory&&(this._byCategory=f(null!=(a=null!=(b=this.categoryReport)?b.categories:void 0)?a:[],"category")),this._byCategory},e.prototype.byProduct=function(){var a,b;return null==this._byProduct&&(this._byProduct=f(null!=(a=null!=(b=this.productReport)?b.products:void 0)?a:[],"title")),this._byProduct},e.prototype.topByProduct=function(){return null==this._topByProduct&&(this._topByProduct=d("limitTo")(this.byProduct(),10)),this._topByProduct},e.prototype.byPaymentType=function(a,b){var c;return c=this.zReport.summary.filter(function(c){return c.paymentType===a&&c.type===b}),0===c.length?null:c[0]},e}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("cashTransactions",[function(){return{restrict:"C",templateUrl:"views/partials/reports/cash-transactions.html"}}]).directive("paymentTypesReport",[function(){return{controller:["$scope",function(a){return a.paymentTypes=[{paymentType:"CASH",transactionType:"PAYMENT"},{paymentType:"CARD",transactionType:"PAYMENT"},{paymentType:"CASH",transactionType:"REFUND"},{paymentType:"CARD",transactionType:"REFUND"}]}],restrict:"C",templateUrl:"views/partials/reports/payment-types-report.html"}}]).directive("categoryReport",[function(){return{replace:!0,restrict:"E",scope:{report:"="},templateUrl:"views/partials/reports/category-report.html"}}]).directive("productReport",[function(){return{replace:!0,restrict:"E",scope:{report:"="},templateUrl:"views/partials/reports/product-report.html"}}]).directive("adHocPaymentsReport",[function(){return{controller:["$scope",function(a){return a.adHocPaymentsComparator=function(a){var b;return b=0,"EMPLOYEE"===a.type&&(b+=4),"OUT"===a.type&&(b+=2),"CARD"===a.paymentType&&(b+=1),b},a.paymentsFor=function(b,c,d){return _.filter(a.paymentLineItems,function(a){return a.paymentType===b&&a.paymentDirection===c&&a.type===d})}}],restrict:"C",scope:{report:"=",paymentLineItems:"="},templateUrl:"views/partials/reports/ad-hoc-payments.html"}}]).directive("vatBreakdown",[function(){return{link:function(a){return a.$watch("report",function(b){var c;return c={},_.forEach(b.vatReport.vatSummary,function(a){return _.forEach(a.vatSummaryDetails,function(a){var b,d;return b=null!=(d=c[a.taxRate])?d:0,c[a.taxRate]=b+("PAYMENT"===a.type?a.total:-a.total)})}),c=_.pairs(c),a.taxBreakdown=c})},restrict:"C",scope:{report:"="},template:'<h3>VAT breakdown</h3>\n<table class="table table-condensed report-table">\n  <tbody>\n    <tr data-ng-repeat="row in taxBreakdown">\n      <th>{{row[0] | percentage}}</th>\n      <td class="currency">{{row[1] | currency:"£"}}</td>\n    </tr>\n  </tbody>\n</table>'}}]).filter("array",[function(){return function(a){return"array"==typeof a?a:[a]}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("cashReconciliation",[function(){return{controller:["$scope",function(a){return a.currencies=["£20","£10","£5","£2","£1","50p","20p","10p","5p","2p/1p","Other"]}],restrict:"C",scope:!0,template:'<h2>Cash register reconciliation</h2>\n<table class="table table-bordered">\n  <tfoot>\n    <tr>\n      <th>Total</th>\n      <td>&nbsp;</td>\n    </tr>\n  </tfoot>\n  <tbody>\n    <tr data-ng-repeat="currency in currencies">\n      <th>{{currency}}</th>\n      <td>&nbsp;</td>\n    </tr>\n  </tbody>\n</table>'}}])}.call(this),function(){"use strict";angular.module("csv",[]).config(["$compileProvider",function(a){var b;return b=a.aHrefSanitizationWhitelist(),a.aHrefSanitizationWhitelist(b.source+/|data:text\/csv\b/.source)}]).constant("csvHeader","data:text/csv;charset=iso-8859-1;base64,").factory("csvService",[function(){return{elementsToCsv:function(a){return _.map(a,function(a){var b;return b=$(a).text(),b.indexOf(",")>=0?'"'+b+'"':b})},tableToCsv:function(a){var b,c;return c=[],c.push(this.elementsToCsv(a.find("thead tr:has(th):eq(0) th"))),_.each(a.find("tbody tr"),function(a){return function(b){return c.push(a.elementsToCsv($(b).find("td")))}}(this)),b="",_.forEach(c,function(a,c){return c>0&&(b+="\r\n"),b+=a.join(",")}),b},downloadDataURI:function(a){var b;a&&($.isPlainObject(a)||(a={data:a}),null==(null!=(b=$.browser)?b.webkit:void 0)&&(location.href=a.data),a.filename||(a.filename="download."+a.data.split(",")[0].split(";")[0].substring(5).split("/")[1]),a.url||(a.url="http://download-data-uri.appspot.com/"),$('<form method="post" action="'+a.url+'" style="display:none"><input type="hidden" name="filename" value="'+a.filename+'"/><input type="hidden" name="data" value="'+a.data+'"/></form>').submit().remove())}}}]).directive("csvExportButton",["csvService","csvHeader","$parse",function(a,b){return{replace:!0,restrict:"E",scope:{filename:"&"},template:'<button data-ng-click="exportData()" data-ng-transclude type="button"></button>',transclude:!0,link:function(c,d){return c.exportData=function(){var e,f;return e=a.tableToCsv(d.parents("table")),f=b+CryptoJS.enc.Latin1.parse(e).toString(CryptoJS.enc.Base64),a.downloadDataURI({filename:c.filename(),data:f}),null}}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("dateRange",[function(){return{replace:!1,require:"^form",restrict:"A",scope:{dateRange:"=",disabled:"="},template:'<select data-ng-model="range" class="form-control input-lg" data-ng-disabled="disabled">\n  <option value="today">Today</option>\n  <option value="yesterday">Yesterday</option>\n  <option value="this-week">This week</option>\n  <option value="last-week">Last week</option>\n  <option value="this-month">This month</option>\n  <option value="last-month">Last month</option>\n  <option value="this-year">This year</option>\n  <option value="custom">Custom date</option>\n</select>\n<span data-ng-hide="range != \'custom\'">\n  <input name="dateRangeFrom" type="datetime-local" data-datetime-local data-ng-model="dateRange.from" data-ng-readonly="range != \'custom\'" data-ng-disabled="disabled" class="form-control input-lg">\n  <label>to</label>\n  <input name="dateRangeTo" type="datetime-local" data-datetime-local data-ng-model="dateRange.to" data-ng-readonly="range != \'custom\'" data-ng-disabled="disabled" class="form-control input-lg">\n</span>\n<p class="error">Invalid date range</p>',link:function(a,b,c,d){var e;return e=function(b,c){return"custom"!==a.range||null!=b&&null!=c?(null!=c?c.isBefore(b):void 0)?d.dateRangeTo.$setValidity("range",!1):d.dateRangeTo.$setValidity("range",!0):d.dateRangeTo.$setValidity("range",!1)},a.$watch("dateRange.from",function(b){return e(b,a.dateRange.to)}),a.$watch("dateRange.to",function(b){return e(a.dateRange.from,b)}),a.$watch("range",function(b){switch(b){case"custom":return a.dateRange.from=moment().local().startOf("day"),a.dateRange.to=moment().endOf("day");case"today":return a.dateRange.from=moment().local().startOf("day"),a.dateRange.to=null;case"yesterday":return a.dateRange.from=moment().local().subtract("days",1).startOf("day"),a.dateRange.to=moment().local().startOf("day");case"this-week":return a.dateRange.from=moment().local().startOf("week"),a.dateRange.to=moment().local().endOf("week");case"last-week":return a.dateRange.from=moment().local().subtract("weeks",1).startOf("week"),a.dateRange.to=moment().local().subtract("weeks",1).endOf("week");case"this-month":return a.dateRange.from=moment().local().startOf("month"),a.dateRange.to=moment().local().endOf("month");case"last-month":return a.dateRange.from=moment().local().subtract("months",1).startOf("month"),a.dateRange.to=moment().local().subtract("months",1).endOf("month");case"this-year":return a.dateRange.from=moment().local().startOf("year"),a.dateRange.to=moment().local().endOf("year")}}),null==a.range?a.range="today":void 0}}}])}.call(this),function(){angular.module("smartRegisterApp").controller("CPRReportCtrl",["$rootScope","$scope","$timeout","$route","$filter","venues","POSList","POSName","venue","ReportsService","POSService","MessagingService","ValidationService",function(a,b,c,d,e,f,g,h,i,j,k,l){var m;return b.readOnly=function(){return b.readonly},b.hasErrors=function(){return l.hasMessages("CPRReport").length},b.setDateValues=function(a,c){var d;d=moment(new Date),a&&(b.openingDate=moment(a)),c&&(b.closingDate=moment(c)),b.openingDate>d&&(b.openingDate=d),b.closingDate>d&&(b.closingDate=d)},b.setDatePickers=function(a,d){return b.setDateValues(a,d),c(function(){return null!=b.opening&&(b.opening.min(kendo.parseDate(b.openingDate.toISOString())),b.opening.max(kendo.parseDate(b.closingDate.toISOString()))),null!=b.closing?(b.closing.min(kendo.parseDate(b.openingDate.toISOString())),b.closing.max(kendo.parseDate(b.closingDate.toISOString()))):void 0},1e3)},b.updateVenue=function(a){var c;return c=this.dataItem(a.item.index()),b.venueId=c.id,k.getList(b.venueId).then(function(a){return $("#posId").data("kendoDropDownList").setDataSource(a),a.length?($("#posId").data("kendoDropDownList").refresh(),$("#posId").data("kendoDropDownList").enable()):$("#posId").data("kendoDropDownList").enable(!1)}),b.generateReport()},b.updatePOS=function(a){var c;return c=this.dataItem(a.item.index()),b.posId=c.id,b.POS=c,b.generateReport()},b.getPOS=function(a,c){var d,e,f;return b.POS||(b.POS=null),null!=a&&(null!=(e=b.POS)?e.id:void 0)!==a?b.POS=_.findWhere(g,{id:Number(a)}):null!=c&&(null!=(f=b.POS)?f.name:void 0)!==c&&(b.POS=_.findWhere(g,{name:c})),angular.isObject(b.POS)?b.POS:(d=l.createMessage("error","POS '"+c+"' does not exist for the selected venue","CPRReport"),l.resetMessages(),l.addMessage(d),l.hasMessages("CPRReport"),!0)},b.getVenue=function(a,b){return i=null,null!=a?i=_.findWhere(f,{id:Number(a)}):null!=b&&(i=_.findWhere(f,{name:b})),i},b.formatPercentage=function(a){return numeral(a).format("0.000%")},b.calculatePayments=function(){return b.report.calculated={},b.report.calculated.paymentTotal=Number(b.report.cashPayment)+Number(b.report.cardPayment),b.report.calculated.cashPaymentDifference=Number(b.report.cashPaymentActual)-Number(b.report.cashPayment),b.report.cashPayment>0&&(b.report.calculated.cashPaymentPercentageDifference=b.report.calculated.cashPaymentDifference/b.report.cashPayment),b.report.calculated.cardPaymentDifference=Number(b.report.cardPaymentActual)-Number(b.report.cardPayment),b.report.cardPayment>0&&(b.report.calculated.cardPaymentPercentageDifference=b.report.calculated.cardPaymentDifference/b.report.cardPayment),b.report.calculated.actualPaymentTotal=Number(b.report.cashPaymentActual)+Number(b.report.cardPaymentActual),b.report.calculated.paymentDifferenceTotal=Number(b.report.calculated.actualPaymentTotal)-Number(b.report.calculated.paymentTotal),b.report.calculated.paymentTotal&&(b.report.calculated.paymentPercentageDifference=b.report.calculated.paymentDifferenceTotal/b.report.calculated.paymentTotal),b.report.calculated.cashDrawerBalance=Number(b.report.openingBalance)+Number(b.report.paymentIn)-Number(b.report.paymentOut)+Number(b.report.calculated.paymentTotal),b.report.calculated.cashDrawerActual=Number(b.report.openingBalance)+Number(b.report.paymentIn)-Number(b.report.paymentOut)+Number(b.report.calculated.actualPaymentTotal),b.report.calculated.cashDrawerDifference=Number(b.report.calculated.cashDrawerActual)-Number(b.report.calculated.cashDrawerBalance),b.report.calculated.cashDrawerBalance>0?b.report.calculated.cashDrawerPercentageDifference=b.report.calculated.cashDrawerDifference/b.report.calculated.cashDrawerActual:void 0},b.$watch("openingDate",function(){return b.openingDate&&b.opening?b.opening.value(kendo.parseDate(b.openingDate.toISOString())):void 0}),b.$watch("closingDate",function(){return b.closingDate&&b.closing?b.closing.value(kendo.parseDate(b.closingDate.toISOString())):void 0}),b.$watch("POS",function(){return null!=b.POS&&angular.isNumber(parseInt(b.POS.id))&&$("#posId").data("kendoDropDownList")?$("#posId").data("kendoDropDownList").value(b.POS.id):void 0}),b.generateReport=function(a){var c,d,e;return c={},b.readonly=!1,angular.isDefined(a&&angular.isNumber(parseInt(a)))?(b.readonly=!0,j.getSavedCPR(b.venueId,a).then(function(a){var d,e,f,h,i,j,k,l,m,n;return c=a,b.POS=b.getPOS(null,a.pos),b.posId=null!=(d=null!=(e=b.POS)?e.id:void 0)?d:g[0].id,null!=c?(b.setDatePickers(c.opening,c.closing),c.paymentIn=parseFloat(null!=(f=c.paymentIn)?f:0).toFixed(2),c.paymentOut=parseFloat(null!=(h=c.paymentOut)?h:0).toFixed(2),c.cashPayment=parseFloat(null!=(i=c.cashPayment)?i:0).toFixed(2),c.cashPaymentActual=parseFloat(null!=(j=c.cashPaymentActual)?j:c.cashPayment).toFixed(2),c.cardPayment=parseFloat(null!=(k=c.cardPayment)?k:0).toFixed(2),c.cardPaymentActual=parseFloat(null!=(l=c.cardPaymentActual)?l:c.cardPayment).toFixed(2),c.openingBalance=parseFloat(null!=(m=c.openingBalance)?m:0).toFixed(2),c.cashDrawerActual=parseFloat(null!=(n=c.cashDrawerActual)?n:0).toFixed(2),b.report=c,b.closing.enable(!b.readOnly()),b.calculatePayments(),$("#venue").data("kendoDropDownList").enable(!1),$("#posId").data("kendoDropDownList").enable(!1),b.opening.enable(!1),b.closing.enable(!b.readOnly()),b.calculatePayments()):void 0
})):angular.isNumber(parseInt(null!=(e=b.POS)?e.id:void 0))?(d={pos:b.POS.name},null!=b.openingDate&&(d.opening=b.openingDate.toISOString()),null!=b.closingDate&&(d.closing=b.closingDate.toISOString()),k.getPosValues(b.venueId,d).then(function(a){var d,e,f,g,h,i,j,k;return c=a,null!=c?(b.setDatePickers(c.opening,c.closing),c.paymentIn=parseFloat(null!=(d=c.paymentIn)?d:0).toFixed(2),c.paymentOut=parseFloat(null!=(e=c.paymentOut)?e:0).toFixed(2),c.cashPayment=parseFloat(null!=(f=c.cashPayment)?f:0).toFixed(2),c.cashPaymentActual=parseFloat(null!=(g=c.cashPaymentActual)?g:c.cashPayment).toFixed(2),c.cardPayment=parseFloat(null!=(h=c.cardPayment)?h:0).toFixed(2),c.cardPaymentActual=parseFloat(null!=(i=c.cardPaymentActual)?i:c.cardPayment).toFixed(2),c.openingBalance=parseFloat(null!=(j=c.openingBalance)?j:0).toFixed(2),c.cashDrawerActual=parseFloat(null!=(k=c.cashDrawerActual)?k:0).toFixed(2),b.report=c,b.closing.enable(!b.readOnly()),b.calculatePayments()):void 0})):void 0},b.openingChange=function(){return b.openingDate=moment(b.opening.value()),b.closingDate=moment(b.closing.value()),b.$apply(function(){b.openingDate?b.closing.min(b.openingDate.toISOString()):b.closingDate?b.opening.max(moment(b.closingDate)):(b.closingDate=moment(),b.opening.max(b.closingDate),b.closing.min(b.closingDate),b.closing.max(b.closingDate)),b.generateReport()})},b.closingChange=function(){return b.closingDate=moment(b.closing.value()),b.openingDate=moment(b.opening.value()),b.$apply(function(){b.closingDate?b.opening.max(b.closingDate.toISOString()):b.openingDate?b.closing.min(moment(b.openingDate)):(b.closingDate=moment(),b.opening.max(b.closingDate),b.closing.min(b.closingDate),b.closing.max(b.closingDate)),b.generateReport()})},b.save=function(){return b.report.opening=new Date(b.opening.value()),b.report.closing=new Date(b.closing.value()),b.report.openingBalance||(b.report.openingBalance=0),j.saveCPR(b.report).then(function(){return window.location.href="#"+a.backUrl,location.reload()})},b.generatePDF=function(){var a,d;return a={content:[{columns:[{text:"Closing POS Report",style:"headerBar",margin:[0,0,0,10]}]},{columns:[{text:"Venue:",width:200,style:"headerCol",width:100},{text:b.venue.name,alignment:"right"}]},{columns:[{text:"POS:",width:200,style:"headerCol",width:100},{text:b.report.pos,alignment:"right"}]},{columns:[{text:"Opening:",width:200,style:"headerCol",width:100},{text:kendo.toString(new Date(kendo.parseDate(b.report.opening)),"dddd dd MMM yyyy @ HH:mm"),alignment:"right"}]},{columns:[{text:"Closing:",width:200,style:"headerCol",width:100},{text:kendo.toString(new Date(kendo.parseDate(b.report.closing)),"dddd dd MMM yyyy @ HH:mm"),alignment:"right"}]},{columns:[{text:"Sales",style:"headerBar",margin:[0,20,0,10]}]},{columns:[{text:"",width:100},{text:"Payments",width:"*",style:"headerCol"},{text:"Actual",width:"*",style:"headerCol"},{text:"Difference",width:"*",style:"headerCol"},{text:"% Difference",width:"*",style:"headerCol"}]},{columns:[{text:"Cash",style:"headerCol",width:100},{text:e("currency")(b.report.cashPayment,"£"),width:"*"},{text:e("currency")(b.report.cashPaymentActual,"£"),width:"*"},{text:e("currency")(b.report.calculated.cashPaymentDifference,"£"),width:"*"},{text:b.formatPercentage(b.report.calculated.cashPaymentPercentageDifference),width:"*"}]},{columns:[{text:"Card",style:"headerCol",width:100},{text:e("currency")(b.report.cardPayment,"£"),width:"*"},{text:e("currency")(b.report.cardPaymentActual,"£"),width:"*"},{text:e("currency")(b.report.calculated.cardPaymentDifference,"£"),width:"*"},{text:b.formatPercentage(b.report.calculated.cardPaymentPercentageDifference),width:"*"}]},{columns:[{text:"Total",style:"headerCol",width:100},{text:e("currency")(b.report.calculated.paymentTotal,"£"),width:"*"},{text:e("currency")(b.report.calculated.actualPaymentTotal,"£"),width:"*"},{text:e("currency")(b.report.calculated.paymentDifferenceTotal,"£"),width:"*"},{text:b.formatPercentage(b.report.calculated.paymentPercentageDifference),width:"*"}]},{columns:[{text:"Payments",style:"headerBar",margin:[0,20,0,10]}]},{columns:[{text:"",width:100},{text:"Payments",width:"*",style:"headerCol"},{text:"Actual",width:"*",style:"headerCol"},{text:"Difference",width:"*",style:"headerCol"},{text:"% Difference",width:"*",style:"headerCol"}]},{columns:[{text:"Payments In",style:"headerCol",width:100},{text:e("currency")(b.report.paymentIn,"£"),width:"*"},{text:"-",width:"*"},{text:"-",width:"*"},{text:"-",width:"*"}]},{columns:[{text:"Payments Out",style:"headerCol",width:100},{text:e("currency")(b.report.paymentOut,"£"),width:"*"},{text:"-",width:"*"},{text:"-",width:"*"},{text:"-",width:"*"}]},{columns:[{text:"Totals",style:"headerBar",margin:[0,20,0,10]}]},{columns:[{text:"",width:100},{text:"Payments",width:"*",style:"headerCol"},{text:"Actual",width:"*",style:"headerCol"},{text:"Difference",width:"*",style:"headerCol"},{text:"% Difference",width:"*",style:"headerCol"}]},{columns:[{text:"Opening",style:"headerCol",width:100},{text:"-",width:"*"},{text:e("currency")(b.report.openingBalance,"£"),width:"*"},{text:"-",width:"*"},{text:"-",width:"*"}]},{columns:[{text:"Cash Drawer Balance",style:"headerCol",width:100},{text:e("currency")(b.report.calculated.cashDrawerBalance,"£"),width:"*"},{text:e("currency")(b.report.calculated.cashDrawerActual,"£"),width:"*"},{text:e("currency")(b.report.calculated.cashDrawerDifference,"£"),width:"*"},{text:b.formatPercentage(b.report.calculated.cashDrawerPercentageDifference),width:"*"}]}],styles:{headerBar:{fontSize:18,bold:!0,color:"#6b9b8e"},headerCol:{bold:!0,fontSize:10}},defaultStyle:{columnGap:20,fontSize:10}},b.report.vatSummaryDetails&&(d=[],d.push({columns:[{text:"Tax",style:"headerBar",margin:[0,20,0,10]}]}),d.push({columns:[{text:"",width:100},{text:"Rate",width:"*",style:"headerCol"},{text:"Total Tax value",width:"*",style:"headerCol"},{text:"",width:"*",style:"headerCol"},{text:"",width:"*",style:"headerCol"}]}),angular.forEach(b.report.vatSummaryDetails,function(a){return d.push({columns:[{text:"",width:"*",style:"headerCol",width:100},{text:e("percentage")(a.taxRate)},{text:e("currency")(a.total,"£"),width:"*",style:"headerCol"},{text:"-",width:"*",style:"headerCol"},{text:"-",width:"*",style:"headerCol"}]})}),a.content.push(d)),c(function(){return pdfMake.createPdf(a).open()},200)},a.$on("$viewContentLoaded",function(){return"views/cpr-report.html"===d.current.loadedTemplateUrl?c(function(){var a,e,f,i;return g.length?(d.current.params.id?e=d.current.params.id:(b.POSName=null!=h?h:g[0].name,b.POS=b.getPOS(null,b.POSName),b.posId=null!=(f=null!=(i=b.POS)?i.id:void 0)?f:g[0].id),c(function(){return b.generateReport(e)},500)):(a=l.createMessage("error","No POS devices exist for the selected venue","CPRReport"),l.resetMessages(),l.addMessage(a),l.hasMessages("CPRReport"))},500):void 0}),b.venue=null!=i?i:a.credentials.venue,b.report="undefined"!=typeof report&&null!==report?report:{calculated:{}},b.report.calculated.cashPaymentPercentageDifference=0,b.report.calculated.cardPaymentPercentageDifference=0,b.report.calculated.paymentPercentageDifference=0,b.report.calculated.cashDrawerPercentageDifference=0,b.venueId=null!=(m=b.venue.id)?m:i.id,b.POSList=new kendo.data.DataSource({data:g}),b.venues=new kendo.data.DataSource({data:f}),c(function(){return b.venueSelect=$("#venue").kendoDropDownList({dataTextField:"name",dataValueField:"id",dataSource:b.venues,select:b.updateVenue,enabled:!b.readOnly()}),b.posSelect=$("#posId").kendoDropDownList({dataTextField:"name",dataValueField:"id",dataSource:b.POSList,select:b.updatePOS,enabled:!b.readOnly()}),b.opening=$("#opening").kendoDateTimePicker({value:b.openingDate,change:b.openingChange,timeFormat:"HH:mm",format:"dd/MM/yyyy HH:mm",parseFormats:["dd/MM/yyyy hh:mmtt","dd/MM/yyyy HH:mm","dd/MM/yyyy","HH:mm"],interval:"15"}).data("kendoDateTimePicker"),b.closing=$("#closing").kendoDateTimePicker({value:b.closingDate,change:b.closingChange,timeFormat:"HH:mm",format:"dd/MM/yyyy HH:mm",parseFormats:["dd/MM/yyyy hh:mmtt","dd/MM/yyyy HH:mm","dd/MM/yyyy","HH:mm"],interval:"15"}).data("kendoDateTimePicker"),b.openingDate,b.setDatePickers(b.openingDate,b.closingDate)},500)}])}.call(this),function(){var a;angular.module("smartRegisterApp").controller("CPRReportHistoryCtrl",["$rootScope","$scope","$timeout","$location","CPRList","ReportsService","POSService","MessagingService","ValidationService",function(b,c,d,e,f){return c.CPRList=f,c.showReport=function(a){var b;return a.preventDefault(),b=this.dataItem($(a.currentTarget).closest("tr")),window.location.href="#/reports/venue/"+b.venueId+"/cpr/"+b.id,location.reload()},c.create=function(){return e.path("/reports/cpr")},$(".cpr-list").kendoGrid({dataSource:{data:f,page:1,schema:{model:{fields:{dateCreated:{type:"date"},pos:{type:"string"},opening:{type:"date"},closing:{type:"date"}}}}},columns:[{field:"dateCreated",title:"Date",width:"250px",template:'#= kendo.toString(kendo.parseDate(closing), "dddd dd MMMM yyyy" ) #'},{field:"pos",title:"POS Name"},{field:"opening",title:"Opening",template:'#= kendo.toString(kendo.parseDate(opening), "MM/dd/yyyy HH:mm" ) #',width:"140px",filterable:{ui:"datetimepicker"}},{field:"closing",title:"Closing",template:'#= kendo.toString(kendo.parseDate(closing), "MM/dd/yyyy HH:mm" ) #',width:"140px",filterable:{ui:"datetimepicker"}},{command:{text:"View Details",click:c.showReport},title:" ",width:"120px"}],sortable:!0,filterable:!0,pageable:{buttonCount:5,pageSize:10},groupable:!0,columnMenu:!0,dataBound:function(){var b,c;b=this.dataSource.filter(),this.thead.find(".k-header-column-menu.k-state-active").removeClass("k-state-active"),b&&(c={},a(b,c),this.thead.find("th[data-field]").each(function(){var a,b;a=$(this),b=c[a.data("field")],b&&a.find(".k-header-column-menu").addClass("k-state-active")}))}})}]),a=function(b,c){var d;if(b.filters)for(d=0;d<b.filters.length;)a(b.filters[d],c),d++;else c[b.field]=!0}}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("smartRegisterApp").controller("SalesTransactionHistoryCtrl",["$rootScope","$scope","$timeout","$location","$q","$http","Config","ReportsService","POSService","MessagingService","ValidationService",function(b,c,d,e,f,g,h,i,j){var k,l,m,n;return l=$("#dateRangeFrom").kendoDateTimePicker({format:"dd/MM/yyyy HH:MM"}),m=$("#dateRangeTo").kendoDateTimePicker({format:"dd/MM/yyyy HH:MM"}),c.populateDeviceList=function(b){var d,f,g,h,i;for(c.device=null,c.deviceList=[{id:"ALL_POS",name:"All POS"}],g=0,h=b.length;h>g;g++)d=b[g],c.deviceList.push({id:d.name,name:d.name,type:"Devices"});return null!=e.search()["pos.uuid"]&&(f={id:e.search()["pos.name"],label:e.search()["pos.name"],type:"Devices"},i=f.id,a.call(_.pluck(c.deviceList,"id"),i)<0&&c.deviceList.push(f),c.device=f),c.POSList=new kendo.data.DataSource({data:c.deviceList})},j.getList().then(function(a){return c.populateDeviceList(a)}),c.updatePOS=function(a){var b,d;d=this.dataItem(a.item.index()),c.posId=d.id,c.POS=d,b={logic:"and",filters:[]},"All POS"!==c.POS.name&&b.filters.push({field:"pos",operator:"eq",value:c.POS.name}),k.data("kendoGrid").dataSource.filter(b)},c.resetDateRange=function(){var a;return a={logic:"and",filters:[]},l.data("kendoDateTimePicker").value(null),m.data("kendoDateTimePicker").value(null),k.data("kendoGrid").dataSource.filter(a)},c.showDetails=function(a){var b,c;return a.preventDefault(),b=$(a.currentTarget).closest("tr"),c=b.next("tr"),c.hasClass("k-detail-row")&&c.filter(":visible").length?(b.find(".k-grid-ShowItems").text("Show Items"),this.collapseRow($(a.currentTarget).closest("tr"))):(b.find(".k-grid-ShowItems").text("Hide Items"),this.expandRow($(a.currentTarget).closest("tr")))},c.detailInit=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;b=a.detailRow,e=b.find(".order-items table"),f=a.data.basket.items,i=a.data.transactions,g=0,h=0,d=_.groupBy(f,function(a){return a.state.toLowerCase()}),angular.forEach(f,function(a){var b,c;return g+=a.total,"REFUNDED"===a.state&&(h+=a.total),b=angular.element('<tr class="state-'+a.state.toLowerCase()+'"></tr>'),b.append("<td>"+a.title+"</td>"),b.append("<td> &pound;"+parseFloat(null!=(c=a.total)?c:0).toFixed(2)+"</td>"),b.append('<td class="state-cell">'+a.state+"</td>"),e.append(b)}),i.length&&b.find(".order-transactions").kendoGrid({dataSource:{data:i},columns:[{field:"created",title:"Date",width:"250px",template:'#= kendo.toString(kendo.parseDate(created), "HH:mm - dd / MMMM / yyyy" ) #'},{field:"type",title:"Type"},{field:"paymentType",title:"Payment"},{field:"pos",title:"POS"},{field:"amount",title:"Amount",template:"&pound;#= parseFloat(amount).toFixed(2) #",width:"100px   "}]}),c=g-h,b.find(".refunded-count span").text(null!=(j=null!=(k=d.refunded)?k.length:void 0)?j:0),b.find(".paid-count span").text(null!=(l=null!=(m=d.paid)?m.length:void 0)?l:0),b.find(".order-total span").text("£"+parseFloat(null!=c?c:0).toFixed(2)),b.find(".tabstrip").kendoTabStrip({animation:{open:{effects:"fadeIn"}}})},k=$(".order-history-list").kendoGrid({sortable:!0,filterable:!0,columnMenu:!0,pageable:{buttonCount:5,pageSize:15,refresh:!0},dataSource:{serverPaging:!0,serverSorting:!0,serverFiltering:!0,transport:{read:function(a){return i.getPagedOrderList(b.credentials.venue.id,a).then(function(b){return a.success(b)})}},schema:{model:{fields:{dateCreated:{type:"date"},pos:{type:"string"},orderId:{type:"string"}}},total:function(a){return a.page.totalElements}}},columns:[{field:"created",title:"Date",width:"250px",template:'#= kendo.toString(kendo.parseDate(created), "HH:mm - dd / MMMM / yyyy" ) #',filterable:!1},{field:"pos",title:"POS",filterable:{extra:!1,operators:{string:{eq:"Is equal to"}},cell:{operator:"eq"}}},{field:"orderId",title:"Order ID",width:"140px",filterable:{extra:!1,operators:{string:{eq:"Is equal to"}},cell:{operator:"eq"}}},{field:"orderTotal",title:"Total",template:"&pound;#= parseFloat(orderTotal).toFixed(2) #",width:"100px",sortable:!1,filterable:!1},{command:{text:"Show Items",click:c.showDetails},title:" ",width:"120px"}],detailTemplate:kendo.template($("#detail-template").html()),detailInit:c.detailInit,dataBound:function(){var a,b,c;a=this.tbody.find("tr.k-master-row").first(),a.find(".k-grid-ShowItems").text("Hide Items"),this.expandRow(this.tbody.find("tr.k-master-row").first()),b=this.dataSource.filter(),this.thead.find(".k-header-column-menu.k-state-active").removeClass("k-state-active"),b&&(c={},n(b,c),this.thead.find("th[data-field]").each(function(){var a,b;a=$(this),b=c[a.data("field")],b&&a.find(".k-header-column-menu").addClass("k-state-active")}))}}),k.data("kendoGrid").dataSource.read(),d(function(){return $("#POSList").kendoDropDownList({dataTextField:"name",dataValueField:"id",dataSource:c.POSList,select:c.updatePOS})},500),$("#dateRangeFrom, #dateRangeTo").on("change",function(){var a,b,c;c=$("#dateRangeFrom").data("kendoDateTimePicker").value(),b=$("#dateRangeTo").data("kendoDateTimePicker").value(),a={logic:"and",filters:[]},null!==c&&a.filters.push({field:"from",operator:"ge",value:moment(kendo.parseDate(c)).format("YYYY-MM-DDTHH:mm")}),null!==b&&a.filters.push({field:"to",operator:"le",value:moment(kendo.parseDate(b)).format("YYYY-MM-DDTHH:mm")}),k.data("kendoGrid").dataSource.filter(a)}),$("#POSList").on("change",function(){}),n=function(a,b){var c;if(a.filters)for(c=0;c<a.filters.length;)n(a.filters[c],b),c++;else b[a.field]=!0}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Tool",["$resource","Config","Auth",function(a,b,c){return a("api://api/merchants/:merchantId/venues/:venueId/tools/:id",{id:"@id",merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0},venueId:function(){var a;return null!=(a=c.getVenue())?a.id:void 0}},{update:{method:"PUT",transformRequest:function(a){return JSON.stringify(_.omit(a,"appId"))}}})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("ToolsCtrl",["$route","$rootScope","$scope","SettingsService","tools","venues",function(a,b,c,d,e,f){return c.venues=f,c.venue=b.credentials.venue,c.tools=_.filter(e,function(a){return-1===a.appId.indexOf(".social.")}),_.each(c.tools,function(a){return null==a.groups?a.groups=[]:void 0}),c.save=function(a){return console.log(a),a.$update()},c.hasModuleEnabled=function(a){return d.hasModuleEnabled(a)},c.hasMultipleVenues=function(){return c.venues.length>1?!0:!1},c.switchVenue=function(a){return c.$broadcast("venue:switch",a)},c.$on("venue:switch",function(c,d){return b.credentials.venue=d,a.reload()})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Shift",["$resource","Config","Auth",function(a,b,c){var d;return d=a("api://api/merchants/:merchantId/employees/:eid/shifts/:id",{merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0},id:"@id",eid:"@employeeId"},{query:{url:"api://api/merchants/:merchantId/employees/shifts",method:"GET",isArray:!0,params:{merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0}}},update:{method:"PUT"},report:{url:"api://api/merchants/:merchantId/venues/:venueId/reports/timesheet",method:"GET",isArray:!0,params:{merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0},venueId:function(){var a;return null!=(a=c.getVenue())?a.id:void 0}}}}),d.prototype.getDate=function(){return moment(this.started).format("YYYY-MM-DD")},d}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Timesheet",["$resource","Config","Auth",function(a,b,c){var d;return d=a("api://api/merchants/:merchantId/venues/:venueId/reports",{id:"@id",type:"timesheet",merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0},venueId:function(){var a;return null!=(a=c.getVenue())?a.id:void 0}},{query:{method:"GET",isArray:!0,transformResponse:function(a){var b,c;return b="string"==typeof a?JSON.parse(a):a,null!=(c=b.timesheetReport.timesheets)?c:[]}}}),d.prototype.getDate=function(){return moment(this.dateStarted).format("YYYY-MM-DD")},d}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("TimesheetsCtrl",["$route","$rootScope","$scope","venues","SettingsService","Timesheet","Shift","startDate","endDate","timesheets","shifts",function(a,b,c,d,e,f,g,h,i,j,k){var l,m;return c.venues=d,c.venue=b.credentials.venue,c.computeDateRange=function(){var a,b,d,e,f,g;for(c.dateRange=new Array(Math.max(c.endDate.diff(c.startDate,"days"),0)+1),f=c.dateRange,g=[],a=d=0,e=f.length;e>d;a=++d)b=f[a],g.push(c.dateRange[a]=c.startDate.clone().add("d",a).format("YYYY-MM-DD"));return g},c.hasTimesheetData=function(){return Object.keys(c.timesheets).length>0},c.startDate=h,c.endDate=i,c.timesheets=_.groupBy(j,function(a){return a.getDate()}),c.shifts=k,c.computeDateRange(),m=function(){var a,b;return a=c.startDate.format("YYYY-MM-DDTHH:mm"),b=c.endDate.clone().add("days",1).format("YYYY-MM-DDTHH:mm"),f.query({from:a,to:b},function(a){return c.timesheets=_.groupBy(a,function(a){return a.getDate()}),c.computeDateRange()})},l=function(){var a,b;return a=c.startDate.format("YYYY-MM-DD"),b=c.endDate.clone().add("days",1).format("YYYY-MM-DD"),g.query({from:a,to:b,status:"ENDED"},function(a){return c.shifts=a})},c.update=function(){return m(),l()},c.edit=function(a){return c.selectedTimesheet=a},c.save=function(){var a,b,d,e,f,g,h;for(a=c.selectedShifts.length,g=c.selectedShifts,h=[],b=e=0,f=g.length;f>e;b=++e)d=g[b],h.push(d.$update(function(){return a--,0===a?(c.cancel(),m()):void 0}));return h},c.cancel=function(){return delete c.selectedTimesheet},c.$watch("selectedTimesheet",function(a){return null!=a?c.selectedShifts=_.filter(c.shifts,function(b){return b.employeeId===a.employeeId&&b.getDate()===a.getDate()}):delete c.selectedShifts}),c.hasModuleEnabled=function(a){return e.hasModuleEnabled(a)},c.hasMultipleVenues=function(){return c.venues.length>1?!0:!1},c.switchVenue=function(a){return c.$broadcast("venue:switch",a)},c.$on("venue:switch",function(c,d){return b.credentials.venue=d,a.reload()})}])}.call(this),function(){"use strict";angular.module("versionPoll",["ngRoute"])}.call(this),function(){"use strict";angular.module("versionPoll").directive("newVersionAlert",["$route","$timeout","versionCheckService",function(a,b,c){return{replace:!0,restrict:"E",scope:!0,template:'<button class="btn btn-success new-version-alert"\ndata-ng-show="changeDetected"\ndata-ng-click="reload()"\ntype="button">!</button>',link:function(a,d){return a.changeDetected=!1,a.reload=function(){return window.location.reload()},a.$on("version:changed",function(){return a.changeDetected=!0,d.tooltip({placement:"bottom",html:!0,title:"<h3>Updates available</h3><p>Click to reload.</p>",trigger:"click",container:"body"}),b(function(){return d.tooltip("show"),b(function(){return d.tooltip("hide")},3e4)})}),c.startPolling()}}}])}.call(this),function(){"use strict";angular.module("versionPoll").constant("frequencySeconds",300).factory("versionCheckService",["$rootScope","$http","$timeout","frequencySeconds","POSService",function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;return h=null,j=null,n=null,i=null,k=function(){var e;return e={},null!=j&&(e["If-Modified-Since"]=j),b.get("/version.txt",{headers:e}).success(function(b,e,f){return null!=h?h===b?c(k,1e3*d):(h=b,j=f("Last-Modified"),a.$broadcast("version:changed",b)):(h=b,a.currentVersion=h,j=f("Last-Modified"),c(k,1e3*d))}).error(function(a,b){return 304===b?c(k,1e3*d):console.warn("Version check got an error",b,a)})},l=function(){var e;return e={},null!=j&&(e["If-Modified-Since"]=j),b.get("/git-version.txt",{headers:e}).success(function(b,e,f){return null!=i?i===b?c(l,1e3*d):(i=b,j=f("Last-Modified"),a.$broadcast("version:changed",b)):(i=b,j=f("Last-Modified"),c(l,1e3*d))}).error(function(a,b){return 304===b?c(l,1e3*d):console.warn("Git version check got an error",b,a)})},f=function(b){return null!=a.posVersion&&(null!=b?b.latestPosVersion:void 0)>a.posVersion?a.$broadcast("posversion:changed",b):void 0},m=function(){return b.get("api://api/information").success(function(a){return n=a,c(m,1e3*d),f(n)})},g=function(a,b){var c,d,e;return d=a.split("."),e=b.split("."),c=!1,d[0]!==e[0]&&(c=!0),d[1]!==e[1]&&(c=!0),d[2]!==e[2]&&(c=!0),c},{startPolling:function(){return k(),l(),m()},currentVersion:function(){return h},checkPOSVersions:function(a){return null==a&&e.getList().then(function(b){return a=b}),c(function(){return b.get("api://api/information").success(function(b){var c,d;return n=b,d=!1,angular.forEach(a,function(a){return g(null!=n?n.latestPosVersion:void 0,a.posVersion)?d=!0:void 0}),console.log(d),d?(c="Version "+n.latestPosVersion+" of the iOS App is now available. Some of your POS may be running an older version, please update as soon as possible.",toastr.options={closeButton:!0,debug:!1,positionClass:"toast-top-full-width",onclick:null,showDuration:"1000",hideDuration:"1000",timeOut:"0",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr.info(c)):void 0},500)})},getHash:function(){return i},lastModified:function(){return j},serverInformation:function(){return n}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").directive("environmentInfo",["$rootScope","Config","Auth","versionCheckService","MessagingService",function(a,b,c,d){return{replace:!0,restrict:"E",scope:!0,template:'<div class="navbar navbar-inverse navbar-fixed-bottom environment-info" data-ng-if="shouldDisplay()">\n  <div class="container-fluid" data-ng-show="serverInformation">\n    <div class="pull-left">\n      <p class="navbar-text">Dashboard: <span style="text-transform: uppercase">{{dashboardVersion()}}</span> ({{gitHash()}})</p>\n      <form class="navbar-form navbar-left" data-requires-permission="PERM_PLATFORM_ADMINISTRATOR">\n        <div class="form-group merchant-selector"></div>\n      </form>\n    </div>\n    <div class="navbar-right">\n      <p class="navbar-text">Server: {{serverInformation().version}} ({{serverInformation().commitId}})</p>\n      <p class="navbar-text">API: {{serverInformation().apiVersion}}</p>\n      <p class="navbar-text">Build date: {{serverInformation().buildDate}}</p>\n      <p class="navbar-text">Environment: {{serverInformation().environment}}</p>\n    </div>\n  </div>\n</div>',link:function(e){return d.startPolling(),e.hasRole=function(a){return c.hasRole(a)},e.shouldDisplay=function(){return"browser"===b.mode()},e.dashboardVersion=function(){return d.currentVersion()},e.serverInformation=function(){return d.serverInformation()},e.gitHash=function(){return d.getHash()},e.$on("posversion:changed",function(b,c){var d;return d="There is a new version of the iOS App available. You currently have version "+a.posVersion+". Version "+c.latestPosVersion+" is now available.",toastr.options={closeButton:!0,debug:!1,positionClass:"toast-top-full-width",onclick:null,showDuration:"1000",hideDuration:"1000",timeOut:"0",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr.clear(),toastr.info(d)})}}}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").factory("Payments",["$resource","Config","Auth",function(a,b,c){return a("api://api/merchants/:merchantId/venues/:venueId/payments/:id",{id:"@id",venueId:function(){var a;return null!=(a=c.getVenue())?a.id:void 0},merchantId:function(){var a;return null!=(a=c.getMerchant())?a.id:void 0}})}])}.call(this),function(){"use strict";angular.module("smartRegisterApp").controller("UITestsCtrl",["$rootScope","$scope","SettingsService","$location",function(a,b){return b.today=function(){return b.dt=new Date},b.today(),b.clear=function(){return b.dt=null},b.disabled=function(a,b){return"day"===b&&(0===a.getDay()||6===a.getDay())},b.toggleMin=function(){return b.minDate=b.minDate?null:new Date},b.toggleMin(),b.open=function(a){return a.preventDefault(),a.stopPropagation(),b.opened=!0},b.dateOptions={formatYear:"yy",startingDay:1},b.initDate=new Date("2016-15-20"),b.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],b.format=b.formats[0]}])}.call(this);